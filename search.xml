<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>è¿åŠ¨æ­¥æ•°ä¿®æ”¹å™¨ web ç‰ˆæœ¬</title>
      <link href="/2021/05/22/front-end/sync-movement-steps/"/>
      <url>/2021/05/22/front-end/sync-movement-steps/</url>
      
        <content type="html"><![CDATA[<p><img src="/images/16216988358049.jpg"></p><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><ol><li>ä¿®æ”¹æœ¬åœ°æ­¥æ•°ï¼Œæ¯”å¦‚å¥åº·çš„æ•°æ®ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œæ²¡æœ‰æ‰¾åˆ°ç‰¹åˆ«æ–¹ä¾¿çš„æ–¹æ³•ã€‚</li><li>æ‘‡æ­¥å™¨ï¼Œæ…¢æ…¢æ…¢ï¼Œå·¥ä½œæ—¶é—´å†…åªèƒ½æ‘‡ 20 å…¬é‡Œå·¦å³</li><li>é€šè¿‡ç¬¬ä¸‰æ–¹åŒæ­¥æ•°æ®ï¼Œæ¯”å¦‚ä¹å¿ƒå¥åº·ï¼Œå°ç±³è¿åŠ¨ç­‰é€šè¿‡æ¥å£åŒæ­¥åˆ°å¾®æ˜Ÿã€æ”¯ä»˜å®ç­‰å¹³å°</li></ol><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>å®ç°å…¶å®æŒºç®€å•çš„ï¼Œgithub ä¸Šé¢çš„ä»£ç ä¹ŸæŒºå¤šï¼ŒåŒ…æ‹¬ nodejs çš„å®ç°ï¼Œshell çš„å®ç°ï¼Œpython çš„å®ç°ã€‚<br>è¿™é‡Œæˆ‘ä»¬é€‰æ‹©äº† nodejs çš„å®ç°ï¼Œå‰ç«¯ä½¿ç”¨ react + antdï¼Œåç«¯ä½¿ç”¨ nestjsï¼Œä½¿ç”¨æ—¶å€™ï¼Œç›´æ¥è¿”å›æ—¥å¿—ç»™ç”¨æˆ·ï¼Œæ–¹ä¾¿ç”¨æˆ·æŸ¥çœ‹å¤±è´¥è¯¦æƒ…ã€‚<br>ä»£ç å†™çš„æ¯”è¾ƒçƒ‚ï¼Œå°±æš‚æ—¶ä¸å¼€æºäº†ã€‚<br>è®¿é—®åœ°å€ï¼š<a href="https://walk.jscoder.com/" target="_blank" rel="noopener">https://walk.jscoder.com/</a></p><h2 id="ä½¿ç”¨è¯´æ˜"><a href="#ä½¿ç”¨è¯´æ˜" class="headerlink" title="ä½¿ç”¨è¯´æ˜"></a>ä½¿ç”¨è¯´æ˜</h2><ol><li>æ³¨å†Œå°ç±³è¿åŠ¨ app</li><li>å°ç±³è¿åŠ¨ appï¼Œæˆ‘çš„-ç¬¬ä¸‰æ–¹æ¥å…¥ï¼Œè®¾ç½®æ¥å…¥çš„ç¬¬ä¸‰æ–¹å¹³å°ï¼Œæ”¯æŒå¾®ä¿¡ã€QQã€æ”¯ä»˜å®ã€é˜¿é‡Œä½“è‚²</li><li><a href="https://walk.jscoder.com/" target="_blank" rel="noopener">https://walk.jscoder.com/</a> è¾“å…¥å°ç±³è¿åŠ¨çš„è´¦å·å¯†ç ï¼Œéœ€è¦çš„æ­¥æ•°ï¼Œç‚¹å‡»ç¡®å®š</li></ol><h3 id="æ³¨æ„ï¼š"><a href="#æ³¨æ„ï¼š" class="headerlink" title="æ³¨æ„ï¼š"></a>æ³¨æ„ï¼š</h3><ol><li>ä¸è¦é¢‘ç¹ä¿®æ”¹ä½ çš„æ•°æ®</li><li>ä¸è¦åœ¨ 0:00 ~ 5:00 è¿™ä¸ªæ—¶é—´æ®µä¿®æ”¹ä½ çš„æ•°æ®</li><li>æˆ‘ä¸ä¼šè®°å½•ä½ çš„å¯†ç ï¼Œä½†æ˜¯ä¾ç„¶å»ºè®®ä½ ä½¿ç”¨ä¸´æ—¶å¯†ç </li></ol><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><a href="https://github.com/Devifish/sport-editor" target="_blank" rel="noopener">Devifish/sport-editor: é€šè¿‡å°ç±³è¿åŠ¨APIå®ç°çš„è‡ªåŠ¨åˆ·è¿åŠ¨æ­¥æ•°å·¥å…·ğŸ˜’ï¼ˆå¯åŒæ­¥åˆ°å¾®ä¿¡ã€æ”¯ä»˜å®ï¼‰</a></li><li><a href="https://github.com/mixool/mimotion" target="_blank" rel="noopener">mixool/mimotion: å°ç±³è¿åŠ¨ å¾®ä¿¡æ­¥æ•° æ”¯ä»˜å®æ­¥æ•°</a></li><li><a href="https://github.com/lisztomania-Zero/SportsChange" target="_blank" rel="noopener">lisztomania-Zero/SportsChange: å¾®ä¿¡ã€æ”¯ä»˜å®ã€QQã€é˜¿é‡Œä½“è‚²è¿åŠ¨æ­¥æ•°ä¿®æ”¹</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ã€æ”¯ä»˜å®å°ç¨‹åºã€‘æˆ‘ä»¬å¸¸ç”¨çš„ &#39;my&#39; æ˜¯ä»€ä¹ˆï¼Ÿ</title>
      <link href="/2021/04/24/front-end/mini-my/"/>
      <url>/2021/04/24/front-end/mini-my/</url>
      
        <content type="html"><![CDATA[<p>æ”¯ä»˜å®å°ç¨‹åºå¼€å‘ä¸­æˆ‘ä»¬ä½¿ç”¨çš„ <code>my</code> å…¶å®å°±æ˜¯ jsbrige æ³¨å…¥çš„ä¸€ä¸ªå¯¹è±¡ã€‚<br>JSBridgeï¼Œç®€å•æ¥è¯´å°±æ˜¯webå’Œnativeä¹‹é—´çš„æ¡¥æ¢,æœ‰äº†å®ƒä½ å°±å¯ä»¥åœ¨webé¡µé¢ä¸­å”¤èµ·nativeåº”ç”¨æä¾›çš„èƒ½åŠ›ã€‚ä¾‹å¦‚ï¼šå”¤èµ·ç›¸å†Œï¼Œè·å–åº”ç”¨ç™»é™†ç”¨æˆ·ä¿¡æ¯ç­‰ç­‰ã€‚</p><p>åœ¨æ”¯ä»˜å®å°ç¨‹åºä¸­ï¼Œâ€™myâ€™ è¿™ä¸ªå¯¹è±¡å¯è¯»å¯å†™ã€‚</p><pre class=" language-js"><code class="language-js">my<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">1</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>my<span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 1</span></code></pre><h2 id="éå†-my-å¯¹è±¡"><a href="#éå†-my-å¯¹è±¡" class="headerlink" title="éå† my å¯¹è±¡"></a>éå† my å¯¹è±¡</h2><pre class=" language-js"><code class="language-js"> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>my<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>key <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>ç»“æœï¼š</p><pre class=" language-js"><code class="language-js">isIDE on off emit callSync call reLaunch navigateTo switchTab redirectTo navigateBack postMessage createAnimation pageScrollTo loadPlugin SDKVersion ExtSDKVersion getExtConfigSync getAppIdSync getExtConfig canIUse onAppShow offAppShow onAppHide offAppHide getLaunchOptionsSync onError offError onUnhandledRejection offUnhandledRejection env createWorker connectSocket downloadFile uploadFile request uploadFileToAliCloud createInnerAudioContext getBackgroundAudioManager createAudioContext reportAnalytics reportCustomEvent getChinfoChain appendChinfoChain createSelectorQuery navigateToMiniService navigateBackFromMiniService startMiniService setOptionMenu getOpenUserInfo getPhoneNumber getIDNumber getRecorderManager getUpdateManager getFileSystemManager createIntersectionObserver _fireIntersectionObserver loadFontFace createRDSContext stopPullDownRefresh hideKeyboard __reportFrameworkPerf reportCustomError saveSnapshot saveTemplateSnapshot showSharePanel hideDebugVersion getSelectedTextRange canvasToTempFilePath preloadCanvasImage createCanvasContext _createCanvas _createOffscreenCanvas createWebViewContext createAICameraContext createARContext createCameraContext createLivePlayerContext createLivePusherContext createLottieContext createMapContext createVideoContext rpc ocr ap startRecord stopRecord cancelRecord playVoice pauseVoice resumeVoice stopVoice playBackgroundAudio pauseBackgroundAudio stopBackgroundAudio seekBackgroundAudio getBackgroundAudioPlayerState onBackgroundAudioPlay offBackgroundAudioPlay onBackgroundAudioPause offBackgroundAudioPause onBackgroundAudioStop offBackgroundAudioStop getAvailableAudioSources openBluetoothAdapter closeBluetoothAdapter getBluetoothAdapterState startBluetoothDevicesDiscovery stopBluetoothDevicesDiscovery getBluetoothDevices getConnectedBluetoothDevices connectBLEDevice disconnectBLEDevice writeBLECharacteristicValue readBLECharacteristicValue notifyBLECharacteristicValueChange getBLEDeviceServices getBLEDeviceCharacteristics onBLECharacteristicValueChange offBLECharacteristicValueChange onBLEConnectionStateChanged offBLEConnectionStateChanged onBluetoothDeviceFound offBluetoothDeviceFound startBeaconDiscovery stopBeaconDiscovery getBeacons onBeaconUpdate offBeaconUpdate onBeaconServiceChange offBeaconServiceChange openBLEPeripheral closeBLEPeripheral addPeripheralService removePeripheralService updateCharacteristic startBLEAdvertising stopBLEAdvertising onBluetoothAdapterStateChange offBluetoothAdapterStateChange onCharacteristicRead offCharacteristicRead onCharacteristicWrite offCharacteristicWrite onCharacteristicDidSubscribe offCharacteristicDidSubscribe onCharacteristicDidUnsubscribe offCharacteristicDidUnsubscribe addPhoneContact getSystemInfoSync onGyroscopeChange offGyroscopeChange onAccelerometerChange offAccelerometerChange onCompassChange offCompassChange getServerTime makePhoneCall vibrate watchShake rsa sendSMS setKeepScreenOn setClipboard getClipboard scan getSystemInfo setScreenBrightness getScreenBrightness startWifi stopWifi connectWifi getWifiList setWifiList getConnectedWifi onGetWifiList offGetWifiList onWifiConnected offWifiConnected onMemoryWarning offMemoryWarning vibrateLong vibrateShort getHCEState startHCE stopHCE onHCEMessage offHCEMessage sendHCEMessage getBatteryInfo getBatteryInfoSync onDeviceMotionChange offDeviceMotionChange getDeviceInfo registerSSID unregisterSSID getCarrierName isSystemRoot setScreenOrientation getScreenOrientation getDeviceID exit seNFCServiceIsv addEventCal addEventCalendar onLowPowerWarning offLowPowerWarning isLowPowerMode getLocation openLocation chooseLocation reGeoCode geoCode onContinuousLocation offContinuousLocation startContinuousLocation stopContinuousLocation calculateRoute compressImage previewImage chooseFileFromDisk chooseImage chooseVideo saveImage getImageInfo saveVideoToPhotosAlbum generateImageFromCode saveImageToPhotosAlbum textToSpeech onAudioInterruptionBegin onAudioInterruptionEnd offAudioInterruptionBegin offAudioInterruptionEnd httpRequest sendSocketMessage closeSocket onSocketOpen offSocketOpen onSocketMessage offSocketMessage onSocketError offSocketError onSocketClose offSocketClose getNetworkType onNetworkStatusChange offNetworkStatusChange sendMtop getTBCode setTBSessionInfo getTBSessionInfo openRpc tradePay getUserInfo getAuthCode authorize getAuthUserInfo ARScan addCardAuth openSetting getSetting openCustomerService getConfigService getOpenUserData openOtherApplication donateInBrowser getStorageInfo getStorageInfoSync setStorage setStorageSync getStorage getStorageSync clearStorage clearStorageSync removeStorage removeStorageSync showAuthGuide getAuthStatus alert confirm prompt showToast hideToast showLoading hideLoading showNavigationBarLoading hideNavigationBarLoading setNavigationBar showActionSheet choosePhoneContact chooseAlipayContact datePicker chooseCity multiLevelSelect optionsSelect chooseContact hideShareMenu startPullDownRefresh setTransparentTitle showBackToHomepage setViewTop setCanPullDown setBackgroundImage removeBackgroundImage setBackgroundColor setBackgroundTextStyle setBackButton setLocatedCity onLocatedComplete setTabBarBadge removeTabBarBadge showTabBarRedDot hideTabBarRedDot setTabBarStyle setTabBarItem showTabBar hideTabBar getTitleColor regionPicker getMenuButtonBoundingClientRect onUserCaptureScreen offUserCaptureScreen onTitleCloseClick offTitleCloseClick onTitleMoreClick offTitleMoreClick iotCreateService iotCheckService saveFile removeSavedFile getSavedFileInfo getSavedFileList getFileInfo openDocument openTaobao reportBizReady getVisitToken navigateToCouponDetail openCardList openVoucherList openTicketList openCardDetail openVoucherDetail openTicketDetail openMerchantCardList openMerchantVoucherList openMerchantTicketList openKBVoucherDetail paySignCenter zmCreditBorrow textRiskIdentification openCarService openChatWindow __openLifePayment chooseAddress getAddress startZMCreditRent zmRentTransition chooseInvoiceTitle zmFreeDeposit hideAddToDesktopMenu hideAllAddToDesktopMenu hideFavoriteMenu hideAllFavoriteMenu setCustomPopMenu getRunScene navigateToMiniProgram navigateBackMiniProgram isCollected isFavorite addToFavorite removeFromFavorite onFavorite offFavorite onInternalFavorite offInternalFavorite canFavorite hideBackHome getRunData isSpeechRecognizeAvailable startSpeechRecognize stopSpeechRecognize onSpeechRecognizeResult offSpeechRecognizeResult onSpeechRecognizeError offSpeechRecognizeError startZMVerify startAPVerify createRtcRoomContext getExtConfig </code></pre><p>æ‰€æœ‰åœ¨ my è¿™ä¸ªå¯¹è±¡ä¸Šé¢æŒ‚è½½çš„æ–¹æ³•éƒ½åœ¨è¿™é‡Œäº†ï¼Œæ¯”æ–‡æ¡£é‡Œé¢çš„è¦å¤šå¾—å¤šã€‚</p><pre class=" language-js"><code class="language-js">on off emit</code></pre><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// A é¡µé¢</span>my<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">,</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// è¢«è§¦å‘,å›è°ƒè¢«æ‰§è¡Œï¼Œæ‰“å°å‡º {a:1}</span><span class="token comment" spellcheck="true">// B é¡µé¢</span>my<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>a<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>è¿™ä¸‰ä¸ªå‡½æ•°æ˜æ˜¾æ˜¯äº‹ä»¶æ€»çº¿çš„å®ç°æœºåˆ¶ï¼Œç»è¿‡æµ‹è¯•å®Œå…¨å¯ç”¨ï¼ˆæœªæµ‹è¯•ä½ç‰ˆæœ¬åŸºç¡€åº“ï¼‰ <del>~</del></p><h2 id="é€šè¿‡-my-å®ç°å…¨å±€æ•°æ®å…±äº«"><a href="#é€šè¿‡-my-å®ç°å…¨å±€æ•°æ®å…±äº«" class="headerlink" title="é€šè¿‡ my å®ç°å…¨å±€æ•°æ®å…±äº«"></a>é€šè¿‡ my å®ç°å…¨å±€æ•°æ®å…±äº«</h2><p>ä¸€èˆ¬å°ç¨‹åºé‡Œé¢å…¨å±€æ•°æ®æˆ‘ä»¬ä½¿ç”¨ globalData å¤„ç†ï¼Œå®ƒæœ¬è´¨ä¸Šä¹Ÿåªæ˜¯ä¸€ä¸ªå…¨å±€å¯¹è±¡ã€‚my çš„æ€§è´¨å’Œä»–ç±»ä¼¼ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥ä¿®æ”¹ my æœ¬èº«çš„æ•°æ®ï¼Œå®ç°å…¨å±€çš„é¡µé¢æ•°æ®å…±äº«</p><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// A é¡µé¢</span>my<span class="token punctuation">.</span>a<span class="token operator">=</span><span class="token number">1</span><span class="token comment" spellcheck="true">// B é¡µé¢</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>my<span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 1</span></code></pre><p>å®Œå…¨æ²¡é—®é¢˜ï¼Œè¿™è¿˜æ˜¯å¼•ç”¨ç±»å‹æ•°æ®ï¼Œå¦‚æœä¿®æ”¹å°±ç›´æ¥ä¿®æ”¹å•¦ï¼Œä¸éœ€è¦è·å–ä¸Šä¸€ä¸ªé¡µé¢çš„å®ä¾‹ï¼Œç„¶åå†å»å†™ä¸€å¤§æ‘ä»£ç ~<br>eg:</p><pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> pages <span class="token operator">=</span> <span class="token function">getCurrentPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> lastPage <span class="token operator">=</span> pages<span class="token punctuation">[</span>pages<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>lastPage<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ä¸€å¯¹æ¯”ï¼Œæ˜æ˜¾ä¼˜é›…å¤ªå¤šå¤ªå¤šäº†ã€‚</p><h2 id="è­¦å‘Š"><a href="#è­¦å‘Š" class="headerlink" title="è­¦å‘Š"></a>è­¦å‘Š</h2><p>æœ¬ç¯‡åšå®¢çš„ä¸€äº›æŠ€æ³•ï¼Œéƒ½ä¸æ˜¯å¸¸è§„ä¸šåŠ¡å®ç°åŠæ³•ï¼Œè´£ä»»è‡ªè´Ÿã€‚<br>å°ç¨‹åºçš„è¿™äº›éå…¬å…±æ–¹æ³•ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæœ€å¥½èƒ½åšä¸€å±‚ polyfillï¼Œé˜²æ­¢æŸäº›ç¯å¢ƒæŸäº›æ–¹æ³•ä¸å­˜åœ¨ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li><a href="https://doingsth.github.io/yongqiang.shen/js/wxapp/" target="_blank" rel="noopener">æ•™ä½ åšä¸€ä¸ªå°ç¨‹åºæ¡†æ¶ - yongqiang.shen</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°è£…å°ç¨‹åºåˆ†é¡µç»„ä»¶ waterflow-list</title>
      <link href="/2021/04/18/front-end/mini-waterflow-list/"/>
      <url>/2021/04/18/front-end/mini-waterflow-list/</url>
      
        <content type="html"><![CDATA[<p>å°ç¨‹åºå¼€å‘ä¸­ï¼Œåˆ—è¡¨åˆ†é¡µç»„ä»¶æ˜¯æ¯”è¾ƒå¸¸è§çš„éœ€æ±‚ï¼Œæ¯æ¬¡éƒ½è¦å†™ totalNumã€pageSizeã€loading çŠ¶æ€ç­‰ï¼Œå†™å¾—å¤šäº†ï¼Œå§‹ç»ˆè§‰å¾—å¾ˆéº»çƒ¦ï¼ŒèŒç”Ÿäº†å°è£…ä¸€ä¸ªå®¹å™¨ç»„ä»¶çš„å¿µå¤´ã€‚</p><h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><ol><li>å°è£…åˆ—è¡¨åˆ†é¡µç»„ä»¶ï¼ŒåŒ…å«åŠ è½½çŠ¶æ€</li><li>å°½é‡å°‘çš„æš´éœ²æ¥å£ï¼Œå‡å°‘å¯é…ç½®é¡¹</li><li>æ¥å£å°½é‡å°‘çš„åŒæ—¶ï¼Œæä¾›å¿…è¦çš„æ•°æ®é‡ç½®æ–¹å¼ï¼Œæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨æ—¶å€™ï¼Œç¨€å¥‡å¤æ€ªçš„éœ€æ±‚</li></ol><h2 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h2><h3 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h3><p><a href="https://opendocs.alipay.com/mini/framework/component-ref" target="_blank" rel="noopener">ref è·å–ç»„ä»¶å®ä¾‹ - æ”¯ä»˜å®å¼€æ”¾å¹³å°</a><br>å’Œvueä¸­æ¦‚å¿µåŸºæœ¬ä¸€è‡´ï¼Œå¯ä»¥é€šè¿‡ ref è·å–å®ä¾‹çš„å±æ€§ï¼Œä»è€Œä¿®æ”¹ç»„ä»¶æ•°æ®çš„çŠ¶æ€ã€‚</p><h3 id="slot"><a href="#slot" class="headerlink" title="slot"></a>slot</h3><p><a href="https://opendocs.alipay.com/mini/framework/component-template" target="_blank" rel="noopener">ç»„ä»¶æ¨¡æ¿å’Œæ ·å¼ - æ”¯ä»˜å®å¼€æ”¾å¹³å°</a><br>ä¸€èˆ¬ slot æˆ‘ä»¬åªæ˜¯ä½¿ç”¨æ’å…¥æ•°æ®ï¼Œå¾ˆå°‘é€šè¿‡ slot è·å–å†…éƒ¨æ•°æ®ã€‚åœ¨æ”¯ä»˜å®å°ç¨‹åºä¸­å¯ä»¥é€šè¿‡ä½œç”¨åŸŸæ’æ§½ slot-scope ï¼Œå®ç°å¤–éƒ¨å¯¹å†…éƒ¨çš„æ•°æ®è®¿é—®ã€‚</p><h2 id="ç»„ä»¶å®ç°"><a href="#ç»„ä»¶å®ç°" class="headerlink" title="ç»„ä»¶å®ç°"></a>ç»„ä»¶å®ç°</h2><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token attr-name">list</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{{list}}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>empty<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">a:</span>if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{{init &amp;&amp; !totalNum}}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>æš‚æ— æ•°æ®<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>loading<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">a:</span>if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{{init &amp;&amp; !finished}}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>loading<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>åŠ è½½ä¸­...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>finished<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">a:</span>if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{{ totalNum &amp;&amp; finished}}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>finished<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>line<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ²¡æœ‰æ›´å¤šäº†<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>line<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></code></pre><pre class=" language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'herbjs'</span><span class="token punctuation">;</span><span class="token keyword">interface</span> <span class="token class-name">IComponentData</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">interface</span> <span class="token class-name">IComponentProps</span> <span class="token punctuation">{</span>  <span class="token function">onGetData</span><span class="token punctuation">(</span>currentPage<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> pageSize<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>  pageSize<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">interface</span> <span class="token class-name">IComponentMethods</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">interface</span> <span class="token class-name">IData</span> <span class="token punctuation">{</span>  list<span class="token punctuation">:</span> <span class="token keyword">Array</span><span class="token operator">&lt;</span><span class="token keyword">any</span><span class="token operator">></span><span class="token punctuation">;</span>  totalNum<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/** * Generics * @example *    Component&lt;Data, Props, Methods, PageStore, AppStore> */</span>Component<span class="token operator">&lt;</span>IComponentData<span class="token punctuation">,</span> IComponentProps<span class="token punctuation">,</span> IComponentMethods<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">{</span>  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>    list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    currentPage<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// ç°åœ¨é¡µé¢</span>    totalNum<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// æ€»æ¡æ•°</span>    totalPage<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// æ€»é¡µæ•°</span>    init<span class="token punctuation">:</span> <span class="token keyword">false</span><span class="token punctuation">,</span>    finished<span class="token punctuation">:</span> <span class="token keyword">false</span><span class="token punctuation">,</span>    loadingFlag<span class="token punctuation">:</span> <span class="token keyword">false</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  props<span class="token punctuation">:</span> <span class="token punctuation">{</span>    onGetData<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    pageSize<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">didMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">didUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>    <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> <span class="token punctuation">{</span> currentPage<span class="token punctuation">,</span> finished<span class="token punctuation">,</span> loadingFlag <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>finished <span class="token operator">||</span> loadingFlag<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        loadingFlag<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onGetData</span><span class="token punctuation">(</span><span class="token operator">++</span>currentPage<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>pageSize<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">:</span> IData<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">const</span> totalPage <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>totalNum <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>currentPage <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>            currentPage<span class="token punctuation">,</span>            list<span class="token punctuation">:</span> res<span class="token punctuation">.</span>list<span class="token punctuation">,</span>            init<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span>            totalPage<span class="token punctuation">,</span>            totalNum<span class="token punctuation">:</span> res<span class="token punctuation">.</span>totalNum<span class="token punctuation">,</span>            loadingFlag<span class="token punctuation">:</span> <span class="token keyword">false</span><span class="token punctuation">,</span>            finished<span class="token punctuation">:</span>              totalPage <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token punctuation">(</span>totalPage <span class="token operator">&amp;&amp;</span> currentPage <span class="token operator">===</span> totalPage<span class="token punctuation">)</span><span class="token punctuation">,</span>          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>            loadingFlag<span class="token punctuation">:</span> <span class="token keyword">false</span><span class="token punctuation">,</span>            currentPage<span class="token punctuation">,</span>            finished<span class="token punctuation">:</span> totalPage <span class="token operator">&amp;&amp;</span> currentPage <span class="token operator">===</span> totalPage<span class="token punctuation">,</span>            list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">,</span> <span class="token operator">...</span>res<span class="token punctuation">.</span>list<span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å¯¹å¤–éƒ¨æš´éœ²çš„æ¥å£</p><table><thead><tr><th>æ¥å£</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>slot name:item list</td><td>éœ€è¦å¾ªç¯çš„ list æ•°æ®</td></tr><tr><td>slot name:loading</td><td>ä¿®æ”¹loadingæ ·å¼</td></tr><tr><td>slot name:finished</td><td>ä¿®æ”¹ finished æ ·å¼</td></tr><tr><td>props onGetData</td><td>è·å–å¤–éƒ¨æ•°æ®</td></tr><tr><td>props pageSize</td><td>è·å–åˆ†é¡µå¤§å°ï¼Œé»˜è®¤ 20</td></tr><tr><td>MethodsÂ getData</td><td>è°ƒç”¨è·å–å¤–éƒ¨æ•°æ®</td></tr></tbody></table><h3 id="ä½¿ç”¨ï¼š"><a href="#ä½¿ç”¨ï¼š" class="headerlink" title="ä½¿ç”¨ï¼š"></a>ä½¿ç”¨ï¼š</h3><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>waterflow-list</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>saveComponentLoadData<span class="token punctuation">'</span></span> <span class="token attr-name">onGetData</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getListData<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token attr-name">slot-scope</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>props<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">a:</span>for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{{props.list}}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>{{item.num}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>waterflow-list</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></code></pre><pre class=" language-ts"><code class="language-ts">Page<span class="token operator">&lt;</span>IPageState<span class="token punctuation">,</span> IPageMethods<span class="token punctuation">,</span> IPageStore<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token function">onLoad</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">onReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">onShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">onHide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">onUnload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'beforeRender'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// ä¿å­˜ ref</span>  <span class="token function">saveComponentLoadData</span><span class="token punctuation">(</span>ref<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>loadDataComponent <span class="token operator">=</span> ref<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// è·å–æ•°æ®</span>  <span class="token function">getListData</span><span class="token punctuation">(</span>currentPage<span class="token punctuation">,</span> pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>      list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> num<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> num<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> num<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      totalNum<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// æ‰‹åŠ¨è§¦å‘è·å–æ•°æ®</span>  <span class="token function">addData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>loadDataComponent<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="æ ¸å¿ƒæ€æƒ³"><a href="#æ ¸å¿ƒæ€æƒ³" class="headerlink" title="æ ¸å¿ƒæ€æƒ³"></a>æ ¸å¿ƒæ€æƒ³</h3><p>é€šè¿‡è·å–ç»„ä»¶ <code>ref</code>ï¼Œ è°ƒç”¨ç»„ä»¶å†…éƒ¨çš„ <code>getData</code> æ–¹æ³•ï¼Œåå°„åˆ°ä¸»é¡µé¢çš„<code>getListData</code>å®ç°æ•°æ®è·å–ã€‚<br>åœ¨é€šè¿‡ slot çš„ slot-scope è·å–éœ€è¦å±•ç¤ºçš„ list æ•°æ®ï¼Œå¤–éƒ¨è¿›è¡Œéå†å¹¶è®¾ç½®æ ·å¼ã€‚<br>ä½•æ—¶åŠ è½½æ•°æ®ï¼Œç”±å¤–éƒ¨å®ç°å’Œå†³å®šï¼Œç»„ä»¶æœ¬èº«ä¸ä¼šä¸»åŠ¨å»è¯·æ±‚æ•°æ®ã€‚</p><h3 id="æ³¨"><a href="#æ³¨" class="headerlink" title="æ³¨"></a>æ³¨</h3><ol><li>æœ¬æ–‡å°ç¨‹åºæŒ‡çš„æ˜¯æ”¯ä»˜å®å°ç¨‹åºï¼Œå¾®ä¿¡å°ç¨‹åºå¥½åƒå¹¶æ²¡æœ‰ slot-scope åŠŸèƒ½</li><li>æ¡†æ¶ä½¿ç”¨ herbjs </li></ol><p>å®Œæ•´ä»£ç ï¼š<br><a href="https://github.com/Yaob1990/mini-alipay-example/tree/main/src/components/waterflow-list" target="_blank" rel="noopener">mini-alipay-example/src/components/waterflow-list at main Â· Yaob1990/mini-alipay-example</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯ font ä¼˜åŒ–</title>
      <link href="/2021/04/11/front-end/font/"/>
      <url>/2021/04/11/front-end/font/</url>
      
        <content type="html"><![CDATA[<p>å¼€å‘ä¸­ï¼Œä¸€èˆ¬ç›´æ¥å¼•å…¥å­—ä½“ï¼Œä½¿ç”¨å³å¯ï¼Œä¼¼ä¹å­—ä½“æœ¬èº«å¹¶æ²¡æœ‰å¾ˆå¤šå¯ä»¥è¯´é“çš„åœ°æ–¹ï¼Œå…¶å®ä¸ç„¶ã€‚å­—ä½“æœ¬èº«æ¶‰åŠåˆ°å°åˆ·å·¥ä¸šï¼Œæ˜¯ä¸€ä¸ªå†å²æ‚ ä¹…çš„è¡Œä¸šï¼Œcss å­—ä½“çš„å¤§éƒ¨åˆ†å±æ€§éƒ½å¯ä»¥åœ¨å°åˆ·å·¥ä¸šä¸­æ‰¾åˆ°æ˜ å°„ã€‚è¿™ç¯‡åšå®¢ï¼Œæ•´ç†å¸¸è§çš„å­—ä½“ä½¿ç”¨ç»†èŠ‚ã€‚</p><h2 id="è¡¬çº¿ä½“å’Œéè¡¬çº¿ä½“"><a href="#è¡¬çº¿ä½“å’Œéè¡¬çº¿ä½“" class="headerlink" title="è¡¬çº¿ä½“å’Œéè¡¬çº¿ä½“"></a>è¡¬çº¿ä½“å’Œéè¡¬çº¿ä½“</h2><p>è¡¬çº¿ä½“ï¼ˆè‹±è¯­ï¼šSerifï¼‰æ˜¯ä¸€ç§æœ‰è¡¬çº¿çš„å­—ä½“ï¼Œåˆç§°ä¸ºæœ‰è¡¬çº¿ä½“ã€è¡¬çº¿å­—ã€æ›²çº¿æè¾¹å­—ï¼Œä¿—ç§°ç™½ä½“å­—ï¼›è€Œä¸ä¹‹ç›¸å¯¹çš„ï¼Œæ²¡æœ‰è¡¬çº¿çš„å­—ä½“åˆ™è¢«ç§°ä¸ºæ— è¡¬çº¿ä½“ã€‚è¡¬çº¿æ˜¯å­—å½¢ç¬”ç”»çš„èµ·å§‹æ®µä¸æœ«ç«¯çš„è£…é¥°ç»†èŠ‚éƒ¨åˆ†ã€‚<br>ä¸€èˆ¬çš„ web å¼€å‘éƒ½å€¾å‘äºæ— è¡¬çº¿ä½“ï¼Œæˆ‘ä»¬åœ¨å®šä¹‰å­—ä½“æ—¶å€™ï¼Œåº”è¯¥è®¾ç½®å®Œæ•´çš„å­—ä½“å±æ€§ï¼Œè¡¬çº¿ä½“æˆ–è€…éè¡¬çº¿ä½“ç»“å°¾ã€‚</p><pre class=" language-css"><code class="language-css"><span class="token selector">// è°·æ­Œçš„å­—ä½“è®¾ç½®p </span><span class="token punctuation">{</span>   <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'Roboto'</span>,arial,sans-serif<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><img src="/images/16181269068142.jpg"></p><h2 id="å­—é‡"><a href="#å­—é‡" class="headerlink" title="å­—é‡"></a>å­—é‡</h2><h3 id="å­—é‡å’Œå­—ä½“åç§°çš„å…³ç³»"><a href="#å­—é‡å’Œå­—ä½“åç§°çš„å…³ç³»" class="headerlink" title="å­—é‡å’Œå­—ä½“åç§°çš„å…³ç³»"></a>å­—é‡å’Œå­—ä½“åç§°çš„å…³ç³»</h3><p>æˆ‘ä»¬ç»å¸¸åœ¨è®¾è®¡ç¨¿é‡çœ‹åˆ° <code>PingFangSC-Regular</code>ã€<code>PingFangSC-Medium</code>ã€<code>PingFangSC-Semibold</code> è¿™äº›å­—ä½“ï¼Œæ˜¯3ä¸ªå­—ä½“å—ï¼Œé‚£ä¹ˆè¿™äº›å­—ä½“åœ¨cssä¸­åº”è¯¥æ€ä¹ˆå†™ï¼Ÿå½“æˆç‹¬ç«‹å­—ä½“ç›´æ¥å†™ï¼Œå¥½åƒä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œä¹Ÿå¯ä»¥è§£æã€‚</p><p>ä½†æ˜¯è¿™æ ·ï¼Œä¼¼ä¹æ˜¯æœ‰ç‚¹é—®é¢˜çš„ï¼Œè¿™äº›å­—ä½“å±äºå¹³æ–¹å­—ä½“ï¼Œåªä¸è¿‡æ˜¯ä¸åŒçš„å­—é‡è€Œå·²ã€‚æˆ‘ä»¬ç›´æ¥å†™ <code>PingFangSC</code> ç„¶åè®¾ç½®å­—é‡å°±å¯ä»¥äº†ã€‚</p><p>å¦‚æœåªæ˜¯å†™ <code>PingFangSC-Medium</code>ï¼Œä¸è®¾ç½®å­—é‡ï¼Œå…¶å®ä¹Ÿæ˜¯æ— æ³•ç”Ÿæ•ˆçš„ï¼Œä¼šæ˜¾ç¤ºé»˜è®¤å­—é‡ï¼Œä¹Ÿå°±æ˜¯ <code>PingFangSC-Regular</code>ã€‚</p><p>è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦å†™ <code>PingFangSC</code> å­—ä½“ï¼Œè¿™ä¸ªå­—ä½“æ˜¯è‹¹æœç³»ç»Ÿé»˜è®¤çš„ä¸­æ–‡å­—ä½“ã€‚æ‰€ä»¥ï¼Œè®¾è®¡ç¨¿æ˜¯å¹³æ–¹å­—ä½“çš„æ—¶å€™ï¼Œç›´æ¥å†™ <code>font-weight</code> å¥½äº†ã€‚</p><h3 id="å­—ä½“åŒ…çš„ä½¿ç”¨"><a href="#å­—ä½“åŒ…çš„ä½¿ç”¨" class="headerlink" title="å­—ä½“åŒ…çš„ä½¿ç”¨"></a>å­—ä½“åŒ…çš„ä½¿ç”¨</h3><blockquote><p>NotoSansSC å­—ä½“<br>NotoSansSC-Thin.otf<br>NotoSansSC-Light.otf<br>NotoSansSC-Regular.otf<br>NotoSansSC-Medium.otf<br>NotoSansSC-Bold.otf<br>NotoSansSC-Black.otf</p></blockquote><p>ç°ä»£å­—ä½“å¾€å¾€ä¼šæä¾›å¤šç§è‡ªé‡ï¼Œç›¸å¯¹äºä»¥å¾€çš„ css bolder ä¼šæ›´åŠ çš„ç²¾ç»†ï¼Œå†™æ³•å¦‚ä¸‹ï¼š</p><pre class=" language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'Noto Sans SC'</span><span class="token punctuation">;</span>    <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">;</span>    <span class="token property">src</span><span class="token punctuation">:</span><span class="token string">'./NotoSansSC-Thin.otf'</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'Noto Sans SC'</span><span class="token punctuation">;</span>    <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">;</span>    <span class="token property">src</span><span class="token punctuation">:</span><span class="token string">'./NotoSansSC-Light.otf'</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'Noto Sans SC'</span><span class="token punctuation">;</span>    <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> <span class="token number">400</span><span class="token punctuation">;</span>    <span class="token property">src</span><span class="token punctuation">:</span><span class="token string">'./NotoSansSC-Regular.otf'</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'Noto Sans SC'</span><span class="token punctuation">;</span>    <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> <span class="token number">500</span><span class="token punctuation">;</span>    <span class="token property">src</span><span class="token punctuation">:</span><span class="token string">'./NotoSansSC-Medium.otf'</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'Noto Sans SC'</span><span class="token punctuation">;</span>    <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> <span class="token number">700</span><span class="token punctuation">;</span>    <span class="token property">src</span><span class="token punctuation">:</span><span class="token string">'./NotoSansSC-Bold.otf'</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'Noto Sans SC'</span><span class="token punctuation">;</span>    <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> <span class="token number">900</span><span class="token punctuation">;</span>    <span class="token property">src</span><span class="token punctuation">:</span><span class="token string">'./NotoSansSC-Black.otf'</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>ä½¿ç”¨ï¼š</p><pre class=" language-css"><code class="language-css"><span class="token selector">p </span><span class="token punctuation">{</span>    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'Noto Sans SC'</span>, sans-serif<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> <span class="token number">900</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="å¸¸è§è®¡ç¨¿å­—ä½“å¯¹åº”å­—é‡font-weight"><a href="#å¸¸è§è®¡ç¨¿å­—ä½“å¯¹åº”å­—é‡font-weight" class="headerlink" title="å¸¸è§è®¡ç¨¿å­—ä½“å¯¹åº”å­—é‡font-weight"></a>å¸¸è§è®¡ç¨¿å­—ä½“å¯¹åº”å­—é‡font-weight</h3><ul><li>100 - Thin</li><li>200 - Extra Light (Ultra Light)</li><li>300 - Light</li><li>400 - Regular (Normalã€Bookã€Roman)</li><li>500 - Medium</li><li>600 - Semi Bold (Demi Bold)</li><li>700 - Bold</li><li>800 - Extra Bold (Ultra Bold)</li><li>900 - Black (Heavy)</li></ul><h2 id="å­—ä½“è£åˆ‡"><a href="#å­—ä½“è£åˆ‡" class="headerlink" title="å­—ä½“è£åˆ‡"></a>å­—ä½“è£åˆ‡</h2><p>å› ä¸ºä¸­æ–‡å­—ä½“éƒ½æ¯”è¾ƒå¤§ï¼Œä¸€èˆ¬éƒ½éœ€è¦ä½¿ç”¨webfontç­‰æ–¹å¼ç¼©å°å­—ä½“å¤§å°ã€‚</p><h3 id="å­—è››"><a href="#å­—è››" class="headerlink" title="å­—è››"></a>å­—è››</h3><p>å­—è››çš„ä½¿ç”¨é™åˆ¶ï¼š</p><ol><li>é™æ€æ¸²æŸ“å†…å®¹</li><li>å­—ä½“å¿…é¡»æ˜¯ ttf ç±»å‹</li></ol><p>å­—ä½“å¯ä»¥ç†è§£æˆæ˜¯ä¸€ç§å›¾ç‰‡ï¼Œè£åˆ‡ï¼Œä¿ç•™éœ€è¦ç”¨åˆ°çš„å­—ç¬¦ã€‚<br>ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼ŒæŠŠéœ€è¦ç”¨åˆ°çš„ä¸­æ–‡å†™åˆ° html ä¸­ï¼Œè¿è¡Œå­—è››çš„å‘½ä»¤å³å¯å¾—åˆ°éœ€è¦çš„å­—ç¬¦ã€‚</p><h3 id="google-font"><a href="#google-font" class="headerlink" title="google font"></a>google font</h3><p>è°·æ­Œå­—ä½“çš„å¼•ç”¨åœ°å€æ˜¯å¯ä»¥ä½¿ç”¨çš„ï¼š<a href="https://fonts.gstatic.com/" target="_blank" rel="noopener">ä½¿ç”¨åœ°å€</a><br><img src="/images/16181293778639.jpg"></p><p>åœ¨è°·æ­Œç½‘ç«™ä¸Šé¢é€‰æ‹©ç›¸å…³å­—ä½“ï¼Œå¼•å…¥åˆ°é¡¹ç›®ä¸­å³å¯ã€‚</p><p>åŸç†ï¼š<br>è°·æ­Œå­—ä½“æŠŠä¸­æ–‡åšäº†åˆ†åŒºå¤„ç†ï¼Œæ ¹æ®ä½¿ç”¨åˆ°çš„å­—ç¬¦ï¼ŒåŠ è½½ç›¸åº”éƒ¨åˆ†ï¼Œä½¿ç”¨çš„æ—¶å€™ä¸€èˆ¬ 20kb åŠ è½½å¤šæ¡ã€‚</p><p><img src="/images/16181294659403.jpg" alt="å­—ä½“åˆ†åŒº"></p><h3 id="è¡¥å……è®°å½•"><a href="#è¡¥å……è®°å½•" class="headerlink" title="è¡¥å……è®°å½•"></a>è¡¥å……è®°å½•</h3><p>åœ¨é¡¹ç›®é‡Œï¼Œç”¨åˆ°äº†è°·æ­Œæ€æºå­—ä½“ä¸­æ–‡å­—ä½“ï¼Œä½†æ˜¯è°·æ­Œåªæä¾›äº† otf æ ¼å¼ï¼Œå¥½ä¸å®¹æ˜“æ‰¾åˆ° ttf æ ¼å¼ï¼Œè½¬æ¢ä¹‹åï¼Œå‘ç°æŸäº›æƒ…å†µä¸‹å­—ä½“çš„è¡Œé«˜ä¸å¯¹ï¼Œå¯¼è‡´æ— æ³•å±…ä¸­ã€‚<br>è€ƒè™‘åˆ°è°·æ­Œå­—ä½“å›½å†…åŠ è½½æ…¢ï¼ŒæŠŠæ–‡æœ¬å†™å…¥htmlæ–‡ä»¶ï¼Œç„¶ååŠ è½½è°·æ­Œå­—ä½“ï¼Œåœ¨ç½‘ç»œè¯·æ±‚ä¸­è·å–å®é™…åŠ è½½çš„å­—ä½“æ–‡ä»¶ï¼Œç„¶ååŠ è½½è¿™éƒ¨åˆ†å­—ä½“ã€‚<br>å¥½éº»çƒ¦â€¦.</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://zh.wikipedia.org/wiki/%E8%A1%AC%E7%BA%BF%E4%BD%93" target="_blank" rel="noopener">è¡¬çº¿ä½“ - ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦</a></li><li><a href="https://github.com/o2team/H5Skills/issues/14" target="_blank" rel="noopener">å‰ç«¯csså­—ä½“è°ƒç ” Â· Issue #14 Â· o2team/H5Skills</a></li><li><a href="https://github.com/aui/font-spider" target="_blank" rel="noopener">aui/font-spider: Smart webfont compression and format conversion tool</a></li><li><a href="https://fonts.google.com/" target="_blank" rel="noopener">Browse Fonts - Google Fonts</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js ä¸­ setTimeout è®¡æ—¶å™¨æœ€å¤§å€¼</title>
      <link href="/2021/03/23/front-end/settimeout/"/>
      <url>/2021/03/23/front-end/settimeout/</url>
      
        <content type="html"><![CDATA[<p>é¡¹ç›®ä¸­è¸©å‘ï¼Œè®°å½•ä¸‹ã€‚<br>æ²¡æœ‰æ„è¯†åˆ° <code>setTimeout/setInterval</code> è®¡æ—¶å™¨æœ‰æœ€å¤§å€¼é—®é¢˜ã€‚</p><pre class=" language-js"><code class="language-js"><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1111</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">**</span> <span class="token number">31</span><span class="token punctuation">)</span></code></pre><p>è¿™éƒ¨åˆ†ä»£ç ï¼Œä¸ä¼šç­‰åˆ°è®¡æ—¶å™¨ç»“æŸï¼Œè€Œæ˜¯ä¼šè¢«ä¼šè¢«ç«‹å³æ‰§è¡Œã€‚</p><h2 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h2><p>setTimeout/setInterval ä½¿ç”¨ <code>int32</code> å­˜å‚¨å»¶æ—¶å‚æ•°å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´æœ€å¤§å»¶æ—¶å€¼æ˜¯ <code>2^31-1</code>(çº¦ä¸º24.85å¤©) ï¼Œè¶…è¿‡è¿™ä¸ªå€¼ä¼šè¢«ç«‹å³æ‰§è¡Œã€‚</p><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="web"><a href="#web" class="headerlink" title="web"></a>web</h3><p>åœ¨ web é¡µé¢ä¸­å¾ˆå°‘æœ‰éœ€è¦è¿™ä¹ˆå¤§å»¶æ—¶å€¼å¾—æƒ…å†µï¼Œæ ¹æ®ä¸šåŠ¡åœºæ™¯ï¼Œè¶…è¿‡1å°æ—¶ï¼Œä¸åšå®šæ—¶å™¨è®¾ç½®ï¼Œ1å°æ—¶ä»¥å†…ï¼Œåšå®šæ—¶å™¨è®¾ç½®ã€‚</p><h3 id="node"><a href="#node" class="headerlink" title="node"></a>node</h3><p>æœåŠ¡ç«¯ï¼Œç¡®å®æœ‰ç±»ä¼¼çš„æƒ…å†µï¼Œæ¯”å¦‚1æœˆä¸€æ¬¡çš„å®šæ—¶ä»»åŠ¡ã€‚å»ºè®®ä½¿ç”¨ <code>corn</code> ä»£æ›¿ <code>setTimeout</code>ï¼Œä¹Ÿä¼šæ¯” <code>setTimeout</code> æ›´åŠ å‡†ç¡®ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vuex 4.0 æºç è§£æ</title>
      <link href="/2021/03/10/front-end/vuex-4.0-source/"/>
      <url>/2021/03/10/front-end/vuex-4.0-source/</url>
      
        <content type="html"><![CDATA[<p>vuex æºç çŸ­å°ç²¾æ‚ï¼Œå¾ˆçŸ­æ—¶é—´å°±å¯ä»¥å¤§è‡´æµè§ˆä¸€éï¼Œå€¼å¾—å­¦ä¹ ã€‚åœ¨åç»­çœ‹å…¶ä»–æ¡†æ¶çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿå‘ç°å¾ˆå¤šæ¡†æ¶éƒ½æœ‰å‚è€ƒ vuexï¼ˆæ¯”å¦‚ herbjs çš„æ’ä»¶ä½“ç³»ï¼‰ã€‚</p><h2 id="çŒœæƒ³"><a href="#çŒœæƒ³" class="headerlink" title="çŒœæƒ³"></a>çŒœæƒ³</h2><ol><li>ä¸€å®šæœ‰ä¸€ä¸ªåœ°æ–¹é›†ä¸­å­˜æ”¾æ‰€æœ‰çš„æ•°æ®ï¼ˆstateï¼‰ï¼Œå¯ä»¥æŒ‚è½½åˆ° window ä¸Šé¢ï¼ˆæ±¡æŸ“å…¨å±€ï¼‰ï¼Œæˆ–è€…æŒ‚è½½åˆ° vue çš„åŸå‹ä¸Šé¢ã€‚</li><li>mutation action getter è¿™äº›æ–¹æ³•ï¼Œå…¶å®éƒ½æ˜¯è·å–æˆ–è€…ä¿®æ”¹ state çš„å€¼ï¼Œè¿™äº›æ–¹æ³•å’Œ state åˆšå¥½å¯ä»¥ç»„æˆä¸€ä¸ª ç±»ï¼ˆclassï¼‰ï¼Œç±»å°è£…å¯¹ state çŠ¶æ€çš„æ“ä½œã€‚</li></ol><h2 id="å¦‚ä½•å®‰è£…"><a href="#å¦‚ä½•å®‰è£…" class="headerlink" title="å¦‚ä½•å®‰è£…"></a>å¦‚ä½•å®‰è£…</h2><p>4.0 ç‰ˆæœ¬é€‚é…äº† composition apiï¼Œæä¾›äº†å¯¼å‡ºæ–¹æ³• createStoreï¼Œé€šè¿‡å®ƒå¯ä»¥åˆ›å»º storeã€‚<br>æºç ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">function</span> createStore <span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Store</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œåªæ˜¯ç®€å•çš„å¯¹ store è¿›è¡Œäº†ä¸€æ¬¡ new æ“ä½œï¼Œè¿”å›äº† store è¿™ä¸ªç±»ã€‚<br>è¿›ä¸€æ­¥æŸ¥çœ‹ï¼Œæˆ‘ä»¬çœ‹åˆ° install æ–¹æ³•ï¼Œé€šè¿‡æš´éœ²installæ–¹æ³•ï¼ŒæŒ‰ç…§ vue3 çš„æ’ä»¶è§„åˆ™è¿›è¡Œå®‰è£…ï¼Œä¹Ÿå°±æ˜¯æŒ‚è½½åˆ°äº† vue3 çš„åŸå‹ä¸Šé¢ã€‚</p><pre class=" language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Store</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// æš´éœ²ç»™ vue3 è¿›è¡Œå®‰è£…</span>  install <span class="token punctuation">(</span>app<span class="token punctuation">,</span> injectKey<span class="token punctuation">)</span> <span class="token punctuation">{</span>    app<span class="token punctuation">.</span><span class="token function">provide</span><span class="token punctuation">(</span>injectKey <span class="token operator">||</span> storeKey<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>    app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">.</span>$store <span class="token operator">=</span> <span class="token keyword">this</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="store-åˆå§‹åŒ–"><a href="#store-åˆå§‹åŒ–" class="headerlink" title="store åˆå§‹åŒ–"></a>store åˆå§‹åŒ–</h2><pre class=" language-js"><code class="language-js">constructor <span class="token punctuation">(</span>options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// webpack.DefinePlugin é…ç½®</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>__DEV__<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token function">assert</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> Promise <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token string">`vuex requires a Promise polyfill in this browser.`</span></span><span class="token punctuation">)</span>      <span class="token function">assert</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">Store</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token string">`store must be called with the new operator.`</span></span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">const</span> <span class="token punctuation">{</span>      plugins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token comment" spellcheck="true">//  ä¸¥æ ¼æ¨¡å¼ï¼Œä¸å…è®¸åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹å¼€å¯ï¼Œä¼šå¯¼è‡´æ€§èƒ½æŸå¤±</span>      strict <span class="token operator">=</span> <span class="token boolean">false</span>    <span class="token punctuation">}</span> <span class="token operator">=</span> options    <span class="token comment" spellcheck="true">// store internal state</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>_committing <span class="token operator">=</span> <span class="token boolean">false</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>_actions <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>_actionSubscribers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>_mutations <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>_wrappedGetters <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>_modules <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModuleCollection</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>_modulesNamespaceMap <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>_subscribers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>_makeLocalGettersCache <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">// bind commit and dispatch to self</span>    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">this</span>    <span class="token keyword">const</span> <span class="token punctuation">{</span> dispatch<span class="token punctuation">,</span> commit <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>    <span class="token comment" spellcheck="true">// ç»‘å®š dispatch æŒ‡å‘è‡ªå·±</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>dispatch <span class="token operator">=</span> <span class="token keyword">function</span> boundDispatch <span class="token punctuation">(</span>type<span class="token punctuation">,</span> payload<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> dispatch<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>store<span class="token punctuation">,</span> type<span class="token punctuation">,</span> payload<span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>commit <span class="token operator">=</span> <span class="token keyword">function</span> boundCommit <span class="token punctuation">(</span>type<span class="token punctuation">,</span> payload<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> commit<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>store<span class="token punctuation">,</span> type<span class="token punctuation">,</span> payload<span class="token punctuation">,</span> options<span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// strict mode</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>strict <span class="token operator">=</span> strict    <span class="token comment" spellcheck="true">// å®šä¹‰ æ ¹state</span>    <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_modules<span class="token punctuation">.</span>root<span class="token punctuation">.</span>state    <span class="token comment" spellcheck="true">// init root module.</span>    <span class="token comment" spellcheck="true">// this also recursively registers all sub-modules</span>    <span class="token comment" spellcheck="true">// and collects all module getters inside this._wrappedGetters</span>    <span class="token comment" spellcheck="true">// æ¨¡å—å…¥å£ï¼Œå†…éƒ¨æ³¨å†Œæ¨¡å—ï¼Œæ³¨å†Œå­æ¨¡å—</span>    <span class="token function">installModule</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> state<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_modules<span class="token punctuation">.</span>root<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">// initialize the store state, which is responsible for the reactivity</span>    <span class="token comment" spellcheck="true">// (also registers _wrappedGetters as computed properties)</span>    <span class="token comment" spellcheck="true">// åˆå§‹åŒ– state</span>    <span class="token function">resetStoreState</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> state<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">// apply plugins</span>    <span class="token comment" spellcheck="true">// ä¸€èˆ¬éƒ½æ˜¯é€šè¿‡ store.subscribe è¿›è¡Œè®¢é˜…ï¼Œåœ¨ mutation ä¹‹åæ‰§è¡Œ</span>    plugins<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>plugin <span class="token operator">=</span><span class="token operator">></span> <span class="token function">plugin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">const</span> useDevtools <span class="token operator">=</span> options<span class="token punctuation">.</span>devtools <span class="token operator">!==</span> undefined <span class="token operator">?</span> options<span class="token punctuation">.</span>devtools <span class="token punctuation">:</span> <span class="token comment" spellcheck="true">/* Vue.config.devtools */</span> <span class="token boolean">true</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>useDevtools<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token function">devtoolPlugin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span></code></pre><p>åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œå®šä¹‰äº†ä¸€ç³»åˆ—çš„å‚æ•°ï¼Œå‚æ•°å†…å®¹åŸºæœ¬éƒ½æ˜¯çº¯ç²¹ç©º objectï¼ˆObject.create(null)ï¼‰ï¼Œå¯ä»¥ç†è§£æˆåœ¨æ„é€ å‡½æ•°ä¸­ï¼Œå¯¹æ‰€æœ‰çš„ commitï¼Œdispatchç­‰è¿›è¡Œäº†ä¸€æ¬¡æ”¶é›†ï¼Œè§¦å‘æ—¶å€™ï¼Œç›´æ¥ä»è¿™è¾¹å–ã€‚<br>dispatch commitï¼Œæ˜¯å¤–ç•Œç›´æ¥è°ƒç”¨çš„å‡½æ•°ï¼Œä¸€èˆ¬ä½¿ç”¨æ–¹å¼<code>this.$store.dispatch(&#39;increment&#39;,5);</code>,ä¸ºäº†ç¡®ä¿æŒ‡å‘storeæœ¬èº«ï¼Œè¿™é‡Œç”¨ <code>call</code> åšäº†ä¸€æ¬¡ this ç»‘å®šï¼Œå¦åˆ™è¿™é‡Œå°±ä¼šæŒ‡å‘äº† <code>this</code> ä¹Ÿå°±æ˜¯ vue æœ¬èº«äº†ã€‚</p><h2 id="æ¨¡å—åŒ–"><a href="#æ¨¡å—åŒ–" class="headerlink" title="æ¨¡å—åŒ–"></a>æ¨¡å—åŒ–</h2><h2 id="commit"><a href="#commit" class="headerlink" title="commit"></a>commit</h2><pre class=" language-js"><code class="language-js">commit <span class="token punctuation">(</span>_type<span class="token punctuation">,</span> _payload<span class="token punctuation">,</span> _options<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// check object-style commit</span>    <span class="token keyword">const</span> <span class="token punctuation">{</span>      type<span class="token punctuation">,</span>      payload<span class="token punctuation">,</span>      options    <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">unifyObjectStyle</span><span class="token punctuation">(</span>_type<span class="token punctuation">,</span> _payload<span class="token punctuation">,</span> _options<span class="token punctuation">)</span>    <span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> payload <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// å–å‡ºå¯¹åº”çš„ mutations</span>    <span class="token keyword">const</span> entry <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_mutations<span class="token punctuation">[</span>type<span class="token punctuation">]</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>entry<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">// æ²¡æœ‰entryï¼Œå¼€å‘æ¨¡å¼æŠ¥é”™</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>__DEV__<span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`[vuex] unknown mutation type: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>      <span class="token keyword">return</span>    <span class="token punctuation">}</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_withCommit</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">// æ‰§è¡Œentryï¼Œè¿™é‡Œä¸ºå•¥ç”¨ foreachï¼Œä¼šå­˜åœ¨ entry æ•°ç»„çš„æƒ…å†µï¼Ÿ</span>      <span class="token comment" spellcheck="true">// æµ‹è¯•ä¹‹åï¼Œè¿™é‡Œåº”è¯¥åªæœ‰1ä¸ªæ•°ç»„å†…å®¹çš„æƒ…å†µï¼Œä¸ä¼šå‡ºç°å¤šä¸ªæ•°ç»„å…ƒç´ </span>      entry<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> commitIterator <span class="token punctuation">(</span>handler<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">handler</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span></code></pre><p>  commit éƒ¨åˆ†çœ‹èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œé€šè¿‡å‡½æ•°å‚æ•°è·å– typeã€payloadã€optionsã€ï¼Œå–å‡ºmutationï¼Œæ‰§è¡Œmutationã€‚<br>  è¿™é‡Œæœ‰ä¸ªç–‘é—®ï¼Œä¸ºä»€ä¹ˆentryæ˜¯forEachæ‰§è¡Œçš„ï¼Œè¿™é‡Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåº”è¯¥entryå†…éƒ¨åªæœ‰ä¸€ä¸ªå…ƒç´ ,[mutation]ï¼Œè¿™æ ·çš„å½¢å¼ã€‚</p><pre class=" language-js"><code class="language-js">entry<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> commitIterator <span class="token punctuation">(</span>handler<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token function">handler</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h2 id="dispatch"><a href="#dispatch" class="headerlink" title="dispatch"></a>dispatch</h2><pre class=" language-js"><code class="language-js"><span class="token function">dispatch</span><span class="token punctuation">(</span>_type<span class="token punctuation">,</span> _payload<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// check object-style dispatch</span>  <span class="token keyword">const</span> <span class="token punctuation">{</span>    type<span class="token punctuation">,</span>    payload  <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">unifyObjectStyle</span><span class="token punctuation">(</span>_type<span class="token punctuation">,</span> _payload<span class="token punctuation">)</span>  <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> payload <span class="token punctuation">}</span>  <span class="token keyword">const</span> entry <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_actions<span class="token punctuation">[</span>type<span class="token punctuation">]</span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// before</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>_actionSubscribers      <span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// shallow copy to prevent iterator invalidation if subscriber synchronously calls unsubscribe</span>      <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>sub <span class="token operator">=</span><span class="token operator">></span> sub<span class="token punctuation">.</span>before<span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>sub <span class="token operator">=</span><span class="token operator">></span> sub<span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span>action<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token punctuation">}</span>  <span class="token keyword">const</span> result <span class="token operator">=</span> entry<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span>    <span class="token operator">?</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>handler <span class="token operator">=</span><span class="token operator">></span> <span class="token function">handler</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">:</span> entry<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// dispatch æœ€ç»ˆè¿”å›çš„æ˜¯ä¸€ä¸ª promise</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    result<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token keyword">try</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// after</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>_actionSubscribers          <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>sub <span class="token operator">=</span><span class="token operator">></span> sub<span class="token punctuation">.</span>after<span class="token punctuation">)</span>          <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>sub <span class="token operator">=</span><span class="token operator">></span> sub<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span>action<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token punctuation">}</span>      <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> error <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token keyword">try</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>_actionSubscribers          <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>sub <span class="token operator">=</span><span class="token operator">></span> sub<span class="token punctuation">.</span>error<span class="token punctuation">)</span>          <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>sub <span class="token operator">=</span><span class="token operator">></span> sub<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>action<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token punctuation">}</span>      <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><p>dispatch ç›¸å¯¹ commit å°±è¦å¤æ‚çš„å¤šäº†ã€‚</p><h2 id="æ’ä»¶ä½“ç³»"><a href="#æ’ä»¶ä½“ç³»" class="headerlink" title="æ’ä»¶ä½“ç³»"></a>æ’ä»¶ä½“ç³»</h2>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æºç  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker ç®€æ˜“å…¥é—¨</title>
      <link href="/2020/12/17/ops/easy-docker/"/>
      <url>/2020/12/17/ops/easy-docker/</url>
      
        <content type="html"><![CDATA[<p><img src="/images/20180125141147_61638d31e51d85f2a5d62e04191fe55f_1.jpg" alt="é½å¤©å¤§åœ£å­™æ‚Ÿç©º"></p><blockquote><p>æ‹”ä¸€æ ¹æ¯«æ¯›ï¼Œå¹å‡ºçŒ´ä¸‡ä¸ªã€‚ä»–å«å­™æ‚Ÿç©ºï¼Œä¹Ÿå« dockerã€‚</p></blockquote><h2 id="docker-æ— æ‰€ä¸èƒ½ï¼Ÿ"><a href="#docker-æ— æ‰€ä¸èƒ½ï¼Ÿ" class="headerlink" title="docker æ— æ‰€ä¸èƒ½ï¼Ÿ"></a>docker æ— æ‰€ä¸èƒ½ï¼Ÿ</h2><ol><li>å®‰è£… wordpress</li></ol><pre class=" language-shell"><code class="language-shell">docker run --name wordpress -p 8080:80 -d wordpress</code></pre><ol start="2"><li>å®‰è£… Nextcloud ç½‘ç›˜</li></ol><pre class=" language-shell"><code class="language-shell">docker run -d -p 8080:80 nextcloud</code></pre><p>wordpress å®‰è£…ä¸­ï¼Œæˆ‘ä»¬åªçœ‹åˆ°å®‰è£…ç•Œé¢ï¼Œæ•°æ®åº“éœ€è¦é€‰æ‹©æœ¬åœ°æˆ–è€…è¿œç¨‹ã€‚Nextcloud ç½‘ç›˜å®‰è£…ä¸­ï¼Œæˆ‘ä»¬å®‰è£…å®Œæˆå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå› ä¸º Nextcloud å†…éƒ¨é»˜è®¤æºå¸¦äº† SQLite æ•°æ®åº“ï¼Œæ‰€ä»¥å®‰è£…ä¹‹åï¼Œå°±èƒ½å¤Ÿç›´æ¥ä½¿ç”¨ã€‚</p><h2 id="docker-åŸºæœ¬æ¦‚å¿µ"><a href="#docker-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="docker åŸºæœ¬æ¦‚å¿µ"></a>docker åŸºæœ¬æ¦‚å¿µ</h2><p><strong>é•œåƒï¼ˆImageï¼‰</strong>ï¼šDocker é•œåƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œé™¤äº†æä¾›å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€çš„ç¨‹åºã€åº“ã€èµ„æºã€é…ç½®ç­‰æ–‡ä»¶å¤–ï¼Œè¿˜åŒ…å«äº†ä¸€äº›ä¸ºè¿è¡Œæ—¶å‡†å¤‡çš„ä¸€äº›é…ç½®å‚æ•°ï¼ˆå¦‚åŒ¿åå·ã€ç¯å¢ƒå˜é‡ã€ç”¨æˆ·ç­‰ï¼‰ã€‚é•œåƒä¸åŒ…å«ä»»ä½•åŠ¨æ€æ•°æ®ï¼Œå…¶å†…å®¹åœ¨æ„å»ºä¹‹åä¹Ÿä¸ä¼šè¢«æ”¹å˜ã€‚</p><p><strong>å®¹å™¨ï¼ˆContainerï¼‰</strong>ï¼šé•œåƒï¼ˆImageï¼‰å’Œå®¹å™¨ï¼ˆContainerï¼‰çš„å…³ç³»ï¼Œå°±åƒæ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„ ç±» å’Œ å®ä¾‹ ä¸€æ ·ï¼Œé•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚å®¹å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰ã€‚</p><p><strong>ä»“åº“ï¼ˆeg:dockerHubï¼‰</strong>ï¼šä¸€ä¸ª Docker Registry ä¸­å¯ä»¥åŒ…å«å¤šä¸ª ä»“åº“ï¼ˆRepositoryï¼‰ï¼›æ¯ä¸ªä»“åº“å¯ä»¥åŒ…å«å¤šä¸ª æ ‡ç­¾ï¼ˆTagï¼‰ï¼›æ¯ä¸ªæ ‡ç­¾å¯¹åº”ä¸€ä¸ªé•œåƒã€‚</p><h2 id="docker-å¸¸ç”¨å‘½ä»¤"><a href="#docker-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="docker å¸¸ç”¨å‘½ä»¤"></a>docker å¸¸ç”¨å‘½ä»¤</h2><p>æ˜¾ç¤ºå¯ç”¨å®¹å™¨ï¼š</p><pre class=" language-shell"><code class="language-shell">docker images</code></pre><p>åˆ é™¤æŒ‡å®šå®¹å™¨ï¼š</p><pre class=" language-shell"><code class="language-shell">docker rmi <é•œåƒID></code></pre><p>æŸ¥çœ‹å®¹å™¨ï¼š</p><pre class=" language-shell"><code class="language-shell">docker ps</code></pre><p>æ‹‰å–å¹¶è¿è¡Œå®¹å™¨ï¼š</p><pre class=" language-shell"><code class="language-shell">docker run hello-world</code></pre><p>è¿›å…¥å®¹å™¨å†…éƒ¨ï¼Œå¹¶è¿è¡Œ bashï¼š</p><pre class=" language-shell"><code class="language-shell">docker exec -it <id/container_name>  /bin/bash</code></pre><h2 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h2><p>Dockerfile æ˜¯ä¸€ä¸ªç”¨æ¥æ„å»ºé•œåƒçš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ–‡æœ¬å†…å®¹åŒ…å«äº†ä¸€æ¡æ¡æ„å»ºé•œåƒæ‰€éœ€çš„æŒ‡ä»¤å’Œè¯´æ˜ã€‚<br>æœ‰æ—¶å€™ä¸€ä¸ªé•œåƒéœ€è¦å¾ˆå¤šå‘½ä»¤ï¼Œè¿™æ—¶å€™å¯ä»¥å†™åˆ° Dockerfile æ–‡ä»¶ä¸­ï¼Œä¸€æ¬¡æ€§æ‰§è¡Œå®Œæ¯•ã€‚<br>æˆ‘ä»¬å°è¯•å°†<a href="https://github.com/Yaob1990/OMRON_Blood_Pressure_Analyse" target="_blank" rel="noopener">æ¬§å§†é¾™è¡€å‹è®¡</a>è§£æå·¥å…·æºç ç¼–è¯‘æˆä¸€ä¸ª docker é•œåƒ</p><ol><li><p>åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»º Dockerfile æ–‡ä»¶ï¼Œå¹¶å†™ä¸Šä»¥ä¸‹å†…å®¹ã€‚</p><pre class=" language-shell"><code class="language-shell">FROM node:14.15.1-slimRUN yarn global add http-serverCOPY dist publicEXPOSE 4000CMD ["http-server","-p","4000"]</code></pre></li><li><p>ç¼–è¯‘é¡¹ç›®ï¼š<code>npm run build</code></p></li><li><p>æ‰“åŒ…é¡¹ç›®ï¼š</p><pre class=" language-shell"><code class="language-shell">docker build -t yekongbuye/omron .</code></pre></li><li><p>æ¨é€åˆ° docker hub</p><pre class=" language-shell"><code class="language-shell">docker logindocker push yekongbuye/omron</code></pre></li></ol><h2 id="docker-compose"><a href="#docker-compose" class="headerlink" title="docker-compose"></a>docker-compose</h2><p>ä¸»è¦æ˜¯å¯¹å®¹å™¨è¿›è¡Œç¼–æ’ã€‚ä¸€æ¬¡æ€§ç¼–æ’ï¼Œè¿è¡Œå¤šä¸ªå®¹å™¨ã€‚</p><ol><li><p>åˆ›å»º docker-compose.yml æ–‡ä»¶</p><pre class=" language-yml"><code class="language-yml">version: '3.3'services:  db:    image: mysql:5.7    volumes:      - db_data:/var/lib/mysql    restart: always    environment:      MYSQL_ROOT_PASSWORD: somewordpress      MYSQL_DATABASE: wordpress      MYSQL_USER: wordpress      MYSQL_PASSWORD: wordpress  wordpress:    depends_on:      - db    image: wordpress:latest    ports:      - '8000:80'    restart: always    environment:      WORDPRESS_DB_HOST: db:3306      WORDPRESS_DB_USER: wordpress      WORDPRESS_DB_PASSWORD: wordpress      WORDPRESS_DB_NAME: wordpressvolumes:  db_data: {}</code></pre></li></ol><h2 id="åˆ†å¸ƒå¼éƒ¨ç½²"><a href="#åˆ†å¸ƒå¼éƒ¨ç½²" class="headerlink" title="åˆ†å¸ƒå¼éƒ¨ç½²"></a>åˆ†å¸ƒå¼éƒ¨ç½²</h2><ul><li>swarm</li><li>kubernetesï¼ˆk8sï¼‰</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä» Tailwind çœ‹ css ä¸­çš„åŸå­åŒ–æµå˜</title>
      <link href="/2020/12/14/front-end/atomic-in-tailwindcss/"/>
      <url>/2020/12/14/front-end/atomic-in-tailwindcss/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å›ä¸åˆ°çš„è¿‡å»ï¼Œå¿˜ä¸æ‰çš„äººã€‚æŸä¸ªè·¯å£ï¼Œè½¬è§’å†æ¬¡é‡è§ï¼Œå¥¹è¿˜æ˜¯å¥¹å—ï¼Œä½ è¿˜æ˜¯ä½ å—ï¼Ÿ</p></blockquote><h2 id="ç¦…æ„èŠ±å›­"><a href="#ç¦…æ„èŠ±å›­" class="headerlink" title="ç¦…æ„èŠ±å›­"></a>ç¦…æ„èŠ±å›­</h2><p><a href="http://www.csszengarden.com/tr/zh-cn/" target="_blank" rel="noopener">ç¦…æ„èŠ±å›­</a>ï¼Œåšå‰ç«¯çš„äººæˆ–å¤šæˆ–å°‘éƒ½å¬è¯´è¿‡é¡¹ç›®ã€‚ä¸€æ ·çš„ HTML ç»“æ„ï¼Œç”¨ä¸åŒçš„ css å»è£…é¥°ï¼Œå½¢æˆæˆªç„¶ä¸åŒçš„é¡µé¢é£æ ¼ï¼Œæ¢ç´¢ css ä¹‹ç¾ã€‚<br><code>html css</code> è¿™ä¸€å¯¹æ¬¢å–œå†¤å®¶ï¼Œè°æ˜¯ä¸»ï¼Œè°æ˜¯å®¢ï¼Œä¸€ç›´æ²¡æœ‰å®šè®ºã€‚</p><h2 id="å…³æ³¨ç‚¹å³ä¸–ç•Œ"><a href="#å…³æ³¨ç‚¹å³ä¸–ç•Œ" class="headerlink" title="å…³æ³¨ç‚¹å³ä¸–ç•Œ"></a>å…³æ³¨ç‚¹å³ä¸–ç•Œ</h2><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>btn btn-primary<span class="token punctuation">'</span></span><span class="token punctuation">></span></span> // css ä¾é™„äº html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>w50 h50 black mt30<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>   // css åŸå­åŒ–</code></pre><h3 id="html-friendly"><a href="#html-friendly" class="headerlink" title="html-friendly"></a>html-friendly</h3><p>ç¬¬ä¸€è¡Œï¼Œä½¿ç”¨<code>class</code>ä¿®é¥°<code>html</code>ï¼Œä¹Ÿå°±æ˜¯html-friendlyï¼Œæ ·å¼æœåŠ¡äºç»“æ„ã€‚<code>class</code>æ¯ä¸€ä¸ªæ˜¯æœ‰å¤šä¸ª<code>css</code>å±æ€§ï¼Œè¿™æ—¶å€™çš„ä»£ç ä¹Ÿæ›´æ¥è¿‘äºæ—¥å¸¸å·¥ä½œä¸­çš„ä»£ç ï¼Œä½†æ˜¯è¿™æ ·çš„ä»£ç å¦‚æœè°ƒæ•´èµ·æ¥ï¼Œæˆ‘ä»¬ç»å¸¸æ˜¯ç›´æ¥åœ¨ç°æœ‰çš„<code>class</code>ä¸Šé¢ä¿®æ”¹ï¼Œä»£ç ä¼šè¶Šæ¥è¶Šé•¿ï¼Œé‡å¤çš„é€»è¾‘ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œå¦‚æœé¡¹ç›®ä¸€ç›´åœ¨ç»´æŠ¤ï¼Œé‚£ä¹ˆcssåŸºæœ¬ä¸Šä¼šä¸€ç›´å¢å¤§ã€‚æ¯•ç«Ÿï¼Œç»å¤§å¤šæ•°æ—¶å€™ï¼Œæˆ‘ä»¬åªåœ¨æ„åŠŸèƒ½çš„å®ç°ã€‚</p><h3 id="css-friendly"><a href="#css-friendly" class="headerlink" title="css-friendly"></a>css-friendly</h3><p>ç¬¬äºŒè¡Œä»£ç ,æ˜¯ä¸Šå¤æ—¶æœŸ css åŸå­åŒ–çš„ä»£è¡¨ï¼Œæ¨å´‡æ ·å¼çš„å¤ç”¨ã€‚<code>width:50px;height:50px;color:balck;margin-top:30px</code>ã€‚æ¯ä¸€ä¸ª<code>class</code>éƒ½ä»£è¡¨ç€ä¸€ç§ css å±æ€§ã€‚åŸå­åŒ–æœ€æ—©æ˜¯é›…è™æå‡ºæ¥çš„ï¼Œä»£è¡¨ä½œæ˜¯ACSSã€‚ACSS è¡¨ç¤ºçš„æ˜¯åŸå­åŒ– CSSï¼ˆAtomic CSSï¼‰ï¼Œæ˜¯ Yahoo æå‡ºæ¥çš„ä¸€ç§ç‹¬ç‰¹çš„ CSS ä»£ç ç»„ç»‡æ–¹å¼ï¼Œåº”ç”¨åœ¨ Yahoo é¦–é¡µå’Œå…¶ä»–äº§å“ä¸­ã€‚ACSS çš„ç‹¬ç‰¹æ€§åœ¨äºå®ƒçš„ç†å¿µä¸ä¸€èˆ¬å¼€å‘äººå‘˜çš„ç†è§£æœ‰å¾ˆå¤§çš„ä¸åŒï¼Œå¹¶æŒ‘æˆ˜äº†ä¼ ç»Ÿæ„ä¹‰ä¸Šç¼–å†™ CSS çš„æœ€ä½³å®è·µï¼Œä¹Ÿå°±æ˜¯å…³æ³¨ç‚¹åˆ†ç¦»åŸåˆ™ã€‚ACSS è®¤ä¸ºå…³æ³¨ç‚¹åˆ†ç¦»åŸåˆ™ä¼šå¯¼è‡´å†—ä½™ã€ç¹çå’Œéš¾ä»¥ç»´æŠ¤çš„ CSS ä»£ç ã€‚</p><p>ACSS çš„åŸåˆ™æ˜¯æŠŠ CSS æ ·å¼æ‰“æ•£æˆå°½å¯èƒ½å°çš„éƒ¨åˆ†ï¼Œæ¯ä¸ª CSS ç±»åªå¯¹åº”ä¸€æ¡æ ·å¼è§„åˆ™ï¼Œä»è€Œè¾¾åˆ°æœ€å¤§åŒ–çš„å¯å¤ç”¨æ€§ã€‚æ¯”å¦‚ CSS ç±» M(10px)æ‰€å¯¹åº”çš„æ ·å¼è§„åˆ™æ˜¯ margin: 10pxã€‚</p><p>å²æœˆçš„æ´—ç¤¼ï¼ŒåŸå­åŒ–ï¼Œä¼¼ä¹å·²ç»è¿›å…¥äº†å†å²çš„åƒåœ¾å †ï¼Œä¸ç®¡æ˜¯å·¥ä½œä¸­è¿˜æ˜¯å¼€æºæ¡†æ¶é‡Œï¼Œå¾ˆå°‘èƒ½çœ‹åˆ°å¤§è§„æ¨¡ä½¿ç”¨åŸå­åŒ–çš„é¡¹ç›®ï¼ˆACSS github 1.1k startï¼‰ï¼Œç›´åˆ° tailwind çš„è¯ç”Ÿã€‚</p><h2 id="è¦æœ‰å…‰"><a href="#è¦æœ‰å…‰" class="headerlink" title="è¦æœ‰å…‰"></a>è¦æœ‰å…‰</h2><p>åŸå­åŒ–è™½ç„¶ç”¨çš„å¾ˆå°‘äº†ï¼Œä½†æ˜¯ä»–çš„å½±å­ä¸€ç›´éƒ½åœ¨ï¼Œé¡¹ç›®é‡Œé¢<code>pl10 mt5</code>è¿™ç§é­”æ³•å†™æ³•ä¸€ç›´éƒ½åœ¨ã€‚<br>ç°ä»£åŒ–çš„å‰ç«¯å¼€å‘ï¼Œè¿½æ±‚è‡ªé€‚åº”ï¼Œè¯­ä¹‰åŒ–ï¼Œè¿™äº›éƒ½ä¸æ˜¯ä¼ ç»ŸåŸå­åŒ–èƒ½å¤Ÿæ‰¿æ‹…çš„ã€‚<br><a href="https://tailwindcss.com/" target="_blank" rel="noopener">tailwindcss</a>ï¼Œåº”è¿è€Œç”Ÿï¼Œæ‰›èµ·äº† css åŸå­åŒ–çš„å¤§æ——ã€‚<br>ä¸»è¦ä¼˜ç‚¹ï¼š</p><ul><li>ç€çœ¼äºç°ä»£åŒ–å‰ç«¯ï¼Œé»˜è®¤å•ä½æ˜¯ <code>rem</code> è€Œä¸æ˜¯ <code>px</code></li><li>ä¸°å¯Œçš„é¢„è®¾ï¼Œé¢„è®¾å­—ä½“å¤§å°ï¼Œä¸°å¯Œçš„é¢œè‰²</li><li>å“åº”å¼è®¾è®¡ï¼Œæä¾›ä¸€ç³»åˆ—æ–­ç‚¹åˆ¤æ–­</li><li>æ–¹ä¾¿æ‰©å±•ï¼Œæ ¹æ®ä½ çš„é¡¹ç›®éœ€è¦ï¼Œè‡ªå®šä¹‰ç›¸å…³çš„åŸå­ç±»</li><li>å…¼å®¹å„å¤§æ¡†æ¶ï¼Œå¹¶æœ‰è¯¦ç»†è¯´æ˜</li></ul><h2 id="æ˜¯éª¡å­æ˜¯é©¬"><a href="#æ˜¯éª¡å­æ˜¯é©¬" class="headerlink" title="æ˜¯éª¡å­æ˜¯é©¬"></a>æ˜¯éª¡å­æ˜¯é©¬</h2><p><a href="https://github.com/Yaob1990/OMRON_Blood_Pressure_Analyse" target="_blank" rel="noopener">æ¬§å§†é¾™è¡€å‹è®¡æ•°æ®åˆ†æ</a>ï¼Œä½¿ç”¨äº†<code>tailwindcss</code>ä½œä¸ºåŸºç¡€ã€‚<br><img src="/images/16079566659385.jpg" alt="pc"></p><p><img src="/images/16079566841086.jpg" alt="mobile"></p><p>å¤´éƒ¨çš„å“åº”å¼æ•ˆæœï¼Œä¸‹é¢æ˜¯è¿™éƒ¨åˆ†ä»£ç ï¼š</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>relative h-96<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>w-full h-96 object-cover absolute<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../assets/bg.jpg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>w-full h-96 bg-black absolute opacity-40<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>w-full h-96 absolute flex flex-col  justify-center items-center<span class="token punctuation">"</span></span>    <span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>font text-white text-center text-4xl  font-bold<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        æ¬§å§†é¾™è¡€å‹è®¡æ•°æ®(CSV)è§£æå·¥å…·      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mt-8<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>upload<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å¼€å§‹è§£ææ•°æ®<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Button</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><p>ç¥ä¸€çœ¼<code>w-full h-96 absolute flex flex-col justify-center items-center</code> è¿™ä¸€å¤§å †éƒ½æ˜¯ä»€ä¹ˆé¬¼ä¸œè¥¿â€¦</p><pre class=" language-css"><code class="language-css"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">96</span>rem<span class="token punctuation">;</span><span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span><span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span><span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span><span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span></code></pre><p>å¦‚æœä½ è§‰å¾—è¿™æ ·å†™è¿˜æ˜¯æœ‰ç‚¹éš¾çœ‹ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š</p><pre><code>&lt;div class=&#39;wrapper&#39;&gt;.wrapper{    @apply w-full h-96 absolute flex flex-col justify-center items-center}</code></pre><p>æ˜¯ä¸æ˜¯æ„Ÿè§‰å¥½é‚£ä¹ˆä¸€ç‚¹ç‚¹â€¦å‡ ä¸ªclassï¼Œå®Œæˆäº†å“åº”å¼å¸ƒå±€ï¼Œæ„Ÿè§‰è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œè€Œä¸”ä¸ç”¨æƒ³ä¸€å † class å‘½åã€‚</p><h2 id="çœŸçš„é‚£ä¹ˆå¥½ï¼Ÿ"><a href="#çœŸçš„é‚£ä¹ˆå¥½ï¼Ÿ" class="headerlink" title="çœŸçš„é‚£ä¹ˆå¥½ï¼Ÿ"></a>çœŸçš„é‚£ä¹ˆå¥½ï¼Ÿ</h2><p>åˆè§æ€»æ˜¯ç¾å¥½çš„ï¼Œç›¸å¤„æ€»æ˜¯å›°éš¾çš„ã€‚</p><ul><li>å†™pxå•ä½ï¼Œè¦ä¹ˆæ¢ç®—æˆ remï¼Œè¦ä¹ˆè‡ªå®šä¹‰å±æ€§</li><li>éœ€è¦æ–°å­¦ä¸€å † class è¯­æ³•</li><li>è¦æ€è€ƒï¼Œå¯¹å…¬å…±ç±»è¿›è¡ŒæŠ½è±¡ï¼Œå®šä¹‰ï¼Œä¸èƒ½æ— è„‘å†™</li><li>å¯¹ css æŠ€èƒ½è¦æ±‚é«˜ï¼Œåœ¨ ä¸€å †çš„åŸå­ä¸­ï¼Œå†™ä¸€ä¸ªç”¨ä¸åˆ°ï¼Œæˆ–è€…ä¸ç”Ÿæ•ˆçš„ class æ˜¯ä¸èƒ½è¢«å®¹å¿çš„</li><li>é¡¹ç›®ç»´æŠ¤æ˜¯ä¸ªç¾éš¾ï¼Œå¦‚æœæ¥æ‰‹çš„äººä¸ç†Ÿæ‚‰è¿™å¥—æ¨¡å¼ï¼Œä»–ä¼šæƒ³ä½ ä¸ªå‚»xâ€¦</li></ul><p>ä¸ªäººé¡¹ç›®ï¼Œå¤©é©¬è¡Œç©ºï¼Œæˆ‘çš„åœ°ç›˜æˆ‘åšä¸»ï¼ŒTailwind ç”¨èµ·æ¥ï¼Œå°å·§å¯äººï¼Œç”œè€Œä¸è…»ã€‚<br>å…¬å¸é¡¹ç›®ï¼Œä»£ç å†—ä½™å¹¶ä¸æ˜¯ä¸èƒ½æ¥æ”¶çš„äº‹æƒ…ï¼Œè€ƒè™‘åˆ°é¡¹ç›®ç»´æŠ¤ï¼Œæš‚ä¸æ¨èã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¼±æ°´ä¸‰åƒï¼Œåªå–ä¸€ç“¢ â€”â€” git cherry-pick</title>
      <link href="/2020/12/03/tool/git-cherry-pick/"/>
      <url>/2020/12/03/tool/git-cherry-pick/</url>
      
        <content type="html"><![CDATA[<h3 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h3><p>åŒä¸»çº¿çš„æ¨¡å¼ ABï¼Œç‹¬è‡ªæ¼”è¿›ï¼Œå­˜åœ¨ä¸€ä¸ªå…±åŒçš„ bugï¼Œåœ¨ dev ä¸Šé¢ä¿®æ”¹å¥½ bug ä¹‹åï¼Œéœ€è¦åˆå¹¶åˆ° AB ä¸­ï¼Œå¹¶ä¸” Aã€Bã€dev æ˜¯ä¸€ç›´åœ¨æ¼”è¿›çš„ï¼Œä¸èƒ½ç›´æ¥åˆå¹¶å…¥ ABã€‚</p><h3 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h3><pre class=" language-shell"><code class="language-shell">git checkout A // åˆ‡æ¢åˆ° A åˆ†æ”¯git cherry-pick C1 // æ‹£é€‰ C1 å¹¶åˆå¹¶åˆ° A åˆ†æ”¯git checkout B  // åˆ‡æ¢åˆ° B åˆ†æ”¯git cherry-pick C1  // æ‹£é€‰ C1 å¹¶åˆå¹¶åˆ° B åˆ†æ”¯</code></pre><p><code>cherry-pick</code> æ¡æ¨±æ¡ƒï¼Œè¿™åå­—å¾ˆå¯çˆ±ï¼šï¼‰ã€‚commit å°±åƒä¸€åœ°çš„æ¨±æ¡ƒï¼Œæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯å»æ¡èµ·å¤§å¤§å°å°çš„æ¨±æ¡ƒã€‚</p><pre><code>$ git cherry-pick &lt;commitHash&gt;</code></pre><p>è·å¾—éœ€è¦åˆå¹¶çš„ commit å€¼ï¼Œåˆ‡æ¢åˆ°å¾…åˆå¹¶çš„åˆ†æ”¯ï¼Œæ‰§è¡Œ <code>cherry-pick</code>ï¼Œ</p><h3 id="è¯¦ç»†å‚æ•°"><a href="#è¯¦ç»†å‚æ•°" class="headerlink" title="è¯¦ç»†å‚æ•°"></a>è¯¦ç»†å‚æ•°</h3><pre><code>--quit                      ç»ˆæ­¢åè½¬æˆ–æ‹£é€‰æ“ä½œ--continue                  ç»§ç»­åè½¬æˆ–æ‹£é€‰æ“ä½œ--abort                     å–æ¶ˆåè½¬æˆ–æ‹£é€‰æ“ä½œ--skip                      è·³è¿‡å½“å‰æäº¤å¹¶ç»§ç»­--cleanup &lt;æ¨¡å¼&gt;             è®¾ç½®å¦‚ä½•åˆ é™¤æäº¤è¯´æ˜é‡Œçš„ç©ºæ ¼å’Œ#æ³¨é‡Š-n, --no-commit             ä¸è¦è‡ªåŠ¨æäº¤-e, --edit                  ç¼–è¾‘æäº¤è¯´æ˜-s, --signoff               æ·»åŠ  Signed-off-by: ç­¾å-m, --mainline              &lt;çˆ¶ç¼–å·&gt;é€‰æ‹©ä¸»å¹²çˆ¶æäº¤ç¼–å·--rerere-autoupdate         å¦‚æœå¯èƒ½ï¼Œé‡ç”¨å†²çªè§£å†³æ›´æ–°ç´¢å¼•--strategy                  &lt;ç­–ç•¥&gt; åˆå¹¶ç­–ç•¥-X, --strategy-option       &lt;é€‰é¡¹&gt; åˆå¹¶ç­–ç•¥çš„é€‰é¡¹-S, --gpg-sign[=&lt;key-id&gt;]   GPG æäº¤ç­¾å-x                          è¿½åŠ æäº¤åç§°--ff                        å…è®¸å¿«è¿›å¼--allow-empty               ä¿ç•™åˆå§‹åŒ–çš„ç©ºæäº¤--allow-empty-message       å…è®¸æäº¤è¯´æ˜ä¸ºç©º--keep-redundant-commits    ä¿æŒå¤šä½™çš„ã€ç©ºçš„æäº¤</code></pre><h3 id="å°¾"><a href="#å°¾" class="headerlink" title="å°¾"></a>å°¾</h3><p>çº¢å°˜è¿‡å¾€ï¼Œå¼±æ°´ä¸‰åƒï¼Œåªå–ä¸€ç“¢ã€‚<br>git çš„ <code>cherry-pick</code> æ˜¯ç®€å•æ˜ç¡®çš„ï¼Œä¸ä¼šå‡ºé”™ã€‚è€Œä½ æˆ‘çš„ç”Ÿæ´»ï¼Œä»æ²¡æœ‰å¹³è¡Œå®‡å®™ï¼Œè¿™ä¸€ç“¢æ°´åˆä»ä½•è€Œå–â€¦</p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›åˆ°è¿‡å»çš„ä¸€ä¸‡ç§æ–¹å¼ â€”â€” git æ—¶å…‰æœº</title>
      <link href="/2020/12/02/tool/git-timemachine/"/>
      <url>/2020/12/02/tool/git-timemachine/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ—¶å…‰æ— æ³•å€’æµï¼Œgit å´è®©æˆ‘ä»¬æœ‰æœºä¼šä¿®æ”¹å†å²</p></blockquote><p>æŸ¥çœ‹ä¿®æ”¹å†å²ï¼Œä»£ç å›é€€æ˜¯å¼€å‘ä¸­ç»å¸¸ç”¨åˆ°çš„å‘½ä»¤ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯éå¸¸æ˜ç¡®å…¶ä¸­çš„åŒºåˆ«ã€‚è¿™ç¯‡åšå®¢å°è¯•è¯´æ¸…æ¥šå…¶ä¸­çš„åŒºåˆ«ã€‚</p><h3 id="git-checkout"><a href="#git-checkout" class="headerlink" title="git checkout"></a>git checkout</h3><pre class=" language-shell"><code class="language-shell">git checkout hotfix // åˆ‡æ¢åˆ†æ”¯git checkout abbcde // åˆ‡æ¢ commit</code></pre><p><code>checkout</code> èƒ½å¤Ÿè¿”å› commit ï¼Œç”¨äºæŸ¥çœ‹ commit ï¼Œä½†æ˜¯å¹¶ä¸èƒ½ä¿®æ”¹æˆ–è€…å›é€€ commitã€‚</p><h3 id="git-revert"><a href="#git-revert" class="headerlink" title="git revert"></a>git revert</h3><pre class=" language-shell"><code class="language-shell">git revert HEAD^ // å›é€€åˆ°ä¸Šä¸€æ¬¡çš„æäº¤</code></pre><p><code>revert</code> çš„å›é€€ä¸¥æ ¼æ¥è¯´å¹¶ä¸æ˜¯å›é€€ï¼Œä»–æ˜¯ç”¨ä¹‹å‰çš„ commit ï¼Œå¤åˆ¶ä¸€éï¼Œäº§ç”Ÿæ–°çš„ commit ï¼Œå®ç°çš„ä»£ç å›é€€ã€‚</p><h3 id="git-reset"><a href="#git-reset" class="headerlink" title="git reset"></a>git reset</h3><pre class=" language-shell"><code class="language-shell">git reset c1 // å›é€€commit,ä¿ç•™æºç åˆ°å·¥ä½œåŒºgit reset --soft c1 // å›é€€åˆ°æŸä¸ªç‰ˆæœ¬ï¼Œåªå›é€€äº†commitçš„ä¿¡æ¯ï¼Œä¸ä¼šæ¢å¤åˆ°index fileä¸€çº§ã€‚å¦‚æœè¿˜è¦æäº¤ï¼Œç›´æ¥commitå³å¯ï¼›git reset --mixed c1 // å›é€€åˆ°æŸä¸ªç‰ˆæœ¬ï¼Œå›é€€æ–‡ä»¶ä¿å­˜åœ¨å·¥ä½œåŒºä¸­ï¼Œå¹¶ä¸”æ˜¯ unstaged çŠ¶æ€ï¼Œå¦‚æœéœ€è¦æäº¤ï¼Œéœ€è¦ stagedï¼Œä¹‹åå†commitgit reset --hard c1 // å½»åº•å›é€€åˆ°æŸä¸ªç‰ˆæœ¬ï¼Œæœ¬åœ°çš„æºç ä¹Ÿä¼šå˜ä¸ºä¸Šä¸€ä¸ªç‰ˆæœ¬çš„å†…å®¹ï¼Œæ’¤é”€çš„commitä¸­æ‰€åŒ…å«çš„æ›´æ”¹è¢«å†²æ‰ï¼›</code></pre><h3 id="ä¸€ä¸‡ç§æ–¹å¼ï¼Ÿï¼Ÿ"><a href="#ä¸€ä¸‡ç§æ–¹å¼ï¼Ÿï¼Ÿ" class="headerlink" title="ä¸€ä¸‡ç§æ–¹å¼ï¼Ÿï¼Ÿ"></a>ä¸€ä¸‡ç§æ–¹å¼ï¼Ÿï¼Ÿ</h3><p>ä¸€ç”ŸäºŒäºŒç”Ÿä¸‰ä¸‰ç”Ÿä¸‡ç‰©ï¼Œæ–½ä¸»ï¼Œä¸è¦æœ‰æ‰§å¿µã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¿˜è®°è¯¥å¿˜è®°çš„ï¼Œè®°ä½è¯¥è®°ä½çš„ â€”â€” git filter-branch</title>
      <link href="/2020/12/01/tool/filter-branch/"/>
      <url>/2020/12/01/tool/filter-branch/</url>
      
        <content type="html"><![CDATA[<p>Pro git ä¸­æŠŠ <code>filter-branch</code> ç§°ä¸º <strong>æ ¸å¼¹</strong>ï¼Œè®©äººéš¾ä»¥å¿˜è®°ï¼Œä¹Ÿå……åˆ†è¯´æ˜äº†è¯¥å‘½ä»¤çš„å¨åŠ›ã€‚</p><h3 id="é—®é¢˜åœºæ™¯"><a href="#é—®é¢˜åœºæ™¯" class="headerlink" title="é—®é¢˜åœºæ™¯"></a>é—®é¢˜åœºæ™¯</h3><ol><li>åœ¨ä½ çš„å¼€æºä»“åº“ä¸­æäº¤äº†ï¼Œä¸€ä¸ªæ•°æ®åº“çš„é…ç½®æ–‡ä»¶ã€‚</li><li>åŒäº‹åœ¨ä»“åº“ä¸­æŠŠ <code>node_modules</code>ç›®å½•æäº¤åˆ°ä»“åº“ä¸­ï¼Œå¹¶ä¸”è¿™ä¸ªç›®å½•è¿˜è¢«åç»­æ›´æ–°è¿‡ã€‚</li></ol><h3 id="è§£å†³æ–¹æ¡ˆï¼š"><a href="#è§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="è§£å†³æ–¹æ¡ˆï¼š"></a>è§£å†³æ–¹æ¡ˆï¼š</h3><p>å¯ä»¥ä½¿ç”¨<code>filter-branch</code>å®ç°ä¸Šè¿°éœ€æ±‚ã€‚</p><p>ä»æ¯ä¸€ä¸ªæäº¤ç§»é™¤ä¸€ä¸ªæ–‡ä»¶ï¼š</p><pre class=" language-shell"><code class="language-shell">git filter-branch --tree-filter 'rm -f passwords.txt' HEAD</code></pre><p>ä»æ¯ä¸€ä¸ªæäº¤ç§»é™¤ä¸€ä¸ªç›®å½•ï¼š</p><pre class=" language-shell"><code class="language-shell">git filter-branch --tree-filter 'rm -rf node_modules' HEAD</code></pre><p>é™åˆ¶ç§»é™¤èŒƒå›´ï¼š</p><pre class=" language-shell"><code class="language-shell">git filter-branch --tree-filter 'rm -rf node_modules' HEAD~30..HEAD</code></pre><p>å…¨å±€ä¿®æ”¹é‚®ç®±åœ°å€ï¼š</p><pre class=" language-shell"><code class="language-shell">git filter-branch --commit-filter '    if [ "$GIT_AUTHOR_EMAIL" = "schacon@localhost" ];    then      GIT_AUTHOR_NAME="Scott Chacon";      GIT_AUTHOR_EMAIL="schacon@example.com";      git commit-tree "$@";        else        fi' HEAD</code></pre><h3 id="è¯¦ç»†å‚æ•°ï¼š"><a href="#è¯¦ç»†å‚æ•°ï¼š" class="headerlink" title="è¯¦ç»†å‚æ•°ï¼š"></a>è¯¦ç»†å‚æ•°ï¼š</h3><ul><li><p><code>--tree-filter </code>è¡¨ç¤ºä¿®æ”¹æ–‡ä»¶åˆ—è¡¨</p></li><li><p><code>--msg-filter </code>è¡¨ç¤ºä¿®æ”¹æäº¤ä¿¡æ¯ï¼ŒåŸæäº¤ä¿¡æ¯ä»æ ‡å‡†è¾“å…¥è¯»å…¥ï¼Œæ–°æäº¤ä¿¡æ¯è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡º</p></li><li><p><code>--commit-filter</code> é’ˆå¯¹æäº¤ä¿¡æ¯è¿›è¡Œä¿®æ”¹</p></li><li><p><code>--prune-empty </code>è¡¨ç¤ºå¦‚æœä¿®æ”¹åçš„æäº¤ä¸ºç©ºåˆ™æ‰”æ‰ä¸è¦ã€‚</p></li><li><p><code>-f</code>æ˜¯å¿½ç•¥å¤‡ä»½ã€‚ä¸åŠ è¿™ä¸ªé€‰é¡¹ç¬¬äºŒæ¬¡è¿è¡Œè¿™ä¸ªå‘½ä»¤æ—¶ä¼šå‡ºé”™ï¼Œæ„æ€æ˜¯ git ä¸Šæ¬¡åšäº†å¤‡ä»½ï¼Œç°åœ¨å†è¦è¿è¡Œçš„è¯å¾—å¤„ç†æ‰ä¸Šæ¬¡çš„å¤‡ä»½ã€‚</p></li><li><p><code>--all</code>æ˜¯é’ˆå¯¹æ‰€æœ‰çš„åˆ†æ”¯ã€‚</p></li></ul><pre><code>  [^ä¾äº‘ï¼šåˆæ¬¡ä½¿ç”¨ git çš„â€œæ ¸å¼¹çº§é€‰é¡¹â€ï¼šfilter-branch]: https://blog.lilydjwg.me/2011/4/22/tried-the-nuclear-option-filter-branch-of-git-the-first-time.26331.html</code></pre><pre><code>title: å¿˜è®°è¯¥å¿˜è®°çš„ï¼Œè®°ä½è¯¥è®°ä½çš„ â€”â€” git filter-branchdate: 2020-12-01 22:00:00categories: å·¥å…·tags: gitimg: ../../coverImages/git.jpgtypora-root-url: ../../images</code></pre><p>Pro git ä¸­æŠŠ <code>filter-branch</code> ç§°ä¸º <strong>æ ¸å¼¹</strong>ï¼Œè®©äººéš¾ä»¥å¿˜è®°ï¼Œä¹Ÿå……åˆ†è¯´æ˜äº†è¯¥å‘½ä»¤çš„å¨åŠ›ã€‚</p><h3 id="é—®é¢˜åœºæ™¯-1"><a href="#é—®é¢˜åœºæ™¯-1" class="headerlink" title="é—®é¢˜åœºæ™¯"></a>é—®é¢˜åœºæ™¯</h3><ol><li>åœ¨ä½ çš„å¼€æºä»“åº“ä¸­æäº¤äº†ï¼Œä¸€ä¸ªæ•°æ®åº“çš„é…ç½®æ–‡ä»¶ã€‚</li><li>åŒäº‹åœ¨ä»“åº“ä¸­æŠŠ <code>node_modules</code>ç›®å½•æäº¤åˆ°ä»“åº“ä¸­ï¼Œå¹¶ä¸”è¿™ä¸ªç›®å½•è¿˜è¢«åç»­æ›´æ–°è¿‡ã€‚</li></ol><h3 id="è§£å†³æ–¹æ¡ˆï¼š-1"><a href="#è§£å†³æ–¹æ¡ˆï¼š-1" class="headerlink" title="è§£å†³æ–¹æ¡ˆï¼š"></a>è§£å†³æ–¹æ¡ˆï¼š</h3><p>å¯ä»¥ä½¿ç”¨<code>filter-branch</code>å®ç°ä¸Šè¿°éœ€æ±‚ã€‚</p><p>ä»æ¯ä¸€ä¸ªæäº¤ç§»é™¤ä¸€ä¸ªæ–‡ä»¶ï¼š</p><pre><code>git filter-branch --tree-filter &#39;rm -f passwords.txt&#39; HEADgit filter-branch --tree-filter &#39;rm -rf node_modules&#39; HEADgit filter-branch --tree-filter &#39;rm -rf node_modules&#39; HEAD~30..HEADgit filter-branch --commit-filter &#39;    if [ &quot;$GIT_AUTHOR_EMAIL&quot; = &quot;schacon@localhost&quot; ];    then      GIT_AUTHOR_NAME=&quot;Scott Chacon&quot;;      GIT_AUTHOR_EMAIL=&quot;schacon@example.com&quot;;      git commit-tree &quot;$@&quot;;    else    fi&#39; HEAD</code></pre><ul><li><p><code>--tree-filter</code>è¡¨ç¤ºä¿®æ”¹æ–‡ä»¶åˆ—è¡¨</p></li><li><p><code>--msg-filter</code>è¡¨ç¤ºä¿®æ”¹æäº¤ä¿¡æ¯ï¼ŒåŸæäº¤ä¿¡æ¯ä»æ ‡å‡†è¾“å…¥è¯»å…¥ï¼Œæ–°æäº¤ä¿¡æ¯è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡º</p></li><li><p><code>--commit-filter</code> é’ˆå¯¹æäº¤ä¿¡æ¯è¿›è¡Œä¿®æ”¹</p></li><li><p><code>--prune-empty</code>è¡¨ç¤ºå¦‚æœä¿®æ”¹åçš„æäº¤ä¸ºç©ºåˆ™æ‰”æ‰ä¸è¦ã€‚</p></li><li><p><code>-f</code>æ˜¯å¿½ç•¥å¤‡ä»½ã€‚ä¸åŠ è¿™ä¸ªé€‰é¡¹ç¬¬äºŒæ¬¡è¿è¡Œè¿™ä¸ªå‘½ä»¤æ—¶ä¼šå‡ºé”™ï¼Œæ„æ€æ˜¯ git ä¸Šæ¬¡åšäº†å¤‡ä»½ï¼Œç°åœ¨å†è¦è¿è¡Œçš„è¯å¾—å¤„ç†æ‰ä¸Šæ¬¡çš„å¤‡ä»½ã€‚</p></li><li><p><code>--all</code>æ˜¯é’ˆå¯¹æ‰€æœ‰çš„åˆ†æ”¯ã€‚</p><p>[[<strong><a href="https://git-scm.com/docs/git-filter-branch" target="_blank" rel="noopener">https://git-scm.com/docs/git-filter-branch</a></strong>] ] å®˜æ–¹æ–‡æ¡£</p><p>[[<strong>ä¾äº‘ï¼šåˆæ¬¡ä½¿ç”¨ git çš„â€œæ ¸å¼¹çº§é€‰é¡¹â€ï¼šfilter-branch</strong>] ] <a href="https://blog.lilydjwg.me/2011/4/22/tried-the-nuclear-option-filter-branch-of-git-the-first-time.26331.html" target="_blank" rel="noopener">https://blog.lilydjwg.me/2011/4/22/tried-the-nuclear-option-filter-branch-of-git-the-first-time.26331.html</a></p></li></ul><h3 id="è¯¦ç»†å‚æ•°ï¼š-1"><a href="#è¯¦ç»†å‚æ•°ï¼š-1" class="headerlink" title="è¯¦ç»†å‚æ•°ï¼š"></a>è¯¦ç»†å‚æ•°ï¼š</h3><p>å…¨å±€ä¿®æ”¹é‚®ç®±åœ°å€ï¼š</p><p>é™åˆ¶ç§»é™¤èŒƒå›´ï¼š</p><p>ä»æ¯ä¸€ä¸ªæäº¤ç§»é™¤ä¸€ä¸ªç›®å½•ï¼š</p><pre><code>title: å¿˜è®°è¯¥å¿˜è®°çš„ï¼Œè®°ä½è¯¥è®°ä½çš„ â€”â€” git filter-branchdate: 2020-12-01 22:00:00categories: å·¥å…·tags: gitimg: ../../coverImages/git.jpgtypora-root-url: ../../images</code></pre><p>Pro git ä¸­æŠŠ <code>filter-branch</code> ç§°ä¸º <strong>æ ¸å¼¹</strong>ï¼Œè®©äººéš¾ä»¥å¿˜è®°ï¼Œä¹Ÿå……åˆ†è¯´æ˜äº†è¯¥å‘½ä»¤çš„å¨åŠ›ã€‚</p><h3 id="é—®é¢˜åœºæ™¯-2"><a href="#é—®é¢˜åœºæ™¯-2" class="headerlink" title="é—®é¢˜åœºæ™¯"></a>é—®é¢˜åœºæ™¯</h3><ol><li>åœ¨ä½ çš„å¼€æºä»“åº“ä¸­æäº¤äº†ï¼Œä¸€ä¸ªæ•°æ®åº“çš„é…ç½®æ–‡ä»¶ã€‚</li><li>åŒäº‹åœ¨ä»“åº“ä¸­æŠŠ <code>node_modules</code>ç›®å½•æäº¤åˆ°ä»“åº“ä¸­ï¼Œå¹¶ä¸”è¿™ä¸ªç›®å½•è¿˜è¢«åç»­æ›´æ–°è¿‡ã€‚</li></ol><h3 id="è§£å†³æ–¹æ¡ˆï¼š-2"><a href="#è§£å†³æ–¹æ¡ˆï¼š-2" class="headerlink" title="è§£å†³æ–¹æ¡ˆï¼š"></a>è§£å†³æ–¹æ¡ˆï¼š</h3><p>å¯ä»¥ä½¿ç”¨<code>filter-branch</code>å®ç°ä¸Šè¿°éœ€æ±‚ã€‚</p><p>ä»æ¯ä¸€ä¸ªæäº¤ç§»é™¤ä¸€ä¸ªæ–‡ä»¶ï¼š</p><pre><code>git filter-branch --tree-filter &#39;rm -f passwords.txt&#39; HEADgit filter-branch --tree-filter &#39;rm -rf node_modules&#39; HEADgit filter-branch --tree-filter &#39;rm -rf node_modules&#39; HEAD~30..HEADgit filter-branch --commit-filter &#39;    if [ &quot;$GIT_AUTHOR_EMAIL&quot; = &quot;schacon@localhost&quot; ];    then      GIT_AUTHOR_NAME=&quot;Scott Chacon&quot;;      GIT_AUTHOR_EMAIL=&quot;schacon@example.com&quot;;      git commit-tree &quot;$@&quot;;    else    fi&#39; HEAD</code></pre><ul><li><p><code>--tree-filter</code>è¡¨ç¤ºä¿®æ”¹æ–‡ä»¶åˆ—è¡¨</p></li><li><p><code>--msg-filter</code>è¡¨ç¤ºä¿®æ”¹æäº¤ä¿¡æ¯ï¼ŒåŸæäº¤ä¿¡æ¯ä»æ ‡å‡†è¾“å…¥è¯»å…¥ï¼Œæ–°æäº¤ä¿¡æ¯è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡º</p></li><li><p><code>--commit-filter</code> é’ˆå¯¹æäº¤ä¿¡æ¯è¿›è¡Œä¿®æ”¹</p></li><li><p><code>--prune-empty</code>è¡¨ç¤ºå¦‚æœä¿®æ”¹åçš„æäº¤ä¸ºç©ºåˆ™æ‰”æ‰ä¸è¦ã€‚</p></li><li><p><code>-f</code>æ˜¯å¿½ç•¥å¤‡ä»½ã€‚ä¸åŠ è¿™ä¸ªé€‰é¡¹ç¬¬äºŒæ¬¡è¿è¡Œè¿™ä¸ªå‘½ä»¤æ—¶ä¼šå‡ºé”™ï¼Œæ„æ€æ˜¯ git ä¸Šæ¬¡åšäº†å¤‡ä»½ï¼Œç°åœ¨å†è¦è¿è¡Œçš„è¯å¾—å¤„ç†æ‰ä¸Šæ¬¡çš„å¤‡ä»½ã€‚</p></li><li><p><code>--all</code>æ˜¯é’ˆå¯¹æ‰€æœ‰çš„åˆ†æ”¯ã€‚</p><p>[[<strong><a href="https://git-scm.com/docs/git-filter-branch" target="_blank" rel="noopener">https://git-scm.com/docs/git-filter-branch</a></strong>] ] å®˜æ–¹æ–‡æ¡£</p><p>[[<strong>ä¾äº‘ï¼šåˆæ¬¡ä½¿ç”¨ git çš„â€œæ ¸å¼¹çº§é€‰é¡¹â€ï¼šfilter-branch</strong>] ] <a href="https://blog.lilydjwg.me/2011/4/22/tried-the-nuclear-option-filter-branch-of-git-the-first-time.26331.html" target="_blank" rel="noopener">https://blog.lilydjwg.me/2011/4/22/tried-the-nuclear-option-filter-branch-of-git-the-first-time.26331.html</a></p></li></ul><h3 id="è¯¦ç»†å‚æ•°ï¼š-2"><a href="#è¯¦ç»†å‚æ•°ï¼š-2" class="headerlink" title="è¯¦ç»†å‚æ•°ï¼š"></a>è¯¦ç»†å‚æ•°ï¼š</h3><p>å…¨å±€ä¿®æ”¹é‚®ç®±åœ°å€ï¼š</p><p>é™åˆ¶ç§»é™¤èŒƒå›´ï¼š</p><p>ä»æ¯ä¸€ä¸ªæäº¤ç§»é™¤ä¸€ä¸ªç›®å½•ï¼š</p><pre><code>title: å¿˜è®°è¯¥å¿˜è®°çš„ï¼Œè®°ä½è¯¥è®°ä½çš„ â€”â€” git filter-branchdate: 2020-12-01 22:00:00categories: å·¥å…·tags: gitimg: ../../coverImages/git.jpgtypora-root-url: ../../images</code></pre><p>Pro git ä¸­æŠŠ <code>filter-branch</code> ç§°ä¸º <strong>æ ¸å¼¹</strong>ï¼Œè®©äººéš¾ä»¥å¿˜è®°ï¼Œä¹Ÿå……åˆ†è¯´æ˜äº†è¯¥å‘½ä»¤çš„å¨åŠ›ã€‚</p><h3 id="é—®é¢˜åœºæ™¯-3"><a href="#é—®é¢˜åœºæ™¯-3" class="headerlink" title="é—®é¢˜åœºæ™¯"></a>é—®é¢˜åœºæ™¯</h3><ol><li>åœ¨ä½ çš„å¼€æºä»“åº“ä¸­æäº¤äº†ï¼Œä¸€ä¸ªæ•°æ®åº“çš„é…ç½®æ–‡ä»¶ã€‚</li><li>åŒäº‹åœ¨ä»“åº“ä¸­æŠŠ <code>node_modules</code>ç›®å½•æäº¤åˆ°ä»“åº“ä¸­ï¼Œå¹¶ä¸”è¿™ä¸ªç›®å½•è¿˜è¢«åç»­æ›´æ–°è¿‡ã€‚</li></ol><h3 id="è§£å†³æ–¹æ¡ˆï¼š-3"><a href="#è§£å†³æ–¹æ¡ˆï¼š-3" class="headerlink" title="è§£å†³æ–¹æ¡ˆï¼š"></a>è§£å†³æ–¹æ¡ˆï¼š</h3><p>å¯ä»¥ä½¿ç”¨<code>filter-branch</code>å®ç°ä¸Šè¿°éœ€æ±‚ã€‚</p><p>ä»æ¯ä¸€ä¸ªæäº¤ç§»é™¤ä¸€ä¸ªæ–‡ä»¶ï¼š</p><pre><code>git filter-branch --tree-filter &#39;rm -f passwords.txt&#39; HEADgit filter-branch --tree-filter &#39;rm -rf node_modules&#39; HEADgit filter-branch --tree-filter &#39;rm -rf node_modules&#39; HEAD~30..HEADgit filter-branch --commit-filter &#39;    if [ &quot;$GIT_AUTHOR_EMAIL&quot; = &quot;schacon@localhost&quot; ];    then      GIT_AUTHOR_NAME=&quot;Scott Chacon&quot;;      GIT_AUTHOR_EMAIL=&quot;schacon@example.com&quot;;      git commit-tree &quot;$@&quot;;    else    fi&#39; HEAD</code></pre><ul><li><p><code>--tree-filter</code>è¡¨ç¤ºä¿®æ”¹æ–‡ä»¶åˆ—è¡¨</p></li><li><p><code>--msg-filter</code>è¡¨ç¤ºä¿®æ”¹æäº¤ä¿¡æ¯ï¼ŒåŸæäº¤ä¿¡æ¯ä»æ ‡å‡†è¾“å…¥è¯»å…¥ï¼Œæ–°æäº¤ä¿¡æ¯è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡º</p></li><li><p><code>--commit-filter</code> é’ˆå¯¹æäº¤ä¿¡æ¯è¿›è¡Œä¿®æ”¹</p></li><li><p><code>--prune-empty</code>è¡¨ç¤ºå¦‚æœä¿®æ”¹åçš„æäº¤ä¸ºç©ºåˆ™æ‰”æ‰ä¸è¦ã€‚</p></li><li><p><code>-f</code>æ˜¯å¿½ç•¥å¤‡ä»½ã€‚ä¸åŠ è¿™ä¸ªé€‰é¡¹ç¬¬äºŒæ¬¡è¿è¡Œè¿™ä¸ªå‘½ä»¤æ—¶ä¼šå‡ºé”™ï¼Œæ„æ€æ˜¯ git ä¸Šæ¬¡åšäº†å¤‡ä»½ï¼Œç°åœ¨å†è¦è¿è¡Œçš„è¯å¾—å¤„ç†æ‰ä¸Šæ¬¡çš„å¤‡ä»½ã€‚</p></li><li><p><code>--all</code>æ˜¯é’ˆå¯¹æ‰€æœ‰çš„åˆ†æ”¯ã€‚</p><p>[[[<strong><a href="https://git-scm.com/docs/git-filter-branch" target="_blank" rel="noopener">https://git-scm.com/docs/git-filter-branch</a></strong>] ] ] å®˜æ–¹æ–‡æ¡£</p><p>[[[<strong>ä¾äº‘ï¼šåˆæ¬¡ä½¿ç”¨ git çš„â€œæ ¸å¼¹çº§é€‰é¡¹â€ï¼šfilter-branch</strong>] ] ] <a href="https://blog.lilydjwg.me/2011/4/22/tried-the-nuclear-option-filter-branch-of-git-the-first-time.26331.html" target="_blank" rel="noopener">https://blog.lilydjwg.me/2011/4/22/tried-the-nuclear-option-filter-branch-of-git-the-first-time.26331.html</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é‡ç½®è¿‡å»ï¼Œé¢å‘æœªæ¥ â€”â€” git rebase</title>
      <link href="/2020/11/30/tool/git-rebase/"/>
      <url>/2020/11/30/tool/git-rebase/</url>
      
        <content type="html"><![CDATA[<blockquote><p>git rebase æ˜¯ä¸€ä¸ªå±é™©çš„æ“ä½œï¼Œå¦‚æœä¸èƒ½ç†Ÿç»ƒæŒæ¡ï¼Œè¯·ä¸è¦ä½¿ç”¨å®ƒã€‚ï¼ˆå®ƒå¹¶ä¸æ˜¯ä¸å¯æˆ–ç¼ºçš„ï¼‰</p></blockquote><p><code>git rebase</code> æ˜¯ä¸€ä¸ªå¹³å¸¸ä½¿ç”¨è¾ƒå°‘çš„ä¸€ä¸ªå‘½ä»¤ï¼Œè¿™æ¬¡å‡†å¤‡åˆ†äº« git ï¼ŒæŠŠä¸€ç³»åˆ—ä¸å¸¸ç”¨çš„ git å‘½ä»¤ï¼Œéƒ½ç†Ÿæ‚‰ä¸€ä¸‹ã€‚ç®€å•æ˜äº†ï¼Œä¸æ·±ç©¶åŸç†ï¼Œåªé¢å‘è§£å†³é—®é¢˜ã€‚</p><h3 id="åœºæ™¯ä¸€ï¼šåˆå¹¶å¤šæ¬¡æäº¤"><a href="#åœºæ™¯ä¸€ï¼šåˆå¹¶å¤šæ¬¡æäº¤" class="headerlink" title="åœºæ™¯ä¸€ï¼šåˆå¹¶å¤šæ¬¡æäº¤"></a>åœºæ™¯ä¸€ï¼šåˆå¹¶å¤šæ¬¡æäº¤</h3><p>æœ¬åœ°å¼€å‘ï¼Œå­˜åœ¨å¤šæ¬¡æäº¤è®°å½•ï¼Œéœ€è¦åˆå¹¶æäº¤ï¼Œæ–¹ä¾¿æŸ¥çœ‹ã€‚</p><pre class=" language-shell"><code class="language-shell">commit 36bf7ff90f1cf33991cc68dac8e078c3f6e14ca3 (HEAD -> master)Date:   Mon Nov 30 21:17:25 2020 +0800    add 2.txtcommit 1569f1e8dfa9bca26e0233780a43e0961209ad8cDate:   Mon Nov 30 21:17:12 2020 +0800    add 1.txt</code></pre><ol><li><p>åˆ—å‡ºæœ¬åœ°æœ€è¿‘è®°å½•</p><pre class=" language-shell"><code class="language-shell">git rebase -i HEAD~2</code></pre></li><li><p>è¿™æ—¶å€™ä¼šè¿›å…¥ <code>vi</code>æ¨¡å¼</p><pre class=" language-shell"><code class="language-shell">pick 60b798f add a bpick d39bbcd add 1.txt add 2.txt# å˜åŸº 8a749eb..d39bbcd åˆ° 8a749ebï¼ˆ2 ä¸ªæäº¤ï¼‰## å‘½ä»¤:# p, pick <æäº¤> = ä½¿ç”¨æäº¤# r, reword <æäº¤> = ä½¿ç”¨æäº¤ï¼Œä½†ä¿®æ”¹æäº¤è¯´æ˜# e, edit <æäº¤> = ä½¿ç”¨æäº¤ï¼Œè¿›å…¥ shell ä»¥ä¾¿è¿›è¡Œæäº¤ä¿®è¡¥# s, squash <æäº¤> = ä½¿ç”¨æäº¤ï¼Œä½†èåˆåˆ°å‰ä¸€ä¸ªæäº¤# f, fixup <æäº¤> = ç±»ä¼¼äº "squash"ï¼Œä½†ä¸¢å¼ƒæäº¤è¯´æ˜æ—¥å¿—# x, exec <å‘½ä»¤> = ä½¿ç”¨ shell è¿è¡Œå‘½ä»¤ï¼ˆæ­¤è¡Œå‰©ä½™éƒ¨åˆ†ï¼‰# b, break = åœ¨æ­¤å¤„åœæ­¢ï¼ˆä½¿ç”¨ 'git rebase --continue' ç»§ç»­å˜åŸºï¼‰# d, drop <æäº¤> = åˆ é™¤æäº¤# l, label <label> = ä¸ºå½“å‰ HEAD æ‰“ä¸Šæ ‡è®°# t, reset <label> = é‡ç½® HEAD åˆ°è¯¥æ ‡è®°# m, merge [-C <commit> | -c <commit>] <label> [# <oneline>]# .       åˆ›å»ºä¸€ä¸ªåˆå¹¶æäº¤ï¼Œå¹¶ä½¿ç”¨åŸå§‹çš„åˆå¹¶æäº¤è¯´æ˜ï¼ˆå¦‚æœæ²¡æœ‰æŒ‡å®š# .       åŸå§‹æäº¤ï¼Œä½¿ç”¨æ³¨é‡Šéƒ¨åˆ†çš„ oneline ä½œä¸ºæäº¤è¯´æ˜ï¼‰ã€‚ä½¿ç”¨# .       -c <æäº¤> å¯ä»¥ç¼–è¾‘æäº¤è¯´æ˜ã€‚## å¯ä»¥å¯¹è¿™äº›è¡Œé‡æ–°æ’åºï¼Œå°†ä»ä¸Šè‡³ä¸‹æ‰§è¡Œã€‚</code></pre><p>vi æ¨¡å¼ä¿®æ”¹ <code>pick</code> ä¿å­˜ä¹‹åï¼Œå°±å¯ä»¥å®ç°åˆå¹¶æäº¤è®°å½•ã€‚</p><p><strong>æ³¨æ„ï¼š</strong>ç¬¬ä¸€è¡Œ<code>pick 60b798f add a b</code>ä¸èƒ½æ˜¯<code>s</code>ï¼Œå¯ä»¥æ˜¯<code>pick</code>æˆ–è€…<code>reword</code>ã€‚åˆå¹¶å¿…é¡»æœ‰ä¸€ä¸ªåŸºç‚¹ï¼Œç¬¬ä¸€è¡Œå°±æ˜¯ä¸€ä¸ªåŸºç‚¹ï¼Œåç»­çš„å˜æ›´åˆå¹¶éƒ½å¿…é¡»æœ‰ç¬¬ä¸€è¡Œè¿™ä¸ªå¯åˆå¹¶çš„å¯¹è±¡å­˜åœ¨ã€‚</p></li><li><p>å¦‚æœé€€å‡ºäº† <code>vi</code>çª—å£ï¼Œæƒ³è¦ç»§ç»­ç¼–è¾‘ï¼š</p><pre class=" language-shell"><code class="language-shell">git rebase --edit-todo</code></pre></li></ol><h3 id="åœºæ™¯äºŒï¼šåˆ†æ”¯åˆå¹¶"><a href="#åœºæ™¯äºŒï¼šåˆ†æ”¯åˆå¹¶" class="headerlink" title="åœºæ™¯äºŒï¼šåˆ†æ”¯åˆå¹¶"></a>åœºæ™¯äºŒï¼šåˆ†æ”¯åˆå¹¶</h3><p><code>git merge</code> å’Œ <code>git rebase</code> éƒ½å¯ä»¥å®ç°åˆ†æ”¯åˆå¹¶ã€‚</p><p>git merge,åˆå¹¶ä¹‹åï¼Œå­˜åœ¨å¤šä¸ªåˆ†æ”¯çº¿ã€‚</p><p>![image-20201130215051796](/../../../../../Library/Application Support/typora-user-images/image-20201130215051796.png)</p><p>git rebase åˆå¹¶ä¹‹åï¼Œä¹Ÿå°±æ˜¯ä¸Šå›¾çš„ <code>develop add 3.txt</code>å¹¶ä¸ä¼šäº§ç”Ÿæ–°çš„åˆå¹¶è®°å½•ï¼Œè¯¦ç»†è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ol><li><p>é¦–å…ˆï¼Œ<code>git</code> ä¼šæŠŠ <code>develop</code> åˆ†æ”¯é‡Œé¢çš„æ¯ä¸ª <code>commit</code> å–æ¶ˆæ‰ï¼›</p></li><li><p>å…¶æ¬¡ï¼ŒæŠŠä¸Šé¢çš„æ“ä½œä¸´æ—¶ä¿å­˜æˆ <code>patch</code> æ–‡ä»¶ï¼Œå­˜åœ¨ <code>.git/rebase</code> ç›®å½•ä¸‹ï¼›</p></li><li><p>ç„¶åï¼ŒæŠŠ <code>develop</code> åˆ†æ”¯æ›´æ–°åˆ°æœ€æ–°çš„ <code>master</code> åˆ†æ”¯ï¼›</p></li><li><p>æœ€åï¼ŒæŠŠä¸Šé¢ä¿å­˜çš„ <code>patch</code> æ–‡ä»¶åº”ç”¨åˆ° <code>develop</code> åˆ†æ”¯ä¸Šï¼›</p><p>è¿™ä¹Ÿå°±æ˜¯ <code>git rebase</code>ä¸ºä»€ä¹ˆè¢«ç§°ä¸º **å˜åŸº **çš„åŸå› ï¼Œéšç€ä¸»åˆ†æ”¯çš„å‘å±•ï¼Œå˜åŸºæ“ä½œï¼Œåªæ˜¯åŒæ­¥äº†ä¸»åˆ†æ”¯çš„æ›´æ”¹ï¼Œåœ¨æœ€æ–°çš„ä¸»åˆ†æ”¯ä¸Šé¢è¿›è¡Œå¼€å‘ã€‚æœ‰ç‚¹ç±»ä¼¼ <code>git stash</code>, å…ˆä¿å­˜å†…å®¹ï¼Œç­‰åˆ†æ”¯åŒæ­¥ä¹‹åï¼Œå†é‡Šæ”¾å†…å®¹ã€‚</p></li></ol><h3 id="è­¦å‘Š"><a href="#è­¦å‘Š" class="headerlink" title="è­¦å‘Š"></a>è­¦å‘Š</h3><p>å› ä¸ºå˜åŸºæ“ä½œä¼šç›´æ¥ä¿®æ”¹å†å²è®°å½•ï¼Œåƒä¸‡ä¸è¦åœ¨å…¬å…±åˆ†æ”¯ä¸Šé¢ä½¿ç”¨å˜åŸºæ“ä½œï¼Œä½ åº”è¯¥åªåœ¨ä½ è‡ªå·±çš„åˆ†æ”¯ä¸Šè¿›è¡Œ<code>git rebase</code>æ“ä½œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>11 æœˆçš„ç¢ç¢å¿µ</title>
      <link href="/2020/11/29/anything/jscoder/"/>
      <url>/2020/11/29/anything/jscoder/</url>
      
        <content type="html"><![CDATA[<ol><li><p>å¯ç”¨ jscoder.com åŸŸå</p><p>ä¸€ç›´å¯¹ç°åœ¨çš„åŸŸåï¼ˆaocoding.comï¼‰ä¸æ˜¯éå¸¸æ»¡æ„ï¼Œä½†æ˜¯åˆæ²¡æœ‰åˆé€‚çš„åŸŸåã€‚æœ€è¿‘æŠŠ jscoder.com ç»­è´¹10å¹´ï¼Œé•¿æœŸä½¿ç”¨ã€‚å¸Œæœ›è‡ªå·±å¤šå¤šåŠªåŠ›ï¼Œäº§å‡ºæ–‡ç« ï¼Œä¸è´Ÿè‡ªå·±çš„ money æŠ•å…¥ã€‚</p></li><li><p>è´­å…¥ 4c8g5m æœºå™¨</p><p>å‰æœŸçš„ä¸¤å°1c2g1m å°æœºå™¨ï¼Œç»™æˆ‘å¸¦æ¥äº†ä¸å°‘çš„å¿«ä¹ï¼Œç„¶è€Œï¼Œæ€§èƒ½è¶Šæ¥è¶Šæ»¡è¶³ä¸äº†æˆ‘çš„éœ€è¦ã€‚æˆ‘æƒ³è¯•è¯•dockerï¼Œæƒ³è¯•è¯•èµ„æºæœ¬åœ°éƒ¨ç½²ï¼Œä¸èµ°cdnï¼Œè¿™äº›å°æœºå™¨éƒ½æ— æ³•æ»¡è¶³ã€‚</p><p>ç°åœ¨å°æœºå™¨ä¸Šé¢è·‘äº†1ä¸ªçˆ¬è™«ï¼Œapi æœåŠ¡ï¼Œæ¯æ¬¡sshéƒ¨ç½² node æœåŠ¡å°±éš¾å—ï¼Œè¦ç­‰å¾…å¥½ä¹…ã€‚</p><p>ç°åœ¨å¤§æœºå™¨ä¸Šï¼Œéƒ¨ç½²dockerï¼Œnode éƒ½å¾ˆå¿«ï¼Œä¸è¦æŠŠç”Ÿå‘½æµªè´¹åœ¨ç­‰å¾…ä¸Šï¼Œè¯¥æ¢å°±æ¢ï¼Œè¯¥å‡çº§å°±å‡çº§ã€‚æœºå™¨ä»·å€¼æ˜¯æœ‰é™çš„ï¼Œè€Œä½ æä¾›çš„æœåŠ¡æ˜¯æ— ä»·çš„ï¼šï¼‰</p></li><li><p>å­¦ä¹  docker</p><p>docker å¤§æ³•å¥½ï¼Œdocker å¤§æ³•å¦™ï¼Œdocker å‘±å‘±å«ã€‚</p><p>ç„¶é¹…ï¼Œéƒ¨ç½²é¡¹ç›®æ—¶å€™ï¼Œè¿˜æ˜¯é€‰æ‹©äº†å®å¡”é¢æ¿ï¼Œå®åœ¨æ˜¯å¤ªæ˜“ç”¨äº†â€¦ä¸è¦è€ƒè™‘é‚£ä¹ˆå¤šï¼Œæ— è„‘æ“ä½œï¼Œé¡¹ç›®å°±éƒ¨ç½²å¥½äº†ã€‚å¾…æˆ‘ docker å†å¥½å¥½å­¦ä¸€å­¦ï¼Œå†è€ƒè™‘ç›´æ¥æ¢æˆ docker å’¯â€¦.</p><p>k8s å®åœ¨æ˜¯å¤ªå¤æ‚äº†ï¼Œé¡¹ç›®æ­å»ºéƒ½ä¸€å †é—®é¢˜æä¸å®šï¼Œç®—å•¦ç®—å•¦ï¼Œç°åœ¨ docker-compose å·²ç»èƒ½æ»¡è¶³æˆ‘çš„éœ€æ±‚äº†ã€‚</p></li><li><p>miAxios ç»å†é¡¹ç›®è€ƒéªŒ</p><p>å°è£…çš„å°ç¨‹åºè¯·æ±‚åº“  <a href="https://github.com/Yaob1990/miniAxios#readme" target="_blank" rel="noopener">miniAxios</a>  åœ¨æ”¯ä»˜å®å°ç¨‹åºé¡¹ç›®ä¸­è¿è¡Œè‰¯å¥½ï¼Œæ²¡æœ‰ä¸¥é‡bugã€‚</p><p>request åº“çš„å°è£…ï¼Œå‚è€ƒäº† axiosï¼Œaxios ts æ•™ç¨‹ï¼Œç­‰ç­‰å†…å®¹ï¼Œå°è£…è™½ç„¶æ²¡æœ‰ä»€ä¹ˆæŠ€æœ¯å«é‡ï¼Œè‡ªå·±è¿˜æ˜¯å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ï¼ŒåŠ æ·±äº†å¯¹ ts çš„ç†è§£ã€‚</p><p>åç»­è®¡åˆ’ï¼š</p><ol><li>åŠ å¼ºå¯¹å¤šå¹³å°çš„æ”¯æŒï¼Œç›®å‰è™½ç„¶æ˜¯æ”¯æŒå¤šå¹³å°çš„ï¼Œä½†æ˜¯æˆ‘è‡ªå·±ä¹Ÿæ²¡æœ‰å®Œæ•´æµ‹è¯•è¿‡=-=ã€‚</li><li>åŠ å¼º ts ç±»å‹åˆ¤æ–­ï¼Œç›®å‰çš„ ts åœ¨ Response éƒ¨åˆ†è¿˜æ˜¯æœ‰ç‚¹é—®é¢˜ã€‚</li><li>ç»Ÿä¸€è¿”å›å‚æ•°ã€‚ç›®å‰çš„ response æ˜¯æ ¹æ®è¿”å›æŠ¥æ–‡ç›´æ¥è¿”å›ï¼Œåç»­ï¼Œä¼šå½’é›†åˆ° response çš„ data ä¸‹é¢ï¼Œç±»ä¼¼ï¼š res.config.data çš„ç»“æ„</li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç ç‚¹æ»´ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>vue3 h5 è„šæ‰‹æ¶</title>
      <link href="/2020/09/21/front-end/vue3-h5/"/>
      <url>/2020/09/21/front-end/vue3-h5/</url>
      
        <content type="html"><![CDATA[<p>vue 3 ç»ˆäºå‘å¸ƒäº†æ­£å¼ç‰ˆã€‚</p><p>ä¹ŸæŠŠè‡ªå·±ç”¨äº†å¾ˆä¹…çš„ h5 è„šæ‰‹æ¶æ›´æ–°äº†ä¸€æ³¢ï¼Œæ‰€æœ‰ä¾èµ–éƒ½å‡çº§åˆ°æœ€æ–°ï¼Œåç»­h5å¼€å‘å°±ç›´æ¥ä½¿ç”¨æœ€æ–°çš„è„šæ‰‹æ¶è¿›è¡Œå¼€å‘ã€‚</p><p>åç»­è¿˜ä¼šå¢åŠ å¤šé¡µé¢çš„è„šæ‰‹æ¶ï¼Œå¤šé¡µé¢å†™çš„çœŸçš„ä¸å¤šï¼Œä½†æ˜¯é…ç½®è¿˜æ˜¯æœ‰ç‚¹æ„æ€çš„~</p><p>æœ¬æ¬¡è„šæ‰‹æ¶ï¼ŒæŠ›å¼ƒäº†å•å…ƒæµ‹è¯•ï¼Œä¸šåŠ¡å¤ªå¤šï¼ŒçœŸçš„å†™ä¸è¿‡æ¥=-=</p><p>Node-sass æ¢æˆäº†lessï¼Œä¸å¤šè¯´ï¼Œæ‡‚å¾—è‡ªç„¶æ‡‚â€¦.</p><p>åœ°å€ï¼š<a href="https://github.com/Yaob1990/vue3-h5" target="_blank" rel="noopener">https://github.com/Yaob1990/vue3-h5</a></p><h2 id="ä¸»è¦åŠŸèƒ½"><a href="#ä¸»è¦åŠŸèƒ½" class="headerlink" title="ä¸»è¦åŠŸèƒ½"></a>ä¸»è¦åŠŸèƒ½</h2><pre><code>  1. é›†æˆæœ€æ–° `vue` å…¨å®¶æ¡¶ï¼Œä½¿ç”¨ `typescript` å¼€å‘  2. è·¯ç”±ä½¿ç”¨ hash æ¨¡å¼ï¼Œæ–¹ä¾¿éƒ¨ç½²  3. `axios` å°è£…ï¼Œæš´éœ²å¸¸ç”¨çš„ `get` `post` æ–¹æ³•  4. `axios` å°è£…ï¼Œé¿å…å¤šé‡ `loading` çš„é—®é¢˜ï¼Œå¹¶æä¾›æ¥å£é…ç½®é¡¹  5. ä½¿ç”¨ less ï¼Œæä¾›åŸºç¡€çš„`mixin`ï¼Œå¹¶ä½œä¸ºå…¨å±€cssï¼Œæ–¹ä¾¿ä½¿ç”¨  6. å¼‚æ­¥åŠ è½½ `vconsole`ï¼Œçº¿ä¸Šç¯å¢ƒï¼Œæ— éœ€æ‰‹åŠ¨å»é™¤ï¼Œä¸ä¼šæ‰“å…¥ä¸»åŒ…ï¼Œä¸ä¼šå¼•èµ·åŒ…ä½“ç§¯å¢å¤§  7. ui æ¡†æ¶é€‰æ‹© `vant`ï¼ŒæŒ‰éœ€å¼•å…¥  8. `npm run report` åˆ†ææ„å»ºåŒ…çš„å¤§å°  9. çº¿ä¸Šç‰ˆæœ¬å»é™¤ console.logï¼Œdebugger ç­‰è°ƒè¯•å†…å®¹</code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>herbjs ç®€æ˜æ•°æ®æµ</title>
      <link href="/2020/08/16/front-end/leran-herbjs/"/>
      <url>/2020/08/16/front-end/leran-herbjs/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨ä½¿ç”¨<code>herbjs</code>åšæ”¯ä»˜å®å°ç¨‹åºçš„å¼€å‘ï¼Œåœ¨ç†Ÿæ‚‰äº†å¼€å‘æ¨¡å¼ä¹‹åï¼Œè¿˜æ˜¯æŒºå¥½ç”¨çš„ã€‚</p><h3 id="å°ç¨‹åºè¿è¡Œæœºåˆ¶"><a href="#å°ç¨‹åºè¿è¡Œæœºåˆ¶" class="headerlink" title="å°ç¨‹åºè¿è¡Œæœºåˆ¶"></a>å°ç¨‹åºè¿è¡Œæœºåˆ¶</h3><p>å†™å°ç¨‹åºçš„æ„Ÿè§‰ï¼Œæ›´åƒæ˜¯åœ¨å†™ractï¼Œç„¶è€Œè¿™ä¸¤è€…çš„æœºåˆ¶æ˜¯ä¸ä¸€æ ·çš„ã€‚</p><p>å°ç¨‹åºçš„æ¡†æ¶åŒ…å«ä¸¤éƒ¨åˆ†Viewè§†å›¾å±‚(å¯èƒ½å­˜åœ¨å¤šä¸ª)ã€App Serviceé€»è¾‘å±‚(ä¸€ä¸ª)ï¼ŒViewå±‚ç”¨æ¥æ¸²æŸ“é¡µé¢ç»“æ„ï¼ŒAppServiceå±‚ç”¨æ¥é€»è¾‘å¤„ç†ã€æ•°æ®è¯·æ±‚ã€æ¥å£è°ƒç”¨ï¼Œå®ƒä»¬åœ¨ä¸¤ä¸ªçº¿ç¨‹é‡Œè¿è¡Œã€‚</p><p>è§†å›¾å±‚ä½¿ç”¨WebViewæ¸²æŸ“ï¼Œé€»è¾‘å±‚ä½¿ç”¨JSCoreè¿è¡Œã€‚</p><p>è§†å›¾å±‚å’Œé€»è¾‘å±‚é€šè¿‡ç³»ç»Ÿå±‚çš„JsBridageè¿›è¡Œé€šä¿¡ï¼Œé€»è¾‘å±‚æŠŠæ•°æ®å˜åŒ–é€šçŸ¥åˆ°è§†å›¾å±‚ï¼Œè§¦å‘è§†å›¾å±‚é¡µé¢æ›´æ–°ï¼Œè§†å›¾å±‚æŠŠè§¦å‘çš„äº‹ä»¶é€šçŸ¥åˆ°é€»è¾‘å±‚è¿›è¡Œä¸šåŠ¡å¤„ç†ã€‚</p><img src="/images/image-20200816164049483.png" alt="image-20200816164049483" style="zoom:50%;" /><p>å°ç¨‹åºçš„<code>setData</code>å¹¶ä¸æ˜¯å®æ—¶çš„ï¼Œè€Œæ˜¯éœ€è¦ä¸¤ä¸ªçº¿ç¨‹é€šè¿‡ <code>JsBridge</code> è¿›è¡Œé€šä¿¡å®Œæˆï¼Œåœ¨æ€§èƒ½ä¼˜åŒ–æ–¹é¢ï¼Œéœ€è¦è€ƒè™‘ï¼š</p><ol><li>é¿å…é¢‘ç¹çš„ <code>setData</code>ï¼Œå®¹æ˜“é€ æˆå¡é¡¿ï¼Œæ¸²æŸ“å‡ºç°å»¶è¿Ÿ</li><li>é¿å…<code>setData</code>é¢‘ç¹ä¼ é€’å¤§é‡æ•°æ®</li><li>é¿å…åå°é¡µé¢<code>setData</code>,ç”¨æˆ·æ— æ³•æ„ŸçŸ¥ï¼Œä¼šæŠ¢å å‰å°é¡µé¢çš„æ‰§è¡Œ</li></ol><h3 id="herbjs-ä¸åŸç”Ÿå¼€å‘æ¡†æ¶ç›¸æ¯”"><a href="#herbjs-ä¸åŸç”Ÿå¼€å‘æ¡†æ¶ç›¸æ¯”" class="headerlink" title="herbjs ä¸åŸç”Ÿå¼€å‘æ¡†æ¶ç›¸æ¯”"></a>herbjs ä¸åŸç”Ÿå¼€å‘æ¡†æ¶ç›¸æ¯”</h3><p>åŸç”Ÿæ¡†æ¶æ•°æ®ä»¥pageä¸ºå•ä½ï¼Œè¿›è¡Œç®¡ç†ã€‚</p><p>herbjs å¸æ”¶äº† vuex çš„ç²¾åï¼Œç»™å°ç¨‹åºå¢åŠ äº†ï¼Œå…¨å±€ storeï¼Œé¡µé¢storeï¼Œç­‰ä¸€ç³»åˆ—çš„ vuex åŠŸèƒ½ã€‚è¿˜æ”¯æŒ <code>typescript</code>,<code>æ’ä»¶ä½“ç³»</code>ç­‰åŠŸèƒ½ã€‚</p><p>åŒºåˆ«äº <code>uni-app</code>,<code>taro</code>,è¿™äº›æ¡†æ¶ï¼Œherbjs å¹¶æ²¡æœ‰ä¿®æ”¹å°ç¨‹åºæœ¬èº«çš„é€»è¾‘ï¼ŒåŸæœ‰çš„ç”Ÿå‘½å‘¨æœŸéƒ½è¿˜åœ¨ï¼ŒåŸæœ‰çš„å†™æ³•ä¹Ÿéƒ½é€‚ç”¨ï¼Œæ›´å¤šçš„å¯ä»¥çœ‹æˆæ˜¯åŸç”Ÿå°ç¨‹åºçš„å¢å¼ºç‰ˆã€‚</p><p>ä¸ªäººè§‰å¾—ï¼Œ<code>ç®€æ˜çš„æ•°æ®æµ</code>æ˜¯è¿™ä¸ªæ¡†æ¶æœ€ä¼˜é›…çš„åœ°æ–¹ï¼Œæ–¹ä¾¿å¤§é‡ vue å¼€å‘è€…å¿«é€Ÿä¸Šæ‰‹å¼€å‘ã€‚</p><p>å®˜æ–¹æ–‡æ¡£: <a href="https://www.yuque.com/herbjs/doc" target="_blank" rel="noopener">https://www.yuque.com/herbjs/doc</a></p><p>å®˜æ–¹æ–‡æ¡£ï¼Œå…¶å®è¯´çš„å·²ç»æ¯”è¾ƒæ˜ç™½äº†ï¼Œå€¼å¾—å¤šçœ‹å‡ éã€‚</p><h3 id="ç®€æ˜æ•°æ®æµ"><a href="#ç®€æ˜æ•°æ®æµ" class="headerlink" title="ç®€æ˜æ•°æ®æµ"></a>ç®€æ˜æ•°æ®æµ</h3><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/Yaob1990/leran_herbjs" target="_blank" rel="noopener">https://github.com/Yaob1990/leran_herbjs</a></p><h4 id="é¡µé¢çº§åˆ«æ•°æ®æµ"><a href="#é¡µé¢çº§åˆ«æ•°æ®æµ" class="headerlink" title="é¡µé¢çº§åˆ«æ•°æ®æµ"></a>é¡µé¢çº§åˆ«æ•°æ®æµ</h4><p>é¡µé¢ä¸­ï¼Œé€šè¿‡ <code>setData</code>æ•°æ®</p><pre class=" language-typescript"><code class="language-typescript">Page<span class="token operator">&lt;</span>IPageState<span class="token punctuation">,</span> IPageMethods<span class="token punctuation">,</span> IPageStore<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token function">onLoad</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>    num<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">plus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      num<span class="token punctuation">:</span> <span class="token operator">++</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>num<span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">minus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      num<span class="token punctuation">:</span> <span class="token operator">--</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>num<span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="ç»„ä»¶ä¸­æ•°æ®æµ"><a href="#ç»„ä»¶ä¸­æ•°æ®æµ" class="headerlink" title="ç»„ä»¶ä¸­æ•°æ®æµ"></a>ç»„ä»¶ä¸­æ•°æ®æµ</h4><p>å¤–éƒ¨ä¼ å…¥å‚æ•°ï¼Œæ³¨æ„å¦‚æœæ˜¯ç›‘å¬äº‹ä»¶å¿…é¡»æ˜¯<code>on</code>å¼€å¤´</p><pre class=" language-typescript"><code class="language-typescript">Component<span class="token operator">&lt;</span>IComponentData<span class="token punctuation">,</span> IComponentProps<span class="token punctuation">,</span> IComponentMethods<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">{</span>  mapStateToData<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>    text<span class="token punctuation">:</span> <span class="token string">'component'</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  props<span class="token punctuation">:</span> <span class="token punctuation">{</span>    onPlus<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    onMinus<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">didMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">didUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>    <span class="token function">plus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onPlus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">minus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onMinus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ç»„ä»¶ä½¿ç”¨ï¼š</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name">onPlus</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>plus<span class="token punctuation">"</span></span> <span class="token attr-name">onMinus</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>minus<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>action</span><span class="token punctuation">></span></span></code></pre><h4 id="é¡µé¢-store-æ•°æ®æµ"><a href="#é¡µé¢-store-æ•°æ®æµ" class="headerlink" title="é¡µé¢ store æ•°æ®æµ"></a>é¡µé¢ store æ•°æ®æµ</h4><pre class=" language-typescript"><code class="language-typescript">Page<span class="token operator">&lt;</span>IPageData<span class="token punctuation">,</span> IPageMethods<span class="token punctuation">,</span> IPageStore<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token function">plus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'plus'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">minus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'minus'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">multiply</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'multiplyAsync'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>store éƒ¨åˆ†</p><pre class=" language-typescript"><code class="language-typescript">Store<span class="token operator">&lt;</span>IPageState<span class="token punctuation">,</span> IPageGetters<span class="token punctuation">,</span> IPageMutations<span class="token punctuation">,</span> IPageActions<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">{</span>  state<span class="token punctuation">:</span> <span class="token punctuation">{</span>    num<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// å…¨å±€ Getter å¯ä»¥è¢« Appã€Pageã€Component éƒ½èƒ½è®¿é—®åˆ°</span>  <span class="token comment" spellcheck="true">// é¡µé¢ Getter åªèƒ½è¢«å½“å‰ Page å’Œ å½“å‰ Page å†…çš„ Component è®¿é—®åˆ°</span>  getters<span class="token punctuation">:</span> <span class="token punctuation">{</span>    desc<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> state<span class="token punctuation">,</span> getters <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token punctuation">.</span>num <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">'æ­£å€¼'</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token punctuation">.</span>num <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">'è´Ÿå€¼'</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">'é›¶'</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  mutations<span class="token punctuation">:</span> <span class="token punctuation">{</span>    <span class="token function">plus</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>      state<span class="token punctuation">.</span>num <span class="token operator">=</span> <span class="token operator">++</span>state<span class="token punctuation">.</span>num<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">minus</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>      state<span class="token punctuation">.</span>num <span class="token operator">=</span> <span class="token operator">--</span>state<span class="token punctuation">.</span>num<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">multiply</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>      state<span class="token punctuation">.</span>num <span class="token operator">=</span> state<span class="token punctuation">.</span>num <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  actions<span class="token punctuation">:</span> <span class="token punctuation">{</span>    async <span class="token function">multiplyAsync</span><span class="token punctuation">(</span><span class="token punctuation">{</span> state<span class="token punctuation">,</span> commit<span class="token punctuation">,</span> dispatch <span class="token punctuation">}</span><span class="token punctuation">,</span> payload<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>        <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'multiply'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="å…¨å±€-store"><a href="#å…¨å±€-store" class="headerlink" title="å…¨å±€ store"></a>å…¨å±€ store</h4><p>å…¨å±€ store å’Œé¡µé¢ç±»ä¼¼ï¼Œåªæ˜¯å¤šä¸€ä¸ª <code>$global</code>å‚æ•°ï¼Œè¯¦è§æ–‡æ¡£ã€‚</p><h3 id="å¼€å‘ä½“ä¼š"><a href="#å¼€å‘ä½“ä¼š" class="headerlink" title="å¼€å‘ä½“ä¼š"></a>å¼€å‘ä½“ä¼š</h3><p>å°ç¨‹åºçš„å¼€å‘æ¡†æ¶ç™¾èŠ±é½æ”¾ï¼Œuni-appï¼Œtaroï¼Œmpvueã€‚</p><p>ç„¶è€Œï¼Œè‡ªå·±ä¹Ÿåªæ˜¯åœç•™åœ¨ä¼šç”¨çš„ç¨‹åº¦ï¼Œæ²¡æœ‰å†å»æƒ³ä¸€æƒ³ä¸ºä»€ä¹ˆå¯ä»¥è¿™æ ·ç¼–è¯‘ï¼Œå†…éƒ¨çš„åŸç†ã€‚è¿™é˜¶æ®µçš„å·¥ä½œä¼°è®¡ä¼šé•¿æœŸå’Œå°ç¨‹åºæ‰“äº¤é“ï¼Œå¸Œæœ›è‡ªå·±èƒ½å¤Ÿæ·±å…¥çš„ç ”ç©¶å°ç¨‹åºçš„èƒŒåé€»è¾‘ï¼Œè€Œä¸ä»…ä»…ä¼šç”¨å°±è¡Œã€‚</p><p>é“é˜»ä¸”é•¿ï¼ŒåŒå¿—åŠ æ²¹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ”¯ä»˜å®å°ç¨‹åº,herbjs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>async await çš„ç»ˆæå°è£…</title>
      <link href="/2020/08/06/front-end/async-await/"/>
      <url>/2020/08/06/front-end/async-await/</url>
      
        <content type="html"><![CDATA[<h2 id="async-await-çš„ç»ˆæå°è£…"><a href="#async-await-çš„ç»ˆæå°è£…" class="headerlink" title="async await çš„ç»ˆæå°è£…"></a>async await çš„ç»ˆæå°è£…</h2><p>åœ¨çœ‹åŒäº‹ä»£ç æ—¶å€™ï¼Œçœ‹åˆ°ä¸‹é¢è¿™ä¸€æ®µï¼Œæœ‰ç‚¹æ„æ€ã€‚</p><pre class=" language-js"><code class="language-js"><span class="token keyword">let</span> <span class="token punctuation">[</span>res<span class="token punctuation">,</span>error<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// é”™è¯¯å¤„ç†</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// ä¸šåŠ¡å¤„ç†</span></code></pre><p>æ³¨æ„ï¼Œè¿™é‡Œä»£ç æ²¡æœ‰ä½¿ç”¨try catchï¼Œè€Œæ˜¯æŠŠé”™è¯¯å¤„ç†å°è£…æˆäº†æ•°ç»„å½¢å¼ã€‚</p><p>ç»§ç»­ï¼Œçœ‹çœ‹ä»–çš„ä»£ç æ˜¯æ€ä¹ˆå†™çš„ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">promieWapper</span><span class="token punctuation">(</span>promise<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">[</span>res<span class="token punctuation">,</span> undefined<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">[</span>undefined<span class="token punctuation">,</span> err<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>getList <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">promieWapper</span><span class="token punctuation">(</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>çœ‹èµ·æ¥ä¹Ÿä¸æ˜¯å¾ˆå¤æ‚ï¼Œå°±æ˜¯åœ¨promise å¤–é¢åœ¨å¥—ä¸€å±‚promiseï¼Œè¿”å›ç»“æœï¼Œæ”¾åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ã€‚</p><p>å¾ˆå·§å¦™çš„å®ç°äº†ï¼Œé”™è¯¯çš„å¤„ç†ï¼Œä½¿ç”¨æ—¶å€™ï¼Œç›´æ¥è¿›è¡Œæ•°ç»„çš„åˆ¤æ–­ï¼Œä¸éœ€è¦å»å†™ä¸‘é™‹çš„ try catch</p><h2 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h2><p>ä»”ç»†çœ‹ä¸€ä¸‹ä¸Šé¢çš„ä»£ç ï¼Œå…¶å®æœ‰ç‚¹å°é—®é¢˜ï¼Œå†…éƒ¨è¿”å›çš„å°±æ˜¯promiseï¼Œè¿˜æœ‰å¿…è¦å†åµŒå¥—ä¸€å±‚ promise ï¼Ÿ</p><pre class=" language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">promieWapper</span><span class="token punctuation">(</span>promise<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token punctuation">[</span>res<span class="token punctuation">,</span> undefined<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      retirn <span class="token punctuation">[</span>undefined<span class="token punctuation">,</span> err<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>è¿™æ ·å†™æ„Ÿè§‰æ›´æ¸…çˆ½ä¸€ç‚¹ï¼Œ then è¿”å›çš„éƒ¨åˆ†ä¹Ÿè¿˜æ˜¯ promiseï¼Œå¼‚å¸¸ä¹Ÿä¼šè¢« catch æ•è·åˆ°ã€‚</p><h2 id="æ·»åŠ å‡½æ•°ç±»å‹ï¼ˆtsï¼‰"><a href="#æ·»åŠ å‡½æ•°ç±»å‹ï¼ˆtsï¼‰" class="headerlink" title="æ·»åŠ å‡½æ•°ç±»å‹ï¼ˆtsï¼‰"></a>æ·»åŠ å‡½æ•°ç±»å‹ï¼ˆtsï¼‰</h2><pre class=" language-typescript"><code class="language-typescript">async <span class="token keyword">function</span> promieWapper<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> U <span class="token operator">=</span> Error<span class="token operator">></span><span class="token punctuation">(</span>promise<span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span><span class="token punctuation">[</span>U<span class="token punctuation">,</span> undefined<span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token keyword">null</span><span class="token punctuation">,</span> T<span class="token punctuation">]</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> promise<span class="token punctuation">.</span>then<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token keyword">null</span><span class="token punctuation">,</span> T<span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">null</span><span class="token punctuation">,</span> data<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token operator">&lt;</span><span class="token punctuation">[</span>U<span class="token punctuation">,</span> undefined<span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">(</span>error<span class="token punctuation">:</span> U<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span>error<span class="token punctuation">,</span> undefined<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><p>node ä¸­ä¸€èˆ¬ Error ä¼šæ”¾åœ¨ç¬¬ä¸€ä¸ªå‚æ•°ä½ç½®ï¼Œè¿™é‡Œå‚è€ƒ node ä¼˜å…ˆå¤„ç†é”™è¯¯ã€‚</p><h2 id="3å¹´å‰â€¦"><a href="#3å¹´å‰â€¦" class="headerlink" title="3å¹´å‰â€¦"></a>3å¹´å‰â€¦</h2><p>æˆ‘è§‰å¾—æˆ‘åŒäº‹ç‰›é€¼æäº†ï¼Œèƒ½æƒ³å‡ºè¿™ä¹ˆå¤©æ‰çš„æ–¹æ³•ï¼</p><p>ç›´åˆ°æˆ‘çœ‹åˆ°äº†è¿™ä¸ªåº“ï¼š<a href="https://github.com/scopsy/await-to-js" target="_blank" rel="noopener">await-to-js</a></p><p>ä¸Šé¢çš„æœ€ç»ˆå†™æ³•ï¼Œä¹Ÿæ˜¯å‚è€ƒäº†è¿™ä¸ªåº“ã€‚è¿™ä¸ªåº“ 2.3m/month çš„ä¸‹è½½é‡ï¼Œè¿˜æ˜¯3å¹´å‰å†™çš„ï¼Œå†™å¥½åŸºæœ¬æ²¡æœ‰æ›´æ–°è¿‡ï¼ŒçœŸç‰›é€¼ï¼</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> promise </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸°äº‘è¡Œapp æ¢ç´¢</title>
      <link href="/2020/06/17/front-end/fyx/"/>
      <url>/2020/06/17/front-end/fyx/</url>
      
        <content type="html"><![CDATA[<p>å¹¿æ±½ä¸°ç”°çš„é£äº‘è¡Œappï¼Œæä¾›çš„è½¦è”ç½‘åŠŸèƒ½è¿˜æ˜¯æŒºå¥½ç”¨çš„ï¼Œä½†æ˜¯åªèƒ½æä¾›è½¦è¾†çš„ä½ç½®ä¿¡æ¯ï¼Œä¸èƒ½æä¾›è¡Œé©¶è½¨è¿¹ç­‰åŠŸèƒ½ã€‚äºæ˜¯æŠ“åŒ…çœ‹äº†ä¸‹ä»–çš„åŠŸèƒ½é€»è¾‘ã€‚</p><h3 id="ç™»å½•"><a href="#ç™»å½•" class="headerlink" title="ç™»å½•"></a>ç™»å½•</h3><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// ç™»å½•åœ°å€ï¼ˆpostï¼‰ï¼š</span>https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>carapp<span class="token punctuation">.</span>gtmc<span class="token punctuation">.</span>com<span class="token punctuation">.</span>cn<span class="token operator">/</span>api<span class="token operator">/</span>appgtmc<span class="token operator">/</span>reg<span class="token operator">/</span>action<span class="token operator">/</span>AppUserInfoAction<span class="token operator">/</span>appUserLogin<span class="token punctuation">.</span>json<span class="token comment" spellcheck="true">// å‚æ•°ï¼ˆbodyï¼‰</span>accessToken<span class="token operator">=</span><span class="token operator">&amp;</span>appVersion<span class="token operator">=</span><span class="token number">4.3</span><span class="token punctuation">.</span><span class="token number">0</span><span class="token operator">&amp;</span>checkCode<span class="token operator">=</span><span class="token operator">&amp;</span>deviceId<span class="token operator">=</span><span class="token operator">&amp;</span>deviceType<span class="token operator">=</span><span class="token number">2</span><span class="token operator">&amp;</span>distinctId<span class="token operator">=</span><span class="token operator">&amp;</span>loginType<span class="token operator">=</span><span class="token number">2</span><span class="token operator">&amp;</span>password<span class="token operator">=</span><span class="token operator">&amp;</span>phoneName<span class="token operator">=</span><span class="token operator">&amp;</span>phoneNumber<span class="token operator">=</span><span class="token operator">&amp;</span>pushId<span class="token operator">=</span></code></pre><p>è¿”å›å€¼ï¼š</p><pre><code>{    &quot;data&quot;: {        &quot;jwt&quot;: &quot;&quot;,        &quot;rData&quot;: {            &quot;birthday&quot;: &quot;&quot;,            &quot;passWord&quot;: &quot;111&quot;,            &quot;communtiyFlag&quot;: &quot;0&quot;,            &quot;dealerName&quot;: &quot;&quot;,            &quot;address&quot;: &quot;&quot;,            &quot;kickOut&quot;: true,            &quot;dealerCode&quot;: &quot;&quot;,            &quot;sex&quot;: &quot;null&quot;,            &quot;resultCode&quot;: &quot;&quot;,            &quot;description&quot;: &quot;&quot;,            &quot;userId&quot;: 111,            &quot;uuid&quot;: &quot;111&quot;,            &quot;telPhone&quot;: &quot;111&quot;,            &quot;name&quot;: &quot;1&quot;,            &quot;status&quot;: &quot;0&quot;,            &quot;username&quot;: &quot;11&quot;        }    },    &quot;success&quot;: true,    &quot;resultCode&quot;: 200,    &quot;elapsedMilliseconds&quot;: 0}</code></pre><p>jwt å°±æ˜¯ç™»å½•å‡­è¯ï¼Œæœ‰äº†è¿™ä¸ªç™»å½•å‡­è¯åç»­çš„è¯·æ±‚éƒ½å¯ä»¥è¿›è¡Œé‰´æƒã€‚</p><p>è¿™é‡Œåç«¯è¿”å›äº†<code>passWord</code>å­—æ®µï¼Œä¸ªäººè§‰å¾—éå¸¸ä¸åˆé€‚ã€‚åç«¯è¦ä¹ˆæ˜¯ç›´æ¥è¿”å›çš„ç”¨æˆ·æ•°æ®ï¼Œè¦ä¹ˆå°±æ²¡æœ‰åšéå¯¹ç§°åŠ å¯†ï¼Œç›´æ¥æ•°æ®åº“è§£ç å‡ºç”¨æˆ·çš„å¯†ç å­—æ®µï¼é€šè¿‡ç½‘ç»œåŠ«æŒï¼Œå¾ˆå®¹æ˜“å°±å—…æ¢å‡ºç”¨æˆ·çš„å¯†ç äº†ã€‚</p><p>ç»™å¹¿æ±½çš„é‚®ç®±å’Œå¾®ä¿¡ååº”è¿‡è¿™ä¸ªé—®é¢˜ï¼Œæ²¡æœ‰å¾—åˆ°ä»»ä½•å›åº”â€¦.</p><h3 id="æ§åˆ¶å¯†ç æ ¡éªŒ"><a href="#æ§åˆ¶å¯†ç æ ¡éªŒ" class="headerlink" title="æ§åˆ¶å¯†ç æ ¡éªŒ"></a>æ§åˆ¶å¯†ç æ ¡éªŒ</h3><pre><code>// get è¯·æ±‚https://carapp.gtmc.com.cn/api/vhcApp/controlpwd/checkControlPwd?phone=&amp;pwd=// header Authorization:{{jwt}}</code></pre><p>é€šè¿‡ç”¨æˆ·çš„æ‰‹æœºå·ç å’Œæ§åˆ¶å¯†ç ,jwtæ ¡éªŒ,è¿›è¡Œç”¨æˆ·èº«ä»½è¯†åˆ«.</p><p>è¿”å›:</p><pre class=" language-js"><code class="language-js"><span class="token punctuation">{</span>    <span class="token string">"resultCode"</span><span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>    <span class="token string">"errMsg"</span><span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>    <span class="token string">"elapsedMilliseconds"</span><span class="token punctuation">:</span> <span class="token number">35</span><span class="token punctuation">,</span>    <span class="token string">"data"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>        <span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token string">"1"</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token string">"success"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span></code></pre><p><code>code:1</code> æ ¡éªŒé€šè¿‡,ç»è¿‡æµ‹è¯•,è¿™ä¸ªæ ¡éªŒçŠ¶æ€çš„æœ‰æ•ˆæœŸçº¦ä¸ºä¸‰åˆ†é’Ÿ</p><h3 id="è·å–è½¦è¾†ä½ç½®"><a href="#è·å–è½¦è¾†ä½ç½®" class="headerlink" title="è·å–è½¦è¾†ä½ç½®"></a>è·å–è½¦è¾†ä½ç½®</h3><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// get è¯·æ±‚(vin æ˜¯è½¦æ¶å·ç )</span>https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>carapp<span class="token punctuation">.</span>gtmc<span class="token punctuation">.</span>com<span class="token punctuation">.</span>cn<span class="token operator">/</span>api<span class="token operator">/</span>vhcApp<span class="token operator">/</span>lookForCar<span class="token operator">/</span>fixedPosition<span class="token operator">?</span>vin<span class="token operator">=</span><span class="token comment" spellcheck="true">// header </span>Authorization<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token punctuation">{</span>jwt<span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>è¿”å›ç»“æ„:</p><pre class=" language-js"><code class="language-js"><span class="token punctuation">{</span>    <span class="token string">"resultCode"</span><span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>    <span class="token string">"errMsg"</span><span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>    <span class="token string">"elapsedMilliseconds"</span><span class="token punctuation">:</span> <span class="token number">1009</span><span class="token punctuation">,</span>    <span class="token string">"data"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>        <span class="token string">"remissId"</span><span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>        <span class="token string">"latitude"</span><span class="token punctuation">:</span> <span class="token string">"100"</span><span class="token punctuation">,</span>        <span class="token string">"being"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>        <span class="token string">"longitude"</span><span class="token punctuation">:</span> <span class="token string">"200"</span><span class="token punctuation">,</span>        <span class="token string">"status"</span><span class="token punctuation">:</span> <span class="token number">1</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token string">"success"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span></code></pre><p>å…¶ä¸­ latitude longitude å°±æ˜¯è½¦è¾†çš„ç»çº¬åº¦äº†.</p><h3 id="ä½ç½®ä¸ŠæŠ¥"><a href="#ä½ç½®ä¸ŠæŠ¥" class="headerlink" title="ä½ç½®ä¸ŠæŠ¥"></a>ä½ç½®ä¸ŠæŠ¥</h3><p>ä»¥ä¸Šçš„ä¿¡æ¯ä¼¼ä¹å°±å¯ä»¥è·å–è½¦è¾†çš„ä½ç½®ä¿¡æ¯,ç”»å‡ºè¡Œé©¶è½¨è¿¹äº†ã€‚</p><p>ç„¶åï¼Œæˆ‘åœ¨è½¦è¾†è¡Œé©¶ä¸­æ—¶å€™æŠ“åŒ…æ—¶å€™ï¼Œå‘ç°è½¦è¾†çš„ä½ç½®ä¸€ç›´æ˜¯ä¸Šä¸€æ¬¡åœè½¦çš„é‚£ä¸ªç‚¹ã€‚æ¨æµ‹ï¼Œè½¦è¾†ä½ç½®å¹¶ä¸æ˜¯å®æ—¶ä¸ŠæŠ¥ï¼Œè€Œæ˜¯è½¦è¾†åœæ­¢ï¼Œç†„ç«åä¸ŠæŠ¥ä¸€æ¬¡ï¼ŒåŠŸèƒ½ä¹Ÿåªç”¨æ¥è¿½è¸ªè½¦è¾†çš„æœ€ç»ˆåœæ­¢ä½ç½®ã€‚</p><h3 id="è¿˜èƒ½åšä»€ä¹ˆ"><a href="#è¿˜èƒ½åšä»€ä¹ˆ" class="headerlink" title="è¿˜èƒ½åšä»€ä¹ˆ"></a>è¿˜èƒ½åšä»€ä¹ˆ</h3><p>æŠ“åŒ…ç ”ç©¶çš„è¿‡ç¨‹è¿˜æ˜¯éå¸¸æœ‰æ„æ€çš„ã€‚è™½ç„¶æˆ‘ä»¬æœ€åˆçš„ç»“æœæ²¡æœ‰è¾¾åˆ°ï¼Œä½†æ˜¯æˆ‘ä»¬ç”¨è¿™äº›æ•°æ®ä¾ç„¶å¯ä»¥åšå¾ˆå¤šæœ‰æ„æ€çš„äº‹æƒ…ï¼Œæ¯”å¦‚ç”¨<code>flutter</code>æŠŠè¿™äº›åŠŸèƒ½é‡å†™ä¸€éï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> promise </tag>
            
            <tag> axios </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Typescript è¯¥ä¸è¯¥å­¦ï¼Ÿ</title>
      <link href="/2020/06/02/front-end/learntypescript/"/>
      <url>/2020/06/02/front-end/learntypescript/</url>
      
        <content type="html"><![CDATA[<h1 id="å¼•"><a href="#å¼•" class="headerlink" title="å¼•"></a>å¼•</h1><p>all in jsï¼Œç¼–ç¨‹è¯­è¨€çš„ç›¸äº’ç¼–è¯‘å¹¶ä¸æ˜¯å¤æ‚çš„é—®é¢˜ï¼Œåœ¨<a href="https://github.com/jashkenas/coffeescript/wiki/List-of-languages-that-compile-to-JS" target="_blank" rel="noopener">github</a>ä¸Šé¢å¯ä»¥çœ‹åˆ°å¤§é‡çš„ç¼–è¯‘å™¨ï¼Œ<code>java</code>ï¼Œ<code>ruby</code>ï¼Œ<code>python</code>ï¼Œç”šè‡³è¿œå¤çš„ <code>smallTalk</code>ï¼Œ<code>lisp</code>ï¼Œéƒ½å¯ä»¥ç¼–è¯‘ä¸º<code> javascript</code>ã€‚</p><p><code>javascript</code> çš„æ–¹è¨€æ´¾ç³»å¤§è‡´å¯ä»¥åˆ†æˆä¸¤æ´¾ï¼š</p><ol><li><code>CoffeeScript</code> ï¼šç”±rubyç¤¾åŒºåˆ›å»ºçš„æ–¹è¨€ï¼Œ<code>CoffeeScript</code> å¸æ”¶äº† <code>Ruby</code>, <code>Python</code>, <code>Haskell</code> è¯­è¨€çš„è®¾è®¡æ€æƒ³, å°† <code>JavaScript</code> çš„ä»£ç å˜å¾—æ¸…æ™°ç®€æ´, ç››æä¸€æ—¶ã€‚</li><li>TypeScript æ˜¯ Microsoft æ¨å‡ºçš„ç¼–ç¨‹è¯­è¨€, é¡¹ç›®ç”±å¤§åé¼é¼çš„ C# é¦–å¸­æ¶æ„å¸ˆ Anders Hejlsberg æ“åˆ€. å®ƒçš„ç‰¹ç‚¹æ˜¯åœ¨ JavaScript çš„åŸºç¡€ä¸Šå®ç°äº†å¼ºç±»å‹å’Œé™æ€ç±»å‹æ£€æŸ¥, åŠ å…¥äº†å¾ˆå¤šé™æ€è¯­è¨€æ‰æœ‰çš„æ¦‚å¿µã€‚</li></ol><p><code>CoffeeScript </code>å·²ç„¶å¼å¾®ï¼ŒTypescript èƒŒé å¾®è½¯è¿™é¢—å¤§æ ‘ï¼Œåœ¨å‰ç«¯ç•Œæ€èµ·è…¥é£è¡€é›¨ï¼ŒçŸ¥åçš„å¼€æºæ¡†æ¶ï¼Œ<code>React</code>ã€<code>Vue</code>ã€<code>Angular</code>æ— ä¸æŠ•å…¥å…¶æ€€æŠ±ï¼Œç”šè‡³<code>github</code>ä¸Šé¢ç¨å¾®ç”¨æˆ·å¤šä¸€ç‚¹çš„ç±»åº“ï¼Œéƒ½ä¼šæœ‰ issue æåˆ°æ˜¯å¦æä¾› Typescript çš„  <code>.d.ts</code> æ–‡ä»¶ï¼ˆæœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œå°±æä¾›äº† <code>Typescript</code>çš„æ”¯æŒ ï¼‰ã€‚</p><p>å®˜æ–¹è¯´ï¼Œ<code>Typescript</code> æ˜¯<code>Javascript</code>çš„è¶…é›†ï¼Œä¼¼ä¹å¯ä»¥æŠŠä»–ç†è§£æˆåŸºäº <code>Javascript</code> çš„ç‹¬ç«‹è¯­è¨€ï¼Ÿæˆ‘å¹¶ä¸è¿™ä¹ˆç†è§£ï¼Œ<code>Typescript</code> æœ€ç»ˆçš„æ‰§è¡Œå®¿ä¸»ç¯å¢ƒï¼Œè¿˜æ˜¯v8å¼•æ“ï¼Œå®ƒæœ€ç»ˆè¿˜æ˜¯è¦ç¼–è¯‘æˆ<code>JavaScript</code>ã€‚å®ƒçš„ç”¨æˆ·ç»å¤§éƒ¨åˆ†ä¹Ÿè¿˜æ˜¯<code>JavaScript</code>ç”¨æˆ·ï¼Œè¿™äº›åŸå› ï¼Œä½¿å¾—å®ƒå¯¹æ–°ç‰¹æ€§çš„æ·»åŠ éå¸¸å…‹åˆ¶ï¼Œæ–°ç‰¹æ€§å‡ ä¹éƒ½å¯ä»¥åœ¨TC39ï¼ˆä¸€ä¸ªæ¨åŠ¨ JavaScript å‘å±•çš„å§”å‘˜ä¼šï¼Œç”±å„ä¸ªä¸»æµæµè§ˆå™¨å‚å•†çš„ä»£è¡¨æ„æˆï¼Œåˆ¶å®šECMAScriptæ ‡å‡†ï¼Œæ ‡å‡†ç”Ÿæˆçš„æµç¨‹ï¼Œå¹¶å®ç°ï¼‰ä¸­æ‰¾åˆ°åŸå‹ã€‚</p><p><code>Typescript</code> åªä¸è¿‡æ˜¯ <code>Beta</code> ç‰ˆæœ¬çš„ <code>Javascript</code>ã€‚å­¦ä¸å­¦å®Œå…¨ä¸æ˜¯é—®é¢˜äº†ï¼Œç°åœ¨ä¸å­¦ï¼Œä»¥åè‚¯å®šè¿˜æ˜¯è¦å­¦:smile:ã€‚</p><h1 id="é¡¹ç›®"><a href="#é¡¹ç›®" class="headerlink" title="é¡¹ç›®"></a>é¡¹ç›®</h1><h3 id="ä¸€å¥-webç«¯-ï¼ˆ-åŸºäº-vue-å’Œ-Typescript-å†™æ³•ï¼‰"><a href="#ä¸€å¥-webç«¯-ï¼ˆ-åŸºäº-vue-å’Œ-Typescript-å†™æ³•ï¼‰" class="headerlink" title="ä¸€å¥ webç«¯ ï¼ˆ åŸºäº vue å’Œ Typescript å†™æ³•ï¼‰"></a><a href="https://word.aocoding.com/" target="_blank" rel="noopener">ä¸€å¥ webç«¯</a> ï¼ˆ åŸºäº <code>vue</code> å’Œ Typescript å†™æ³•ï¼‰</h3><pre class=" language-typescript"><code class="language-typescript"><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">></span><span class="token comment" spellcheck="true">// class ç»„ä»¶å†™æ³•</span><span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Vue <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-property-decorator'</span><span class="token keyword">import</span> <span class="token punctuation">{</span> Mutation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex-class'</span><span class="token keyword">import</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ant-design-vue'</span><span class="token comment" spellcheck="true">// è£…é¥°å™¨</span>@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">IndexPage</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// åŸdata</span>  form <span class="token operator">=</span> <span class="token punctuation">{</span>    word<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>    <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>    source<span class="token punctuation">:</span> <span class="token string">''</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// vuex state</span> <span class="token comment" spellcheck="true">// ! æ–­è¨€ä¸ä¸ºç©ºï¼Œå…¼å®¹å†™æ³•ï¼ˆæ–­è¨€ï¼‰</span>  <span class="token comment" spellcheck="true">//  ç”±äºTsæœ€æ–°ç‰ˆæœ¬ä½¿ç”¨äº†strictPropertyInitializationï¼Œå¦‚æœå˜é‡æ²¡æœ‰åœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨æˆ–èµ‹å€¼ï¼Œéƒ½éœ€è¦æ·»åŠ !ï¼Œè¿›è¡Œæ˜¾å¼èµ‹å€¼æ–­è¨€</span>  @<span class="token function">Mutation</span><span class="token punctuation">(</span><span class="token string">'showloading'</span><span class="token punctuation">)</span> showloading<span class="token operator">!</span><span class="token punctuation">:</span> <span class="token keyword">boolean</span>  rules <span class="token operator">=</span> <span class="token punctuation">{</span>    word<span class="token punctuation">:</span> <span class="token punctuation">[</span>      <span class="token punctuation">{</span>        required<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span>        message<span class="token punctuation">:</span> <span class="token string">'è¯·è¾“å…¥å†…å®¹'</span><span class="token punctuation">,</span>        whitespace<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span>        trigger<span class="token punctuation">:</span> <span class="token string">'blur'</span>      <span class="token punctuation">}</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>      <span class="token punctuation">{</span>        required<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span>        message<span class="token punctuation">:</span> <span class="token string">'è¯·è¾“å…¥æ¥æº'</span><span class="token punctuation">,</span>        whitespace<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span>        trigger<span class="token punctuation">:</span> <span class="token string">'blur'</span>      <span class="token punctuation">}</span>    <span class="token punctuation">]</span>  <span class="token punctuation">}</span><span class="token comment" spellcheck="true">// å…¼å®¹å†™æ³•</span><span class="token comment" spellcheck="true">// nuxt ä¸­$apiè¢«æŒ‚è½½åˆ°äº†thisä¸‹é¢</span>  $api<span class="token punctuation">:</span> <span class="token keyword">any</span>  <span class="token comment" spellcheck="true">// å…¼å®¹å†™æ³•</span>  <span class="token comment" spellcheck="true">// formRef ç±»å‹</span>  <span class="token comment" spellcheck="true">// è§£é‡Šï¼šhttps://stackoverflow.com/questions/52109471/typescript-in-vue-property-validate-does-not-exist-on-type-vue-element</span>  <span class="token keyword">get</span> <span class="token function">formRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Vue <span class="token operator">&amp;</span> <span class="token punctuation">{</span> validate<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">boolean</span> <span class="token punctuation">}</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>form as Vue <span class="token operator">&amp;</span> <span class="token punctuation">{</span> validate<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">boolean</span> <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">public</span> async <span class="token function">onSubmit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> self <span class="token operator">=</span> <span class="token keyword">this</span>    <span class="token keyword">const</span> verify<span class="token punctuation">:</span> <span class="token keyword">boolean</span> <span class="token operator">=</span> await <span class="token keyword">this</span><span class="token punctuation">.</span>formRef<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>verify<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">try</span> <span class="token punctuation">{</span>        <span class="token keyword">const</span> <span class="token punctuation">{</span> code<span class="token punctuation">,</span> msg<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> await self<span class="token punctuation">.</span>$api<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">{</span>          <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>form        <span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>code <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'æ·»åŠ æˆåŠŸ'</span><span class="token punctuation">)</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>form <span class="token operator">=</span> <span class="token punctuation">{</span>            word<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>            <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>            source<span class="token punctuation">:</span> <span class="token string">''</span>          <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>          message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre><p>github:    <a href="https://github.com/justOneWord/one_word_web" target="_blank" rel="noopener">https://github.com/justOneWord/one_word_web</a></p><p>ä¸ªäººæ„Ÿå—ï¼š</p><ol><li>ä¼ ç»Ÿvueç»„ä»¶å†™æ³•è¿‡åº¦ä¸º<code>vue-class-component</code>å†™æ³•ï¼Œæ”¹å˜æ¯”è¾ƒå¤§ï¼Œä½¿ç”¨è£…é¥°å™¨ä»£æ›¿ä¼ ç»Ÿçš„ä»£ç ç»„ç»‡å½¢å¼ã€‚</li><li>å› ä¸ºå¯¹Typescriptçš„æ”¯æŒä¸å®Œå–„ï¼Œéœ€è¦å†™éƒ¨åˆ†å…¼å®¹ä»£ç ã€‚</li><li>å‰ç«¯çš„ä»£ç ç±»åº“æä¾›çš„ç±»å‹å®šä¹‰æ–‡ä»¶ä¸å®Œå–„ï¼Œå¾ˆå¤šç±»åº“éƒ½æ²¡æœ‰æä¾›ï¼Œéƒ¨åˆ†è¡¨æ€åœ¨vue3ä¹‹åæä¾›ã€‚ç°é˜¶æ®µå¯èƒ½éœ€è¦æ‰‹åŠ¨å£°æ˜ä¸ºanyä½¿ç”¨ã€‚</li></ol><h3 id="ä¸€å¥æœåŠ¡ç«¯-ï¼ˆåŸºäº-nest-js-å’Œ-typescript-å†™æ³•ï¼‰"><a href="#ä¸€å¥æœåŠ¡ç«¯-ï¼ˆåŸºäº-nest-js-å’Œ-typescript-å†™æ³•ï¼‰" class="headerlink" title="ä¸€å¥æœåŠ¡ç«¯ ï¼ˆåŸºäº nest.js å’Œ typescript å†™æ³•ï¼‰"></a>ä¸€å¥æœåŠ¡ç«¯ ï¼ˆåŸºäº nest.js å’Œ typescript å†™æ³•ï¼‰</h3><p><code>wordController</code>(éƒ¨åˆ†)ï¼š</p><p>å¤§é‡ä½¿ç”¨è£…é¥°å™¨è¯­æ³•ï¼Œç®€åŒ–å†™æ³•</p><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">// è£…é¥°å™¨</span>@<span class="token function">Controller</span><span class="token punctuation">(</span><span class="token string">'word'</span><span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">WordController</span> <span class="token punctuation">{</span>  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> readonly wordService<span class="token punctuation">:</span>WordService<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// ä¸‰ä¸ªè£…é¥°å™¨</span>  @<span class="token function">Post</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// å‚æ•°æ ¡éªŒç®¡é“</span>  @<span class="token function">UsePipes</span><span class="token punctuation">(</span>ValidationPipe<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// æ‰‹åŠ¨è¿”å›200ï¼Œå¦åˆ™ä¼šè¿”å›201ï¼Œä¹Ÿå¯ä»¥æ”¾åˆ°å…¨å±€æ‹¦æˆªå™¨å»åš</span>  @<span class="token function">HttpCode</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// body ç±»å‹ WordDto</span>  async <span class="token function">add</span><span class="token punctuation">(</span>@<span class="token function">Body</span><span class="token punctuation">(</span><span class="token punctuation">)</span> body<span class="token punctuation">:</span> WordDto<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span>   await <span class="token keyword">this</span><span class="token punctuation">.</span>wordService<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  @<span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">'random'</span><span class="token punctuation">)</span>  random <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>wordService<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><code>wordService</code>ï¼ˆéƒ¨åˆ†ï¼‰:</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">constructor</span><span class="token punctuation">(</span>    <span class="token comment" spellcheck="true">// æ³¨å…¥ redis</span>    <span class="token keyword">private</span> readonly redisService<span class="token punctuation">:</span> RedisService<span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">// æ•°æ®åº“æ³¨å…¥</span>    @<span class="token function">InjectRepository</span><span class="token punctuation">(</span>Word<span class="token punctuation">)</span> <span class="token keyword">private</span> readonly wordReposition<span class="token punctuation">:</span> Repository<span class="token operator">&lt;</span>Word<span class="token operator">></span><span class="token punctuation">,</span>    @<span class="token function">InjectRepository</span><span class="token punctuation">(</span>Hitoapi<span class="token punctuation">)</span>    <span class="token keyword">private</span> readonly hitoApiReposition<span class="token punctuation">:</span> Repository<span class="token operator">&lt;</span>Hitoapi<span class="token operator">></span><span class="token punctuation">,</span>  <span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment" spellcheck="true">// æŒ‡å®š body ç±»å‹ä¸º `WordDto`</span>async <span class="token function">add</span><span class="token punctuation">(</span>body<span class="token punctuation">:</span> WordDto<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨</span>    <span class="token comment" spellcheck="true">// result ä¼šè‡ªåŠ¨æ¨å¯¼å‡ºç±»å‹ï¼Œä¸éœ€è¦æ‰‹åŠ¨æŒ‡å®š</span>    <span class="token keyword">const</span> result <span class="token operator">=</span> await <span class="token keyword">this</span><span class="token punctuation">.</span>wordReposition<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> word<span class="token punctuation">:</span> body<span class="token punctuation">.</span>word <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// ApiCode ä»£ç æç¤ºï¼Œä¹Ÿæ˜¯Typescriptæä¾›çš„èƒ½åŠ›</span>      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ApiException</span><span class="token punctuation">(</span><span class="token string">'èµ„æºå·²ç»å­˜åœ¨'</span><span class="token punctuation">,</span> ApiCode<span class="token punctuation">.</span>EXIST_ERROR<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">const</span> newWord <span class="token operator">=</span> await <span class="token keyword">this</span><span class="token punctuation">.</span>wordReposition<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      <span class="token operator">...</span>body<span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'newWord'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> newResult <span class="token operator">=</span> await <span class="token keyword">this</span><span class="token punctuation">.</span>wordReposition<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>newWord<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>newResult<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">//  æ’å…¥æˆåŠŸ</span>      <span class="token keyword">return</span> <span class="token keyword">true</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ApiException</span><span class="token punctuation">(</span><span class="token string">'æ·»åŠ å¤±è´¥'</span><span class="token punctuation">,</span> ApiCode<span class="token punctuation">.</span>BUSINESS_ERROR<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span></code></pre><p>github: <a href="https://github.com/justOneWord/one_word_api" target="_blank" rel="noopener">https://github.com/justOneWord/one_word_api</a></p><p>ä¸ªäººæ„Ÿå—ï¼š</p><ol><li><code>nestjs</code> æ¡†æ¶åŸºäº Typescript å¼€å‘ï¼Œæ•´ä½“ä½¿ç”¨è¡Œäº‘æµæ°´ï¼Œæ²¡æœ‰ä¸ºäº†ç”¨Typescriptè€Œç”¨Typescriptçš„æ„Ÿè§‰ã€‚</li><li>ä»£ç å±‚æ¬¡æ¸…æ™°ï¼Œå…·æœ‰å®Œå–„çš„ mvc ç»“æ„ï¼Œæ¯”<code>express</code>æ–¹ä¾¿ã€‚</li></ol><p>å‚è€ƒæ–‡æ¡£ï¼š</p><ol><li><p><a href="https://www.blackglory.me/javascript-dialects-and-factions/" target="_blank" rel="noopener">æ¼«è°ˆ JavaScript æ–¹è¨€ä¸æ´¾ç³»</a></p></li><li><p><a href="https://zhuanlan.zhihu.com/p/139731168" target="_blank" rel="noopener">å‰ç«¯å¼€å‘çš„ç“¶é¢ˆä¸æœªæ¥ä¹‹è·¯</a></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Typescript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webstorm ä¸­è°ƒè¯•typescriptå•æ–‡ä»¶</title>
      <link href="/2020/05/22/front-end/debugger-typescript-in-webstorm/"/>
      <url>/2020/05/22/front-end/debugger-typescript-in-webstorm/</url>
      
        <content type="html"><![CDATA[<p>leetCode æœ€è¿‘æ”¯æŒäº†<code>typescript</code>åˆ·é¢˜ï¼Œé«˜é«˜å…´å…´æŠŠ<code>webstorm</code>åˆ‡æ¢åˆ°typescriptåˆ·é¢˜,è®°å½•ä¸‹åˆ‡æ¢è¿‡ç¨‹ã€‚</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>å› ä¸ºåˆ·é¢˜éƒ½æ˜¯å•æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦ç”¨webstormæ”¯æŒdebuggerå•tsæ–‡ä»¶ã€‚</p><p><code>yarn add typescript ts-node</code>  ts-node å¯ä»¥è®©æˆ‘ä»¬ç›´æ¥æ‰§è¡Œtsæ–‡ä»¶</p><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><ol><li>é…ç½®éƒ¨åˆ† Node parameters å¡«å†™ï¼š<code>--require ts-node/register</code>ã€‚</li><li>ç‚¹å‡»è¿è¡Œï¼Œå°±å¯ä»¥ç›´æ¥æ‰§è¡Œ<code>.ts</code>å•æ–‡ä»¶ï¼Œç‚¹å‡»debuggerå°±å¯ä»¥è¿›è¡Œ<code>debugger</code>äº†ï¼Œå’Œä»¥å‰è°ƒè¯•jsä¸€æ ·ï¼Œéå¸¸æ–¹ä¾¿</li></ol><p><img src="/images/image-20200522110323174.png" alt="é…ç½®"></p><p><img src="/images/image-20200522110831517.png" alt="è¿è¡Œ"></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> typescript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>code-surfer ä¸­æ–‡ç¿»è¯‘</title>
      <link href="/2020/05/12/translation/code-surfer-zh/"/>
      <url>/2020/05/12/translation/code-surfer-zh/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/pomber/code-surfer" target="_blank" rel="noopener">code-surfer</a>  ç‚«é…·çš„ä»£ç æ¼”ç¤ºpptã€‚</p><p>ç”¨èµ·æ¥è¿˜æ˜¯æœ‰äº›å°æ¯›ç—…ï¼Œæ¯”å¦‚æ— æ³•å±…ä¸­ï¼Œè¦æ‰‹åŠ¨æ¡ä»¶ï¼Œä½†æ˜¯ç‘•ä¸æ©ç‘œï¼Œè¿™æ˜¯ä¸€æ¬¾éå¸¸æ£’çš„è½¯ä»¶ã€‚</p><p>é¡ºæ‰‹åšäº†ä¸ªç¿»è¯‘ï¼Œå·²æåˆ°å®˜æ–¹åº“ã€‚</p><p>å’Œåšå®¢çš„æ¸²æŸ“æœ‰ç‚¹å†²çªï¼Œç§»æ­¥å®˜æ–¹åº“ï¼Œåœ°å€ï¼š<a href="https://github.com/pomber/code-surfer/blob/master/readme-zh.md" target="_blank" rel="noopener">https://github.com/pomber/code-surfer/blob/master/readme-zh.md</a></p><hr><h1 id="Code-Surfer"><a href="#Code-Surfer" class="headerlink" title="Code Surfer"></a>Code Surfer</h1><blockquote><p>åœ¨ <a href="https://opencollective.com/code-surfer" target="_blank" rel="noopener">support</a>  ä¸ŠèµåŠ©è¿™ä¸ªé¡¹ç›®ï¼Œä¿æŒå¥¹çš„ç”Ÿå‘½åŠ›â¤ï¸</p></blockquote><p>Code Surferä¸º <a href="https://github.com/jxnblk/mdx-deck" target="_blank" rel="noopener">MDX Deck</a> å¹»ç¯ç‰‡å¢åŠ ä»£ç é«˜äº®ã€ä»£ç ç¼©æ”¾ã€ä»£ç æ»šåŠ¨ã€ä»£ç èšç„¦ã€ä»£ç å˜å½¢ç­‰åŠŸèƒ½ã€‚</p><p>åˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªæ–°çš„é¡¹ç›®:</p><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> init code-surfer-deck my-deck<span class="token function">cd</span> my-deck<span class="token function">npm</span> start</code></pre><h2 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><ul><li><a href="https://advanced-graphql-workshop.netlify.com/" target="_blank" rel="noopener">å¼ºå¤§çš„GraphQLå·¥ä½œåŠ</a> ä½œè€… <a href="https://twitter.com/_philpl" target="_blank" rel="noopener">Phil Pluckthun</a></li><li><a href="https://github.com/pomber/react-conf-2018-hooks-demo" target="_blank" rel="noopener">React Conf 2018 Hooks Demo</a></li></ul><h2 id="å¦‚ä½•ä½¿ç”¨-Code-Surfer"><a href="#å¦‚ä½•ä½¿ç”¨-Code-Surfer" class="headerlink" title="å¦‚ä½•ä½¿ç”¨ Code Surfer"></a>å¦‚ä½•ä½¿ç”¨ Code Surfer</h2><blockquote><p>é¦–å…ˆäº†è§£ <a href="https://github.com/jxnblk/mdx-deck" target="_blank" rel="noopener">MDX Deck</a> çš„å·¥ä½œæ–¹å¼å¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©</p></blockquote><p>è¦ä½¿ç”¨ Code Surferï¼Œä½ éœ€è¦å…ˆå°†å…¶å¯¼å…¥ï¼Œå¹¶ä½¿ç”¨ <code>&lt;CodeSurfer&gt;</code> æ ‡ç­¾åŒ…è£¹è¦æ˜¾ç¤ºçš„ä»£ç ï¼ˆ<strong>éœ€è¦åœ¨ä»£ç å—ä¹‹å‰å’Œä¹‹åä¿ç•™ç©ºè¡Œ</strong>ï¼‰:</p><pre class=" language-markdown"><code class="language-markdown">import { CodeSurfer } from "code-surfer"<span class="token title important"><span class="token punctuation">#</span> Deck Title</span><span class="token hr punctuation">---</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CodeSurfer</span><span class="token punctuation">></span></span>â€‹```jsconsole.log(1);console.log(2);console.log(3);```<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>CodeSurfer</span><span class="token punctuation">></span></span></code></pre><p>ç‰¹æ€§:</p><ul><li><a href="#focus">é«˜äº®</a></li><li><a href="#steps">æ­¥éª¤</a></li><li><a href="#title-and-subtitle">æ ‡é¢˜å’Œå‰¯æ ‡é¢˜</a></li><li><a href="#themes">ä¸»é¢˜</a></li><li><a href="#custom-styles">è‡ªå®šä¹‰æ ·å¼</a></li><li><a href="#languages">å¤šè¯­è¨€æ”¯æŒ</a></li><li><a href="#columns">åˆ—</a></li><li><a href="#import-code">å¯¼å…¥ä»£ç </a></li><li><a href="#line-numbers">è¡Œå·</a></li><li><a href="#diffs">å·®å¼‚</a></li></ul><blockquote><p>è¿™æ˜¯ä¸€ä¸ª <a href="https://codesurfer.pomb.us/full/" target="_blank" rel="noopener">ä½¿ç”¨æ‰€æœ‰åŠŸèƒ½</a> (åŠ <a href="https://raw.githubusercontent.com/pomber/code-surfer/code-surfer-v2/sites/docs/decks/full.mdx" target="_blank" rel="noopener">mdx æºç </a>)çš„æ¼”ç¤ºæ–‡ç¨¿ï¼Œä¸‡ä¸€ä½ æ›´å–œæ¬¢é˜…è¯»ä»£ç è€Œä¸æ˜¯æ–‡æ¡£ğŸ˜€</p></blockquote><h2 id="é«˜äº®"><a href="#é«˜äº®" class="headerlink" title="é«˜äº®"></a>é«˜äº®</h2><p>åœ¨ä»£ç å—ç¬¬ä¸€è¡Œä¸­çš„ï¼ˆè®¾ç½®ï¼‰è¯­è¨€ä¹‹åæ·»åŠ  _é«˜äº®å­—ç¬¦ä¸²ä½ç½®_ï¼Œä»¥å‘Šè¯‰Code Surferä½ è¦é«˜äº®çš„è¡Œå’Œåˆ—ã€‚</p><p>Code Surferå°†æ·¡å‡ºæ‰€æœ‰æœªé«˜äº®çš„ä»£ç ï¼Œå¹¶åœ¨å¿…è¦æ—¶å°†å…¶ç¼©å°ä»¥é€‚åˆå¹»ç¯ç‰‡ã€‚</p><p>â€‹````md<br><CodeSurfer></p><p>â€‹```js 1:2,3[8:10]<br>console.log(1);<br>console.log(2);<br>console.log(3);</p><pre><code>&lt;/CodeSurfer&gt;</code></pre><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œ<code>1:2,3[8:10]</code> æ„æ€æ˜¯ï¼šâ€œè¡Œ1è¡Œ2é«˜äº®ï¼Œè¡Œ3åˆ°åˆ—8åˆ°10é«˜äº®â€ã€‚æ›´å¤šç¤ºä¾‹ï¼š</p><ul><li><code>5:10</code> ç¬¬ 5,6,7,8,9 è¡Œ å’Œç¬¬ 10 è¡Œé«˜äº®</li><li><code>1,3:5,7</code> ç¬¬1è¡Œï¼Œç¬¬ 3~5 è¡Œï¼Œç¬¬ 7 è¡Œé«˜äº®ï¼Œ</li><li><code>2[5]</code> ç¬¬ 2 è¡Œç¬¬5é«˜äº®</li><li><code>2[5:8]</code> ç¬¬ 2 è¡Œ 5~8 åˆ—é«˜äº®</li><li><code>1,2[1,3:5,7],3</code> ç¬¬1è¡Œï¼Œç¬¬2è¡Œï¼Œç¬¬2è¡Œç¬¬1åˆ—ã€3~5åˆ—ã€7åˆ—é«˜äº®</li></ul><p><em>æ³¨æ„: åœ¨ä»¥å‰çš„CodeSurferç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ ‡è®°ä»£æ›¿åˆ—ã€‚</em></p><h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><p>æ·»åŠ æ›´å¤šä»£ç å—ï¼Œä»¥å‘ Code Surfer å¹»ç¯ç‰‡æ·»åŠ æ­¥éª¤ã€‚</p><p>â€‹````md<br><CodeSurfer></p><p>â€‹```js<br>console.log(1);<br>console.log(2);<br>console.log(3);</p><pre><code>```js 1console.log(1);console.log(2);console.log(3);</code></pre><pre class=" language-js"><code class="language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></CodeSurfer>````<p>ä½ å¯ä»¥ä¸ºä¸åŒçš„æ­¥éª¤æ›´æ”¹ç„¦ç‚¹å’Œ/æˆ–ä»£ç ï¼Œç„¶å Code Surfer ä¼šåœ¨ä»¥ä¸‹æ­¥éª¤ä¹‹é—´è¿›è¡Œå˜æ¢ï¼šç¼©æ”¾ï¼Œæ»šåŠ¨ï¼Œæ·¡å…¥ï¼Œæ·¡å‡ºï¼Œæ·»åŠ å’Œåˆ é™¤è¡Œã€‚</p><h2 id="æ ‡é¢˜å’Œå‰¯æ ‡é¢˜"><a href="#æ ‡é¢˜å’Œå‰¯æ ‡é¢˜" class="headerlink" title="æ ‡é¢˜å’Œå‰¯æ ‡é¢˜"></a>æ ‡é¢˜å’Œå‰¯æ ‡é¢˜</h2><p>â€‹````md<br><CodeSurfer></p><p>â€‹```js 1 title=â€Titleâ€ subtitle=â€Look at the first lineâ€<br>console.log(1);<br>console.log(2);<br>console.log(3);</p><pre><code>```js 2 title=&quot;Title&quot; subtitle=&quot;and now the second&quot;console.log(1);console.log(2);console.log(3);</code></pre></CodeSurfer>````<h2 id="ä¸»é¢˜"><a href="#ä¸»é¢˜" class="headerlink" title="ä¸»é¢˜"></a>ä¸»é¢˜</h2><p><a href="https://codesurfer.pomb.us/themes/" target="_blank" rel="noopener"><img src="https://user-images.githubusercontent.com/1911623/66016573-97df9c00-e4ad-11e9-9095-225d5c9b46a8.png" alt="Code Surfer Themes"></a></p><p>åœ¨ <a href="https://github.com/pomber/code-surfer/blob/code-surfer-v2/packs/themes/src/index.ts" target="_blank" rel="noopener"><code>@code-surfer/themes</code></a> åŒ…é‡Œé¢æœ‰è®¸å¤šCode Surferä¸»é¢˜ã€‚</p><p>ä½ å¯ä»¥é€šè¿‡ theme ä¼ é€’ prop <code>&lt;CodeSurfer theme={someTheme}&gt;</code>:</p><p>â€‹````md<br>import { CodeSurfer } from â€œcode-surferâ€<br>import { nightOwl } from â€œ@code-surfer/themesâ€</p><CodeSurfer theme={nightOwl}><p>â€‹```js<br>console.log(1);<br>console.log(2);<br>console.log(3);</p><pre><code>&lt;/CodeSurfer&gt;</code></pre><p>æˆ–è€…åƒè®¾ç½®å…¶ä»–ä»»ä½•<a href="https://github.com/jxnblk/mdx-deck#theming" target="_blank" rel="noopener">MDX Deck ä¸»é¢˜</a>ä¸€æ ·è®¾ç½®æ•´ä¸ªé¡¹ç›®çš„ä¸»é¢˜ï¼š</p><p>â€‹````md<br>import { CodeSurfer } from â€œcode-surferâ€<br>import { nightOwl } from â€œ@code-surfer/themesâ€</p><p>export const theme = nightOwl</p><CodeSurfer><p>â€‹```js<br>console.log(1);<br>console.log(2);<br>console.log(3);</p><pre><code>&lt;/CodeSurfer&gt;</code></pre><blockquote><p>ä»¥è¿™ç§æ–¹å¼å¯¼å‡ºä¸»é¢˜è¿˜å°†æ›´æ”¹æœªä½¿ç”¨Code Surferçš„å¹»ç¯ç‰‡çš„æ–‡æœ¬å’ŒèƒŒæ™¯é¢œè‰²ã€‚å¦‚æœè¦ä¿ç•™å…¶ä»–mdxä¸»é¢˜çš„é¢œè‰²ï¼Œå¯ä»¥å°†<a href="https://github.com/jxnblk/mdx-deck/blob/master/docs/theming.md#composing-themes" target="_blank" rel="noopener">ä¸¤ä¸ªä¸»é¢˜ç»„åˆåœ¨ä¸€èµ·</a>ï¼š<code>export const themes = [codeSurferTheme, mdxDeckTheme]</code></p></blockquote><h2 id="è‡ªå®šä¹‰æ ·å¼"><a href="#è‡ªå®šä¹‰æ ·å¼" class="headerlink" title="è‡ªå®šä¹‰æ ·å¼"></a>è‡ªå®šä¹‰æ ·å¼</h2><p>ä½ å¯ä»¥ç¼–å†™è‡ªå·±çš„Code Surferä¸»é¢˜ï¼Œæ›´æ”¹ä»£ç ï¼Œæ ‡é¢˜å’Œå‰¯æ ‡é¢˜çš„æ ·å¼ï¼š</p><blockquote><p>åœ¨ä¸»é¢˜ä¸­ä½¿ç”¨ <a href="https://theme-ui.com/" target="_blank" rel="noopener">Theme UI</a></p></blockquote><p>â€‹```js<br>// custom-theme.js<br>export default {<br>  colors: {<br>    background: â€œ#222â€,<br>    text: â€œ#dddâ€,<br>    primary: â€œ#a66â€<br>  },<br>  styles: {<br>    CodeSurfer: {<br>      pre: {<br>        color: â€œtextâ€,<br>        backgroundColor: â€œbackgroundâ€<br>      },<br>      code: {<br>        color: â€œtextâ€,<br>        backgroundColor: â€œbackgroundâ€<br>      },<br>      tokens: {<br>        â€œcomment cdata doctypeâ€: {<br>          fontStyle: â€œitalicâ€<br>        },<br>        â€œbuiltin changed keyword punctuation operator tag deleted string attr-value char number insertedâ€: {<br>          color: â€œprimaryâ€<br>        },<br>        â€œline-numberâ€: {<br>          opacity: 0.8<br>        }<br>      },<br>      title: {<br>        backgroundColor: â€œbackgroundâ€,<br>        color: â€œtextâ€<br>      },<br>      subtitle: {<br>        color: â€œ#d6deebâ€,<br>        backgroundColor: â€œrgba(10,10,10,0.9)â€<br>      },<br>      unfocused: {<br>        // only the opacity of unfocused code can be changed<br>        opacity: 0.1<br>      }<br>    }<br>  }<br>};</p><pre><code>åƒå…¶ä»–å¡ç‰‡ä¸»é¢˜ä¸€æ ·ä½¿ç”¨å®ƒ:````mdimport { CodeSurfer } from &quot;code-surfer&quot;import customTheme from &quot;./custom-theme&quot;&lt;CodeSurfer theme={customTheme}&gt;â€‹```jsconsole.log(1);console.log(2);console.log(3);</code></pre></CodeSurfer>````<h2 id="è¯­è¨€æ”¯æŒ"><a href="#è¯­è¨€æ”¯æŒ" class="headerlink" title="è¯­è¨€æ”¯æŒ"></a>è¯­è¨€æ”¯æŒ</h2><p>Code Surfer ä½¿ç”¨ <a href="https://prismjs.com/" target="_blank" rel="noopener">Prism</a> è§£æä¸åŒçš„è¯­è¨€, å› æ­¤å®ƒæ”¯æŒ <a href="https://prismjs.com/#supported-languages" target="_blank" rel="noopener">Prism æ”¯æŒçš„æ‰€æœ‰è¯­è¨€</a>.</p><p>å¼€ç®±å³ç”¨çš„æ”¯æŒå¤§å¤šæ•°æµè¡Œè¯­è¨€ï¼Œå…¶ä½™çš„åˆ™éœ€è¦å¯¼å…¥å®ƒä»¬:</p><p>â€‹````md<br>import { CodeSurfer } from â€œcode-surferâ€<br>import â€œprismjs/components/prism-smalltalkâ€</p><CodeSurfer><p>â€‹```smalltalk<br>result := a &gt; b<br>    ifTrue:[ â€˜greaterâ€™ ]<br>    ifFalse:[ â€˜less or equalâ€™ ]</p><pre><code>&lt;/CodeSurfer&gt;</code></pre><h2 id="åˆ—"><a href="#åˆ—" class="headerlink" title="åˆ—"></a>åˆ—</h2><p>å¦‚æœéœ€è¦åŒæ—¶æ˜¾ç¤ºå¤šä¸ªä»£ç , è¯·ä½¿ç”¨ <code>&lt;CodeSurferColumns&gt;</code>:</p><p>â€‹````md<br>import { CodeSurferColumns, Step } from â€œcode-surferâ€</p><CodeSurferColumns><Step subtitle="First Step"><p>â€‹```js<br>console.log(1);<br>console.log(2);</p><pre><code>```jsconsole.log(&quot;a&quot;);console.log(&quot;b&quot;);</code></pre></Step><Step subtitle="Second Step"><pre class=" language-js"><code class="language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-js"><code class="language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></Step></CodeSurferColumns>````<p>æ¯ä¸ª <code>&lt;Step&gt;</code> æœ‰è‡ªå·±çš„ <code>title</code> and <code>subtitle</code>.</p><p>ä½ å¯ä»¥ä¸ºå„åˆ—ä½¿ç”¨ä¸åŒçš„ä¸»é¢˜: <code>&lt;CodeSurferColumns themes={[nightOwl, ultramin]}&gt;</code>. å¹¶æ›´æ”¹åˆ—çš„ç›¸å¯¹å¤§å° <code>&lt;CodeSurferColumns sizes={[1,3]}&gt;</code>.</p><p>åˆ—ä¸ä»…ç”¨äºä»£ç ï¼Œè¿˜å¯ä»¥å°†å®ƒä»¬ç”¨äºä»»ä½•ç±»å‹çš„å†…å®¹ï¼š</p><p>â€‹````md<br>import { CodeSurferColumns, Step } from â€œcode-surferâ€<br>import MyComponent from â€œ./my-component.jsxâ€</p><CodeSurferColumns><Step><p>â€‹```js<br>console.log(1);<br>console.log(2);</p><pre><code># Some Markdown&lt;/Step&gt;&lt;Step&gt;```js 2console.log(1);console.log(2);</code></pre><MyComponent/></Step></CodeSurferColumns>````<h2 id="å¯¼å…¥ä»£ç æ–‡ä»¶"><a href="#å¯¼å…¥ä»£ç æ–‡ä»¶" class="headerlink" title="å¯¼å…¥ä»£ç æ–‡ä»¶"></a>å¯¼å…¥ä»£ç æ–‡ä»¶</h2><p>ä½ å¯ä»¥ä»æ–‡ä»¶ä¸­å¯¼å…¥ä»£ç ï¼Œè€Œä¸å¿…åœ¨ä»£ç å—ä¸­ç¼–å†™ä»£ç ï¼š</p><p>â€‹````md<br>import { CodeSurfer } from â€œcode-surferâ€</p><CodeSurfer><p>â€‹```js 5:10 file=./my-code.js</p><pre><code>```js file=./my-other-code.js</code></pre></CodeSurfer>````<h2 id="è¡Œå·"><a href="#è¡Œå·" class="headerlink" title="è¡Œå·"></a>è¡Œå·</h2><p>è¦æ˜¾ç¤ºè¡Œå·ï¼Œå°†<code>showNumbers</code>æ·»åŠ åˆ°è¯­è¨€æ ‡è¯†ä¹‹å:</p><p>â€‹````md<br>import { CodeSurfer } from â€œcode-surferâ€</p><CodeSurfer><p>â€‹```js showNumbers<br>console.log(1);<br>console.log(2);<br>console.log(3);</p><pre><code>```jsconsole.log(1);console.log(2);console.log(4);</code></pre></CodeSurfer>````<h2 id="å·®å¼‚"><a href="#å·®å¼‚" class="headerlink" title="å·®å¼‚"></a>å·®å¼‚</h2><p>ä»£ç å—ä¹Ÿå¯ä»¥å±•ç¤ºå·®å¼‚ã€‚ This is particularly useful when using empty diffs for code that doesnâ€™t change:</p><p>ä»£ç å—ä¹Ÿå¯ä»¥å±•ç¤ºå·®å¼‚ã€‚ å½“è®²ç©ºçš„diffsç”¨åœ¨ä¸å˜çš„ä»£ç å—æ—¶å€™ï¼Œè¿™ç‰¹åˆ«æœ‰ç”¨ï¼š</p><p>â€‹````md<br>import { CodeSurfer } from â€œcode-surferâ€</p><CodeSurfer><p>â€‹```js<br>console.log(1);<br>console.log(2);<br>console.log(3);</p><pre><code>```diff 1 subtitle=&quot;log 1&quot;</code></pre><pre class=" language-diff"><code class="language-diff"></code></pre><pre class=" language-diff"><code class="language-diff"></code></pre></CodeSurfer>````<h2 id="ç›¸å…³"><a href="#ç›¸å…³" class="headerlink" title="ç›¸å…³"></a>ç›¸å…³</h2><ul><li><a href="https://github.com/jxnblk/mdx-deck" target="_blank" rel="noopener">MDX Deck</a></li><li><a href="https://github.com/jamiebuilds/spectacle-code-slide" target="_blank" rel="noopener">spectacle-code-slide</a></li><li><a href="https://github.com/PrismJS/prism" target="_blank" rel="noopener">Prism</a></li><li><a href="https://github.com/pomber/create-code-surfer-deck" target="_blank" rel="noopener">create-code-surfer-deck</a></li><li><a href="https://github.com/pomber/gatsby-waves" target="_blank" rel="noopener">Gatsby Waves</a></li></ul><h2 id="æ”¯æŒ-Code-Surfer"><a href="#æ”¯æŒ-Code-Surfer" class="headerlink" title="æ”¯æŒ Code Surfer"></a>æ”¯æŒ Code Surfer</h2><p>ä½ å¯ä»¥å¸®åŠ©ä¿æŒè¯¥é¡¹ç›®çš„ç”Ÿå‘½ã€‚</p><h3 id="èµåŠ©å•†"><a href="#èµåŠ©å•†" class="headerlink" title="èµåŠ©å•†"></a>èµåŠ©å•†</h3><p>é€šè¿‡æˆä¸ºèµåŠ©è€…æ¥æ”¯æŒè¯¥é¡¹ç›®ã€‚ä½ çš„å¾½æ ‡å°†æ˜¾ç¤ºåœ¨æ­¤å¤„ï¼Œå¹¶å¸¦æœ‰æŒ‡å‘ä½ ç½‘ç«™çš„é“¾æ¥ã€‚ [<a href="https://opencollective.com/code-surfer#sponsor" target="_blank" rel="noopener">æˆä¸ºèµåŠ©å•†</a>]</p><p><a href="https://opencollective.com/code-surfer/sponsor/0/website" target="_blank"><img src="https://opencollective.com/code-surfer/sponsor/0/avatar.svg"></a></p><h3 id="æ”¯æŒè€…"><a href="#æ”¯æŒè€…" class="headerlink" title="æ”¯æŒè€…"></a>æ”¯æŒè€…</h3><p>æ„Ÿè°¢æ‰€æœ‰çš„æ”¯æŒè€…! ğŸ™ [<a href="https://opencollective.com/code-surfer#backer" target="_blank" rel="noopener">æˆä¸ºæ”¯æŒè€…</a>]</p><p><a href="https://opencollective.com/code-surfer#backers" target="_blank"><img src="https://opencollective.com/code-surfer/backers.svg?width=890"></a></p><h3 id="è´¡çŒ®è€…"><a href="#è´¡çŒ®è€…" class="headerlink" title="è´¡çŒ®è€…"></a>è´¡çŒ®è€…</h3><p>è¿™ä¸ªé¡¹ç›®çš„å­˜åœ¨è¦æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…ã€‚<br><img src="https://opencollective.com/code-surfer/contributors.svg?width=890&button=false" /></p><p>````</p>]]></content>
      
      
      <categories>
          
          <category> ç¿»è¯‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> code-surfer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨nuxtjsä¸­ç»„ç»‡apiè°ƒç”¨</title>
      <link href="/2020/04/20/front-end/axios-in-nuxt/"/>
      <url>/2020/04/20/front-end/axios-in-nuxt/</url>
      
        <content type="html"><![CDATA[<p>å¯¹ä¸apiçš„ç»„ç»‡è°ƒç”¨ï¼Œnuxtjsçš„å®˜æ–¹æ–‡æ¡£éƒ½æ˜¯<code>axios.get(&#39;https://jsonplaceholder.typicode.com/users&#39;)</code>è¿™æ ·çš„æ ¼å¼ã€‚ç®€å•çš„ç”¨ä¸€ç”¨ï¼Œä¹Ÿé—®é¢˜ä¸å¤§ï¼Œä½†æ˜¯é¡¹ç›®ä¸€å¤§ä¹‹åï¼Œå¯¹è¯·æ±‚urlçš„ç®¡ç†ï¼Œå‰ç½®ï¼Œåç½®æ‹¦æˆªå™¨çš„å¤„ç†ï¼Œå°±æ¯”è¾ƒéº»çƒ¦äº†ã€‚</p><h3 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" class="headerlink" title="æ‹¦æˆªå™¨"></a>æ‹¦æˆªå™¨</h3><p>æ‹¦æˆªå™¨çš„è®¾ç½®ç›¸å¯¹ç®€å•ï¼Œå®˜æ–¹æ–‡æ¡£ä¹Ÿæœ‰ä»‹ç»ã€‚</p><p>è¿™é‡Œä¼ å…¥çš„å‚æ•°æ˜¯<code>context</code>,<code>$axios, store</code>éƒ½æ˜¯æŒ‚è½½åœ¨å®ƒä¸Šé¢çš„å±æ€§ã€‚</p><p>ä¸è¦ä½¿ç”¨ <code>import axios from &#39;axios&#39;</code>çš„å½¢å¼,åœ¨<code>nuxt</code>ä¸­ï¼Œ<code>axios</code>å¯ä»¥åœ¨æœåŠ¡ç«¯ï¼Œå’Œå®¢æˆ·ç«¯ä¸¤ç§ç¯å¢ƒæ‰§è¡Œï¼Œæ¡†æ¶å·²ç»å¯¹è¿™ä¸¤ç§æƒ…å†µåšäº†å°è£…ï¼Œç›´æ¥åœ¨æ’ä»¶ç›®å½•å¼•ç”¨<code>axios</code>å°±å¯ä»¥</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// plugins/axios.js</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">{</span> $axios<span class="token punctuation">,</span> store <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  $axios<span class="token punctuation">.</span><span class="token function">onRequest</span><span class="token punctuation">(</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">)</span>    store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'showloading'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> config  <span class="token punctuation">}</span><span class="token punctuation">)</span>  $axios<span class="token punctuation">.</span><span class="token function">onResponse</span><span class="token punctuation">(</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'showloading'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> response    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>  $axios<span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'showloading'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><h3 id="api-çš„ç»„ç»‡å’Œåˆ†ç¦»"><a href="#api-çš„ç»„ç»‡å’Œåˆ†ç¦»" class="headerlink" title="api çš„ç»„ç»‡å’Œåˆ†ç¦»"></a>api çš„ç»„ç»‡å’Œåˆ†ç¦»</h3><p>ä½†æ˜¯æ€ä¹ˆæ ·åˆ†ç¦»<code>api</code>?</p><h4 id="1-ä¾èµ–æ³¨å…¥çš„æ–¹å¼æ³¨å…¥axios"><a href="#1-ä¾èµ–æ³¨å…¥çš„æ–¹å¼æ³¨å…¥axios" class="headerlink" title="1. ä¾èµ–æ³¨å…¥çš„æ–¹å¼æ³¨å…¥axios"></a>1. ä¾èµ–æ³¨å…¥çš„æ–¹å¼æ³¨å…¥<code>axios</code></h4><p>é€šè¿‡å‡½æ•°å‚æ•°çš„å½¢å¼ï¼ŒæŠŠ<code>axios</code>æ³¨å…¥åˆ°ä¸Šä¸‹æ–‡ä¸­ï¼Œç›´æ¥è°ƒç”¨ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// api/index.js</span><span class="token comment" spellcheck="true">// é«˜é˜¶å‡½æ•°</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span>axios<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token function">index</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/word'</span><span class="token punctuation">,</span> params<span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h4 id="2-ä½¿ç”¨nuxtjsæ’ä»¶æ³¨å…¥axios"><a href="#2-ä½¿ç”¨nuxtjsæ’ä»¶æ³¨å…¥axios" class="headerlink" title="2.ä½¿ç”¨nuxtjsæ’ä»¶æ³¨å…¥axios"></a>2.ä½¿ç”¨<code>nuxtjs</code>æ’ä»¶æ³¨å…¥<code>axios</code></h4><ul><li>æˆ‘ä»¬å¦‚ä½•åœ¨æ•´ä¸ªNuxtåº”ç”¨ç¨‹åºä¸­<strong>è®¿é—®</strong><code>api</code>ï¼Ÿ</li><li>æˆ‘ä»¬å¦‚ä½•ä»Nuxtæ¨¡å—æ­£ç¡®<strong>ä¼ å…¥</strong> axioså®ä¾‹ï¼Ÿ</li></ul><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// plugins/axios-api-plugin.js</span><span class="token keyword">import</span> createApi <span class="token keyword">from</span> <span class="token string">'~/api/index'</span><span class="token comment" spellcheck="true">// è¿™é‡Œctxä¹Ÿå¯ä»¥è®¿é—®åˆ°store</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> inject<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// æ³¨å…¥ä¸Šä¸‹æ–‡</span>  <span class="token comment" spellcheck="true">// æŒ‚è½½åˆ°vueå®ä¾‹ä¸Šé¢ (ç»„ä»¶ä¸­ä½¿ç”¨ï¼šthis.$api)</span>  <span class="token keyword">const</span> apiAxios <span class="token operator">=</span> <span class="token function">createApi</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>$axios<span class="token punctuation">)</span>  <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'api'</span><span class="token punctuation">,</span> <span class="token function">apiAxios</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><p>å†æŠŠä¸Šé¢çš„ä»£ç ä½œä¸ºæ’ä»¶é…ç½®åˆ°<code>plugins</code>ä¸­å°±å¯ä»¥åƒè¿™æ ·è°ƒç”¨apiï¼š</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// å®¢æˆ·ç«¯ </span><span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$api<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token comment" spellcheck="true">// æœåŠ¡ç«¯ asyncData /fetch</span><span class="token keyword">await</span> ctx<span class="token punctuation">.</span>app<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span></code></pre><p>è¿™æ ·å°è£…ä¹‹åï¼Œæ¨¡å—æ¸…æ™°ï¼Œå¯ç»´æŠ¤æ€§å¤§å¤§å¢åŠ ã€‚</p><h3 id="å¯è¿è¡Œç¤ºä¾‹ï¼š"><a href="#å¯è¿è¡Œç¤ºä¾‹ï¼š" class="headerlink" title="å¯è¿è¡Œç¤ºä¾‹ï¼š"></a>å¯è¿è¡Œç¤ºä¾‹ï¼š</h3><p><a href="https://github.com/justOneWord/one_word_web" target="_blank" rel="noopener">https://github.com/justOneWord/one_word_web</a></p><h4 id="å‚è€ƒèµ„æ–™ï¼š"><a href="#å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="å‚è€ƒèµ„æ–™ï¼š"></a>å‚è€ƒèµ„æ–™ï¼š</h4><p><a href="https://blog.lichter.io/posts/nuxt-api-call-organization-and-decoupling/" target="_blank" rel="noopener">https://blog.lichter.io/posts/nuxt-api-call-organization-and-decoupling/</a></p><p><a href="https://codesandbox.io/s/github/manniL/nuxt-decouple-and-organize-api-calls" target="_blank" rel="noopener">https://codesandbox.io/s/github/manniL/nuxt-decouple-and-organize-api-calls</a></p><p><a href="https://zh.nuxtjs.org/api/context" target="_blank" rel="noopener">https://zh.nuxtjs.org/api/context</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nuxt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºç¡€Linuxå­¦ä¹ </title>
      <link href="/2020/03/29/ops/learnlinux/"/>
      <url>/2020/03/29/ops/learnlinux/</url>
      
        <content type="html"><![CDATA[<p>ç°åœ¨çš„æœåŠ¡éƒ½æ˜¯éƒ¨ç½²åœ¨å®å¡”çš„åŸºç¡€ä¸Šï¼ŒåŸºæœ¬æ˜¯0æŠ€æœ¯è¦æ±‚ï¼Œå­¦ä¹ Linuxï¼Œå‡†å¤‡åœ¨ä¸‹åŠå¹´çš„æœåŠ¡æ¢æˆåŸç”Ÿçš„linuxï¼Œä¸å†ä¾èµ–ç¬¬ä¸‰æ–¹æ§åˆ¶é¢æ¿ã€‚ä»¥ä¸‹å­¦ä¹ éƒ½æ˜¯ä»¥<code>Centos 7</code>ä¸ºåŸºç¡€ã€‚</p><h3 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h3><ol><li><p><code>init 0</code>: å…³æœº</p></li><li><p><code>init 6</code>: é‡å¯</p></li><li><p><code>ip addr</code>: è·å– ip åœ°å€</p></li><li><p><code>pwd</code>: æ˜¾ç¤ºå½“å‰è·¯å¾„</p></li><li><p><code>clear</code>æˆ–è€…<code>ctrl + l</code>:  æ¸…å±</p></li><li><p><code>history</code> ï¼šæŸ¥çœ‹å†å²å‘½ä»¤</p></li><li><p><code>! + num</code>ï¼šä½¿ç”¨å†å²å‘½ä»¤</p></li></ol><h3 id="ç”¨æˆ·æ“ä½œ"><a href="#ç”¨æˆ·æ“ä½œ" class="headerlink" title="ç”¨æˆ·æ“ä½œ"></a>ç”¨æˆ·æ“ä½œ</h3><ol><li>æ·»åŠ ç”¨æˆ·ï¼š<code>useradd zhangsan</code></li><li>è®¾ç½®å¯†ç ï¼š<code>passwd zhangsan</code></li><li>åˆ é™¤ç”¨æˆ·ï¼š<code>userdel -rf zhangsan</code></li></ol><h3 id="Linux-å¸¸è§ç›®å½•ç»“æ„"><a href="#Linux-å¸¸è§ç›®å½•ç»“æ„" class="headerlink" title="Linux å¸¸è§ç›®å½•ç»“æ„"></a>Linux å¸¸è§ç›®å½•ç»“æ„</h3><p><strong>root ç›®å½•ï¼š</strong>linxu è¶…çº§æƒé™root çš„ä¸»ç›®å½•ã€‚*</p><p><strong>home ç›®å½•ï¼š</strong>ç³»ç»Ÿé»˜è®¤çš„ç”¨æˆ·ä¸»ç›®å½•ï¼Œå¦‚æœæ·»åŠ ç”¨æˆ·æ˜¯ä¸æŒ‡å®šç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œé»˜è®¤åœ¨/home<br>ä¸‹åˆ›å»ºä¸ç”¨æˆ·åŒåçš„æ–‡ä»¶å¤¹ã€‚*</p><p><strong>bin ç›®å½•ï¼š</strong>å­˜æ”¾ç³»ç»Ÿæ‰€éœ€è¦çš„é‡è¦å‘½ä»¤ï¼Œæ¯”å¦‚æ–‡ä»¶æˆ–ç›®å½•æ“ä½œçš„å‘½ä»¤lsã€cpã€mkdir ç­‰ï¼Œå¦å¤–<br>/usr/bin ä¹Ÿæ”¾äº†ä¸€äº›ç³»ç»Ÿå‘½ä»¤ã€‚è¿™äº›å‘½ä»¤å¯¹åº”ç€æ–‡ä»¶éƒ½æ˜¯å¯ä»¥æ‰§è¡Œçš„ã€‚*</p><p><strong>sbin ç›®å½•ï¼š</strong>å­˜æ”¾åªæœ‰root è¶…çº§ç®¡ç†å‘˜æ‰èƒ½æ‰§è¡Œçš„ç¨‹åº*</p><p><strong>boot ç›®å½•ï¼š</strong>å­˜æ”¾ç€linux å¯åŠ¨æ—¶å†…æ ¸åŠå¼•å¯¼ç³»ç»Ÿç¨‹åºæ‰€éœ€è¦çš„æ ¸å¿ƒæ–‡ä»¶ï¼Œå†…æ ¸æ–‡ä»¶å’Œgrub<br>ç³»ç»Ÿå¼•å¯¼ç®¡ç†å™¨éƒ½ä½äºæ­¤ç›®å½•ã€‚</p><p><strong>dev ç›®å½•ï¼š</strong>å­˜æ”¾è¿™linux ç³»ç»Ÿä¸‹çš„è®¾å¤‡æ–‡ä»¶ï¼Œå¦‚å…‰é©±ç­‰ã€‚</p><p><strong>etc ç›®å½•ï¼š</strong>å­˜æ”¾ç³»ç»Ÿçš„é…ç½®æ–‡ä»¶ï¼Œä½œä¸ºä¸€äº›è½¯ä»¶å¯åŠ¨æ—¶é»˜è®¤é…ç½®æ–‡ä»¶è¯»å–çš„ç›®å½•ï¼Œå¦‚/etc/fstal<br>å­˜æ”¾ç³»ç»Ÿåˆ†æä¿¡æ¯ã€‚*</p><p><strong>mnt ç›®å½•ï¼š</strong> ä¸´æ—¶æ–‡ä»¶æŒ‚è½½ç›®å½•ã€ä¹Ÿå¯ä»¥è¯´æ˜¯æµ‹è¯•ç›®å½•</p><p><strong>opt ç›®å½•ï¼š</strong> ç¬¬ä¸‰æ–¹è½¯ä»¶å­˜æ”¾ç›®å½•*</p><p><strong>media ç›®å½•ï¼š</strong>å³æ’å³ç”¨å‹è®¾å¤‡æŒ‚è½½ç‚¹ï¼Œå…‰ç›˜é»˜è®¤æŒ‚è½½ç‚¹ï¼Œé€šå¸¸å…‰ç›˜æŒ‚è½½äº/mnt/cdrom ä¸‹ã€‚</p><p><strong>tmp ç›®å½•ï¼š</strong>ä¸´æ—¶æ–‡ä»¶å¤¹ã€‚*</p><p><strong>usr ç›®å½•ï¼š</strong>åº”ç”¨ç¨‹åºå­˜æ”¾ç›®å½•ï¼Œå®‰è£…linux è½¯ä»¶åŒ…æ˜¯é»˜è®¤å®‰è£…åˆ°/usr/local ç›®å½•ä¸‹ã€‚*</p><p><strong>var ç›®å½•ï¼š</strong>ç›®å½•ç»å¸¸å˜åŠ¨ï¼Œ/var/log å­˜æ”¾ç³»ç»Ÿæ—¥å¿—ï¼Œ/var/log å­˜æ”¾ç³»ç»Ÿåº“æ–‡ä»¶ã€‚*</p><h3 id="Linux-æ–‡ä»¶ç®¡ç†"><a href="#Linux-æ–‡ä»¶ç®¡ç†" class="headerlink" title="Linux æ–‡ä»¶ç®¡ç†"></a>Linux æ–‡ä»¶ç®¡ç†</h3><ol><li><p>åˆ›å»ºæ–‡ä»¶ï¼š </p><p><code>touch file</code></p></li><li><p>åˆ é™¤æ–‡ä»¶ï¼š</p><p><code>rm -rf file</code></p><p><strong>-r:</strong> é€’å½’çš„åˆ é™¤ç›®å½•ä¸‹é¢æ–‡ä»¶ä»¥åŠå­ç›®å½•ä¸‹æ–‡</p><p><strong>-f:</strong> å¼ºåˆ¶åˆ é™¤ï¼Œå¿½ç•¥ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œä¸ç»™å‡ºæç¤º</p></li><li><p>ç§»åŠ¨æ–‡ä»¶/ä¿®æ”¹æ–‡ä»¶å</p><p><code>mv file1 file2</code></p></li><li><p>æŸ¥çœ‹æ–‡ä»¶å†…å®¹</p><p><code>cat file</code></p></li><li><p>å¤åˆ¶æ–‡ä»¶</p><p><code>cp file1 file2</code></p></li><li><p>æ‰¹é‡åˆ›å»ºæ–‡ä»¶</p><pre class=" language-shell"><code class="language-shell">touch file{1..10}touch -rd file{1..10}</code></pre></li><li><p>ç¼–è¾‘æ–‡ä»¶</p><p><code>vi file</code></p></li><li><p>ç®¡é“æ–¹å¼æŸ¥çœ‹æ–‡ä»¶</p><pre class=" language-shell"><code class="language-shell">cat file | head -3 // æŸ¥çœ‹å‰3è¡Œcat file | tail -3 // æŸ¥çœ‹å3è¡Œ</code></pre></li><li><p>æ–‡ä»¶æŸ¥æ‰¾</p><p>æ–¹æ³•1ï¼š</p><p><code>find ç›®å½• -name æ–‡ä»¶å</code></p><p>æ–¹æ³•2ï¼ˆæ›´å¿«ï¼‰ï¼š</p><pre class=" language-bash"><code class="language-bash">// å»ºç«‹æ•°æ®åº“updatedb// æ•°æ®åº“ä¸­æŸ¥æ‰¾<span class="token function">locate</span> aa.txt </code></pre></li></ol><h3 id="Linux-ç›®å½•ç®¡ç†"><a href="#Linux-ç›®å½•ç®¡ç†" class="headerlink" title="Linux ç›®å½•ç®¡ç†"></a>Linux ç›®å½•ç®¡ç†</h3><ol><li><p>åˆ›å»ºç›®å½•</p><p><code>mkdir dir1 dir2 dir3</code></p></li><li><p>é‡å‘½å/ç§»åŠ¨ç›®å½•</p><p><code>mv dir 1 dir2</code></p></li><li><p>åˆ é™¤ç›®å½•</p><p><code>rm -rf dir1</code></p></li><li><p>å¤åˆ¶ç›®å½•</p><p><code>cp -rf dir1 dir2</code></p></li><li><p>æ˜¾ç¤ºç›®å½•ç»“æ„</p><p><code>tree(éœ€è¦å®‰è£…)</code></p></li></ol><h3 id="Linux-æ–‡ä»¶ç±»å‹"><a href="#Linux-æ–‡ä»¶ç±»å‹" class="headerlink" title="Linux æ–‡ä»¶ç±»å‹"></a>Linux æ–‡ä»¶ç±»å‹</h3><ol><li><p>â€‹    æŸ¥çœ‹æ–‡ä»¶ç±»å‹<code>ll</code></p></li><li><p>â€‹    å¸¸è§æ–‡ä»¶ç±»å‹</p><pre class=" language-shell"><code class="language-shell">-rw-râ€”râ€” "-â€œå¼€å¤´çš„éƒ½æ˜¯æ™®é€šæ–‡ä»¶;drw-râ€”râ€” "d"å¼€å¤´çš„æ˜¯ç›®å½•æ–‡ä»¶;lrw-râ€”râ€” "l"å¼€å¤´çš„æ–‡ä»¶éƒ½æ˜¯è½¯é“¾æ¥æ–‡ä»¶;</code></pre></li></ol><h3 id="Linux-æ‰“åŒ…å‹ç¼©"><a href="#Linux-æ‰“åŒ…å‹ç¼©" class="headerlink" title="Linux æ‰“åŒ…å‹ç¼©"></a>Linux æ‰“åŒ…å‹ç¼©</h3><ol><li><p>Zip</p><p>å‹ç¼©ï¼š</p><p><code>zip -r public.zip public</code></p><p>-r    è¡¨ç¤ºå°†æŒ‡å®šçš„ç›®å½•ä¸‹çš„æ‰€æœ‰å­ç›®å½•ä»¥åŠæ–‡ä»¶ä¸€èµ·å¤„ç†</p><p>è§£å‹ï¼š</p><p><code>unzip public.zip -d dir</code></p><p>æŸ¥çœ‹å‹ç¼©åŒ…å†…å®¹</p><p><code>unzip -l public.zip</code></p></li><li><p>gz å‹ç¼©åŒ…</p><pre class=" language-shell"><code class="language-shell">tar czvf public.tar.gz public // å‹ç¼©tar xzvf public.atr.gz // è§£å‹tar tf public.atr.gz // æŸ¥çœ‹tar cvf public.tar public // ä»…æ‰“åŒ…ï¼Œä¸å‹ç¼©tar xvf public.tar // è§£å‹æ— gzçš„åŒ…</code></pre></li></ol><h3 id="Linux-åˆ«åç®¡ç†"><a href="#Linux-åˆ«åç®¡ç†" class="headerlink" title="Linux åˆ«åç®¡ç†"></a>Linux åˆ«åç®¡ç†</h3><pre><code>// æ·»åŠ åˆ«åalias aa=&#39;cat /etc/httpd/conf/httpd.conf&#39;// åˆ é™¤åˆ«åunalias aa// æŸ¥çœ‹åˆ«åalias</code></pre><h3 id="å†…å­˜ã€cup-ç®¡ç†"><a href="#å†…å­˜ã€cup-ç®¡ç†" class="headerlink" title="å†…å­˜ã€cup ç®¡ç†"></a>å†…å­˜ã€cup ç®¡ç†</h3><p><code>top</code></p><ol><li><p>ç¬¬ä¸€è¡Œ</p><pre class=" language-shell"><code class="language-shell">top - 15:31:47 up 9:30, 3 users, load average: 0.00, 0.02, 0.05</code></pre><p>ä¾æ¬¡å¯¹åº”ï¼šç³»ç»Ÿå½“å‰æ—¶é—´ up ç³»ç»Ÿåˆ°ç›®å‰ä¸ºæ­¢i è¿è¡Œçš„æ—¶é—´ï¼Œ å½“å‰ç™»é™†ç³»ç»Ÿçš„ç”¨æˆ·æ•°é‡ï¼Œ load average å<br>é¢çš„ä¸‰ä¸ªæ•°å­—åˆ†åˆ«è¡¨ç¤ºè·ç¦»ç°åœ¨ä¸€åˆ†é’Ÿï¼Œäº”åˆ†é’Ÿï¼Œåäº”åˆ†é’Ÿçš„è´Ÿè½½æƒ…å†µã€‚</p></li></ol><ol start="2"><li><p>ç¬¬äºŒè¡Œ</p><pre><code>Tasks: 133 total, 1 running, 132 sleeping, 0 stopped, 0 zombie</code></pre><p>ä¾æ¬¡å¯¹åº”ï¼štasks è¡¨ç¤ºä»»åŠ¡ï¼ˆè¿›ç¨‹ï¼‰ï¼Œ133 total åˆ™è¡¨ç¤ºç°åœ¨æœ‰133 ä¸ªè¿›ç¨‹ï¼Œå…¶ä¸­å¤„äºè¿è¡Œä¸­<br>çš„æœ‰1 ä¸ªï¼Œ132 ä¸ªåœ¨ä¼‘çœ ï¼ˆæŒ‚èµ·ï¼‰ï¼Œstopped çŠ¶æ€å³åœæ­¢çš„è¿›ç¨‹æ•°ä¸º0ï¼Œzombie çŠ¶æ€å³åƒµå°¸<br>çš„è¿›ç¨‹æ•°ä¸º0 ä¸ªã€‚</p></li><li><p>top å‘½ä»¤çš„ç¬¬ä¸‰è¡Œï¼Œcpu çŠ¶æ€ï¼š</p><pre class=" language-shell"><code class="language-shell">%Cpu(s): 0.2 us, 0.4 sy, 0.0 ni, 99.3 id, 0.0 wa, 0.0 hi, 0.1 si, 0.0 st</code></pre><p><strong>åªçœ‹ç©ºé—²å°±å¯ä»¥äº†</strong>ï¼šcpu ç©ºé—²ç‡ä¸º99.3%</p><p>ä¾æ¬¡å¯¹åº”ï¼š<br><strong>us</strong>:user ç”¨æˆ·ç©ºé—´å ç”¨cpu çš„ç™¾åˆ†æ¯”<br><strong>sy</strong>:system å†…æ ¸ç©ºé—´å ç”¨cpu çš„ç™¾åˆ†æ¯”<br><strong>ni</strong>:niced æ”¹å˜è¿‡ä¼˜å…ˆçº§çš„è¿›ç¨‹å ç”¨cpu çš„ç™¾åˆ†æ¯”<br><strong>id</strong>:ç©ºé—²cpu ç™¾åˆ†æ¯”<br><strong>wa</strong>:IO wait IO ç­‰å¾…å ç”¨cpu çš„ç™¾åˆ†æ¯”<br><strong>hi</strong>:Hardware IRQ ç¡¬ä¸­æ–­å ç”¨cpu çš„ç™¾åˆ†æ¯”<br><strong>si</strong>:software è½¯ä¸­æ–­å ç”¨cpu çš„ç™¾åˆ†æ¯”<br><strong>st</strong>:è¢«hypervisor å·å»çš„æ—¶é—´</p></li><li><p>top å‘½ä»¤çš„ç¬¬å››è¡Œï¼Œå†…å­˜çŠ¶æ€ï¼š</p><pre><code>KiB Mem : 2897496 total, 1995628 free, 191852 used, 710016 buff/cache</code></pre><p>æ€»å†…å­˜:2.76g ç©ºé—²ï¼š1995628/1024/1024=1.9g å·²ç»ä½¿ç”¨0.18g ç¼“å­˜åŒºå†…å­˜0.67g<br>ç¼“å†²åŒºæ˜¯ä»ä¸»å†…å­˜ä¸­ç‰¹åœ°é¢„ç•™å‡ºçš„å†…å­˜ï¼Œç”¨æ¥å­˜æ”¾ç‰¹å®šçš„ä¸€äº›ä¿¡æ¯ï¼Œä¾‹å¦‚ä»ç£ç›˜ä¸­å–å¾—çš„æ–‡ä»¶è¡¨ï¼Œç¨‹åºæ­£<br>åœ¨è¯»å–çš„å†…å®¹ç­‰ç­‰</p></li><li><p>top å‘½ä»¤ç¬¬ä¸ƒè¡Œï¼Œå„è¿›ç¨‹çš„ç›‘æ§ï¼š</p><pre><code>PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND</code></pre><p>ä¾æ¬¡å¯¹åº”ï¼š<br><strong>PID</strong> â€” è¿›ç¨‹id<br><strong>USER</strong> â€” è¿›ç¨‹æ‰€æœ‰è€…<br><strong>PR</strong> â€” è¿›ç¨‹ä¼˜å…ˆçº§<br><strong>NI</strong> â€” nice å€¼ã€‚è´Ÿå€¼è¡¨ç¤ºé«˜ä¼˜å…ˆçº§ï¼Œæ­£å€¼è¡¨ç¤ºä½ä¼˜å…ˆçº§<br><strong>VIRT</strong> â€” è¿›ç¨‹ä½¿ç”¨çš„è™šæ‹Ÿå†…å­˜æ€»é‡ï¼Œå•ä½kbã€‚VIRT=SWAP+RES</p><p><strong>RES</strong> â€” è¿›ç¨‹ä½¿ç”¨çš„ã€æœªè¢«æ¢å‡ºçš„ç‰©ç†å†…å­˜å¤§å°ï¼Œå•ä½kbã€‚RES=CODE+DATA<br><strong>SHR</strong> â€” å…±äº«å†…å­˜å¤§å°ï¼Œå•ä½kb<br><strong>S</strong> â€” è¿›ç¨‹çŠ¶æ€ã€‚D=ä¸å¯ä¸­æ–­çš„ç¡çœ çŠ¶æ€R=è¿è¡ŒS=ç¡çœ T=è·Ÿè¸ª/åœæ­¢Z=åƒµå°¸è¿›ç¨‹<br>**%CPU** â€” ä¸Šæ¬¡æ›´æ–°åˆ°ç°åœ¨çš„CPU æ—¶é—´å ç”¨ç™¾åˆ†æ¯”<br>**%MEM** â€” è¿›ç¨‹ä½¿ç”¨çš„ç‰©ç†å†…å­˜ç™¾åˆ†æ¯”<br><strong>TIME+</strong> â€” è¿›ç¨‹ä½¿ç”¨çš„CPU æ—¶é—´æ€»è®¡ï¼Œå•ä½1/100 ç§’<br><strong>COMMAND</strong> â€” è¿›ç¨‹åç§°ï¼ˆå‘½ä»¤å/å‘½ä»¤è¡Œï¼‰</p></li></ol><p><code>uptime</code></p><ol><li><p>uptime</p><pre><code>top - 15:31:47 up 9:30, 3 users, load average: 0.00, 0.02, 0.05</code></pre><p>1.æœåŠ¡å™¨å·¥ä½œæ—¶é—´<br>2.åœ¨çº¿ç”¨æˆ·<br>3.å¹³å‡è´Ÿè½½ä¸€åˆ†é’Ÿï¼Œäº”åˆ†é’Ÿï¼Œåäº”åˆ†é’Ÿçš„è´Ÿè½½æƒ…å†µ</p></li></ol><h3 id="æŸ¥çœ‹ç™»å½•ç”¨æˆ·"><a href="#æŸ¥çœ‹ç™»å½•ç”¨æˆ·" class="headerlink" title="æŸ¥çœ‹ç™»å½•ç”¨æˆ·"></a>æŸ¥çœ‹ç™»å½•ç”¨æˆ·</h3><ol><li><p><code>who</code>:æ˜¾ç¤ºå½“å‰æ­£åœ¨ç³»ç»Ÿä¸­çš„æ‰€æœ‰ç”¨æˆ·åå­—ï¼Œä½¿ç”¨ç»ˆç«¯è®¾å¤‡å·ï¼Œæ³¨å†Œæ—¶é—´</p></li><li><p><code>who am i</code>: æ˜¾ç¤ºå‡ºå½“å‰ç»ˆç«¯ä¸Šä½¿ç”¨çš„ç”¨æˆ·</p></li><li><p><code>last</code>:æ˜¾ç¤ºè¿‘æœŸç”¨æˆ·æˆ–ç»ˆç«¯çš„ç™»å½•æƒ…å†µ</p></li></ol><h3 id="è¿›ç¨‹ç®¡ç†"><a href="#è¿›ç¨‹ç®¡ç†" class="headerlink" title="è¿›ç¨‹ç®¡ç†"></a>è¿›ç¨‹ç®¡ç†</h3><ol><li><p>æŸ¥çœ‹è¿›ç¨‹</p><pre class=" language-shell"><code class="language-shell">pstree # æŸ¥çœ‹è¿›ç¨‹æ ‘pstree -ap #æ˜¾ç¤ºæ‰€æœ‰è¯¦ç»†(è¿›ç¨‹ã€å­è¿›ç¨‹ã€è¿›ç¨‹å·)pstree | grep httpdpstree -ap | grep httpd</code></pre></li><li><p>å…³é—­è¿›ç¨‹</p><pre class=" language-shell"><code class="language-shell">pkill httpd # pkill è¿›ç¨‹çš„åå­—kill 2245 # è¿›ç¨‹å·kill -9 2245   # å¼ºåˆ¶æ€æ­»è¿›ç¨‹</code></pre></li></ol><h3 id="æŸ¥çœ‹ç«¯å£"><a href="#æŸ¥çœ‹ç«¯å£" class="headerlink" title="æŸ¥çœ‹ç«¯å£"></a>æŸ¥çœ‹ç«¯å£</h3><pre class=" language-shell"><code class="language-shell">netstat -tunpl |grep httpd </code></pre><p> -t æˆ–â€“tcp æ˜¾ç¤ºTCP ä¼ è¾“åè®®çš„è¿çº¿çŠ¶å†µã€‚</p><p> -u æˆ–â€“udp æ˜¾ç¤ºUDP ä¼ è¾“åè®®çš„è¿çº¿çŠ¶å†µã€‚</p><p> -n æˆ–â€“numeric ç›´æ¥ä½¿ç”¨IP åœ°å€ï¼Œè€Œä¸é€šè¿‡åŸŸåæœåŠ¡å™¨ã€‚</p><p> -p æˆ–â€“programs æ˜¾ç¤ºæ­£åœ¨ä½¿ç”¨Socket çš„ç¨‹åºè¯†åˆ«ç å’Œç¨‹åºåç§°ã€‚</p><p> -l æˆ–â€“listening æ˜¾ç¤ºç›‘æ§ä¸­çš„æœåŠ¡å™¨çš„Socketã€‚</p><h3 id="æŸ¥çœ‹ç¡¬ç›˜ä¿¡æ¯"><a href="#æŸ¥çœ‹ç¡¬ç›˜ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹ç¡¬ç›˜ä¿¡æ¯"></a>æŸ¥çœ‹ç¡¬ç›˜ä¿¡æ¯</h3><pre><code>dfdf -h # ä»¥äººä»¬æ˜“è¯»çš„æ–¹å¼æ˜¾ç¤ºï¼Œæ€»å…±å¤šå°‘g ç”¨äº†å¤šå°‘gdf /home # æŸ¥çœ‹è¯¥æ–‡ä»¶å¤¹æ‰€åœ¨ç£ç›˜çš„ä½¿ç”¨æƒ…å†µ</code></pre><h3 id="ä½¿ç”¨-systemctl-ç®¡ç†æœåŠ¡"><a href="#ä½¿ç”¨-systemctl-ç®¡ç†æœåŠ¡" class="headerlink" title="ä½¿ç”¨ systemctl ç®¡ç†æœåŠ¡"></a>ä½¿ç”¨ systemctl ç®¡ç†æœåŠ¡</h3><p>systemctl å°±æ˜¯service å’Œchkconfig è¿™ä¸¤ä¸ªå‘½ä»¤çš„æ•´åˆï¼Œåœ¨CentOS 7 å°±å¼€å§‹è¢«ä½¿ç”¨äº†,systemctl<br>æ˜¯ç³»ç»ŸæœåŠ¡ç®¡ç†å™¨å‘½ä»¤ï¼Œå®ƒå®é™…ä¸Šå°†service å’Œchkconfig è¿™ä¸¤ä¸ªå‘½ä»¤ç»„åˆåˆ°ä¸€èµ·ã€‚</p><pre class=" language-shell"><code class="language-shell">systemctl start nginx # å¯åŠ¨æœåŠ¡systemctl stop nginx # å…³é—­æœåŠ¡systemctl restart ngonx # é‡å¯æœåŠ¡systemctl enable httpd # è®¾ç½®å¼€æœºè‡ªå¯åŠ¨systemctl disable nginx # åœæ­¢å¼€æœºè‡ªå¯åŠ¨systemctl list-unit-files|grep enabled # åˆ—å‡ºæ‰€æœ‰è‡ªå¯åŠ¨æœåŠ¡systemctl reload nginx # é‡æ–°åŠ è½½é…ç½®</code></pre><h3 id="Firewakkd-é˜²ç«å¢™è®¾ç½®"><a href="#Firewakkd-é˜²ç«å¢™è®¾ç½®" class="headerlink" title="Firewakkd é˜²ç«å¢™è®¾ç½®"></a>Firewakkd é˜²ç«å¢™è®¾ç½®</h3><h4 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h4><pre class=" language-shell"><code class="language-shell">systemctl start firewalld # å¯åŠ¨systemctl stop firewalld # å…³é—­systemctl status firewalled # æŸ¥çœ‹çŠ¶æ€systemctl disable firewalld # å¼€æœºç¦ç”¨systemctl enable firewalld # å¼€æœºå¯ç”¨</code></pre><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><pre class=" language-shell"><code class="language-shell">firewall-cmd --state # æ˜¾ç¤ºçŠ¶æ€firewall-cmd --zone=public --list-ports # æŸ¥çœ‹æ‰€æœ‰æ‰“å¼€çš„ç«¯å£firewall-cmd --reload # æ›´æ–°è§„åˆ™firewall-cmd --zone=public --add-port=80/tcp --permanent  # å¼€å¯80ç«¯å£ï¼Œâ€“permanent æ°¸ä¹…ç”Ÿæ•ˆï¼Œæ²¡æœ‰æ­¤å‚æ•°é‡å¯åå¤±æ•ˆfirewall-cmd --reload # é‡æ–°è½½å…¥firewall-cmd --zone=public --query-port=80/tcp # æŸ¥çœ‹ç«¯å£firewall-cmd --zone=public --remove-port=80/tcp --permanent # åˆ é™¤</code></pre>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> è¿ç»´ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯nuxtæ¡†æ¶ssråˆä½“éªŒ</title>
      <link href="/2020/03/08/front-end/qian-duan-nuxt-kuang-jia-ssr-chu-ti-yan/"/>
      <url>/2020/03/08/front-end/qian-duan-nuxt-kuang-jia-ssr-chu-ti-yan/</url>
      
        <content type="html"><![CDATA[<h2 id="åæ§½"><a href="#åæ§½" class="headerlink" title="åæ§½"></a>åæ§½</h2><p>è´µåœˆçœŸä¹±..<code>nuxtã€nestã€next</code> ï¼Œå·²ç»å¿«å‚»å‚»åˆ†ä¸æ¸…æ¥šäº†â€¦</p><p>å‰ç«¯çš„è½¦è½®ï¼Œç¢¾å‹äº†é’æ˜¥ï¼Œè€—è´¹äº†ç²¾åŠ›ï¼Œç–²äºå¥”å‘½ï¼Œè¿˜æ˜¯å½’æœ¬æº¯æºï¼Œå¤©çŸ¥é“â€¦</p><h2 id="ä»å‰ç«¯çš„æ€§èƒ½ä¼˜åŒ–è¯´èµ·"><a href="#ä»å‰ç«¯çš„æ€§èƒ½ä¼˜åŒ–è¯´èµ·" class="headerlink" title="ä»å‰ç«¯çš„æ€§èƒ½ä¼˜åŒ–è¯´èµ·"></a>ä»å‰ç«¯çš„æ€§èƒ½ä¼˜åŒ–è¯´èµ·</h2><p>å‰ç«¯çš„æ€§èƒ½ä¼˜åŒ–ï¼Œè°·æ­Œå¯ä»¥ä¸€å¤§å †ï¼Œä»–ä»¬è¯´çš„å½“ç„¶éƒ½æ˜¯éå¸¸æœ‰é“ç†çš„ã€‚webpackæ‰“åŒ…ä¼˜åŒ–ï¼Œcdnï¼Œcssæƒé‡ï¼Œé›ªç¢§å›¾ï¼Ÿä¼¼ä¹éƒ½å¯¹ã€‚è¿˜è®°å¾—ä¸€å¼€å§‹å­¦å‰ç«¯æ—¶å€™ï¼Œç»å¸¸å¬åˆ°é›…è™å†›è§„ï¼Œæ›¾ç»çš„ä¼˜åŒ–åœ£ç»ï¼Œç°åœ¨è¿˜é€‚ç”¨å—ï¼Ÿ</p><blockquote><p>é›…è™å†›è§„ï¼š</p><ol><li>å°½é‡å‡å°‘HTTPè¯·æ±‚æ•°</li><li>ä½¿ç”¨å†…å®¹å‘å¸ƒç½‘ç»œ</li><li>æ·»åŠ Expireså¤´</li><li>å‹ç¼©ç»„ä»¶ï¼ˆä½¿ç”¨gzipç¼–ç å‹ç¼©httpå“åº”åŒ…ï¼‰</li><li>å°†æ ·å¼è¡¨æ”¾åœ¨é¡¶éƒ¨</li><li>å°†è„šæœ¬æ”¾åœ¨åº•éƒ¨</li><li>é¿å…CSSè¡¨è¾¾å¼</li><li>ä½¿ç”¨å¤–éƒ¨çš„JavaScriptå’ŒCSS</li><li>å‡å°‘DNSæŸ¥æ‰¾</li><li>ç²¾ç®€Javascript</li><li>é¿å…é‡å®šå‘</li><li>ç§»é™¤é‡å¤è„šæœ¬</li><li>é…ç½®ETag</li><li>ä½¿Ajaxå¯ç¼“å­˜</li></ol></blockquote><p>æˆ‘ä»¬ç°åœ¨åŸºæœ¬ä¸Šè¿˜æ˜¯åœ¨éµå®ˆè¿™äº›è§„åˆ™ï¼Œåªæ˜¯æœ‰æ—¶å€™å¹¶ä¸æ„ŸçŸ¥ï¼Œæ‰“åŒ…å·¥å…·å¸®æˆ‘ä»¬åšäº†å¤§éƒ¨åˆ†çš„äº‹æƒ…ã€‚</p><p>å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼ŒåŠ å¿«ä¼ è¾“ï¼ŒåŠ å¿«æ¸²æŸ“ã€‚ç°åœ¨çš„spaé¡µé¢ï¼Œä¸åˆ©äºseoï¼ˆè™½ç„¶å·²ç»ä¸é‡è¦äº†ï¼‰ï¼Œæ— æ³•é¿å…åŠ è½½ç™½å±çš„é—®é¢˜ã€‚</p><p>å†å²ï¼Œåœ¨å¬å”¤æ–°çš„è§£å†³æ–¹æ¡ˆã€‚</p><h3 id="é«˜å¤§ä¸Šçš„ssræ˜¯ä»€ä¹ˆ"><a href="#é«˜å¤§ä¸Šçš„ssræ˜¯ä»€ä¹ˆ" class="headerlink" title="é«˜å¤§ä¸Šçš„ssræ˜¯ä»€ä¹ˆ"></a>é«˜å¤§ä¸Šçš„ssræ˜¯ä»€ä¹ˆ</h3><p>æœåŠ¡ç«¯æ¸²æŸ“ï¼Œå¬èµ·æ¥å°±æŒºé«˜å¤§ä¸Šçš„ã€‚ç„¶è€Œï¼Œè¿™å¹¶ä¸æ˜¯ä»€ä¹ˆæ–°æŠ€æœ¯ã€‚åœ¨å¾ˆä¹…å¾ˆä¹…ä»¥å‰<code>php</code>çš„<code>smarty</code>æ¨¡æ¿å¼•æ“ï¼Œ<code>java</code>çš„<code>jsp</code>ï¼Œéƒ½å¯ä»¥ç§°ä¸ºæœåŠ¡ç«¯æ¸²æŸ“ã€‚ç®€å•æ¥è¯´ï¼ŒæœåŠ¡ç«¯ï¼Œç»™åˆ°å®¢æˆ·ç«¯çš„æ˜¯å·²ç»æ¸²æŸ“å¥½çš„htmlï¼Œæµè§ˆå™¨å¯ä»¥ç«‹å³è§£æï¼Œå‘ˆç°é¡µé¢ã€‚ç°åœ¨çš„ä¸»æµæ¡†æ¶éƒ½æ˜¯ç©ºé¡µé¢ï¼Œç„¶ååŠ è½½jsï¼Œé€šè¿‡jsæ¸²æŸ“å‡ºé¡µé¢ã€‚</p><p>ä¸€èˆ¬çš„spaé¡µé¢ï¼Œå¾€å¾€åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œè¿˜ä¼šæ¶‰åŠ<code>ajax</code>çš„è¯·æ±‚å‘é€ï¼Œæç«¯æƒ…å†µï¼Œå¯èƒ½ä¸€å¼€å§‹å°±æœ‰ä¸ƒå…«ä¸ªè¯·æ±‚ï¼Œè¿™ç§ç”¨æˆ·ä½“éªŒèƒ½å¥½ï¼Œæ‰å¥‡æ€ªäº†ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œé¡µé¢åŸºæœ¬ä¸Šæ˜¯ä¸å¯ç”¨çš„ï¼Œä¼šå‡ºç°loadingçŠ¶æ€ï¼Œæˆ–è€…éª¨æ¶å±çŠ¶æ€ã€‚</p><p>èƒ½ä¸èƒ½ï¼Œå¤å¤ä¸€ç‚¹ï¼ŒæœåŠ¡ç«¯ç›´æ¥æ¸²æŸ“å¥½é¡µé¢ï¼Œå‰ç«¯ä¸å‘é€åˆå§‹åŒ–è¯·æ±‚ï¼Œå‰ç«¯æ‹¿åˆ°é¡µé¢ç›´æ¥æ¸²æŸ“ï¼Œäº¤äº’å†é€šè¿‡ajaxï¼Ÿ</p><p><code>vue</code>ä¹Ÿæä¾›äº†ssrçš„æ¸²æŸ“æ–¹æ¡ˆï¼Œç¤¾åŒºä¸­æ¯”è¾ƒæˆç†Ÿçš„è¦æ•°<code>nuxt</code>å®ç°ã€‚</p><h3 id="nuxt-å…¥é—¨"><a href="#nuxt-å…¥é—¨" class="headerlink" title="nuxt å…¥é—¨"></a>nuxt å…¥é—¨</h3><p>nuxt æ•´ä½“å­¦ä¹ é—¨æ§›ä¸é«˜ï¼Œæˆ‘æ•´ç†ä¸‹æˆ‘å­¦ä¹ é‡åˆ°çš„é›†ä¸ªé—®é¢˜ï¼Œè¯¦ç»†çš„è¿˜è¯·æŸ¥çœ‹æ–‡æ¡£ã€‚</p><h4 id="1-å®‰è£…"><a href="#1-å®‰è£…" class="headerlink" title="1. å®‰è£…"></a>1. å®‰è£…</h4><pre class=" language-javascript"><code class="language-javascript">$ npx create<span class="token operator">-</span>nuxt<span class="token operator">-</span>app <span class="token operator">&lt;</span>é¡¹ç›®å<span class="token operator">></span></code></pre><h4 id="2-è·¯ç”±"><a href="#2-è·¯ç”±" class="headerlink" title="2. è·¯ç”±"></a>2. è·¯ç”±</h4><p>åœ¨pagesç›®å½•ä¸‹çš„vueæ–‡ä»¶ï¼Œä¼šè‡ªåŠ¨é…ç½®ä¸ºè·¯ç”±ï¼Œä¸éœ€è¦æ‰‹åŠ¨é…ç½®ã€‚å‚æ•°çš„è·å–éµå¾ªçº¦å®šå³å¯ï¼ˆè¯¦æƒ…ï¼Œè¯·æŸ¥çœ‹æ–‡æ¡£ï¼‰</p><h4 id="3-å¼‚æ­¥æ•°æ®-asyncData"><a href="#3-å¼‚æ­¥æ•°æ®-asyncData" class="headerlink" title="3. å¼‚æ­¥æ•°æ®(asyncData)"></a>3. å¼‚æ­¥æ•°æ®(<code>asyncData</code>)</h4><p>æ¡†æ¶æä¾›äº†<code>asyncData</code>è·å–å¼‚æ­¥æ•°æ®ï¼Œæ³¨æ„ï¼š<code>asyncData</code>æ–¹æ³•ä¼šåœ¨ç»„ä»¶ï¼ˆ<strong>é™äºé¡µé¢ç»„ä»¶</strong>ï¼‰æ¯æ¬¡åŠ è½½ä¹‹å‰è¢«è°ƒç”¨ã€‚å®ƒå¯ä»¥åœ¨æœåŠ¡ç«¯æˆ–è·¯ç”±æ›´æ–°ä¹‹å‰è¢«è°ƒç”¨ã€‚</p><p><code>asyncData</code>æ‰§è¡Œçš„æ—¶å€™ï¼Œé¡µé¢è¿˜æ²¡æœ‰åˆå§‹åŒ–ï¼Œè®¿é—®ä¸åˆ°é¡µé¢çš„æ–¹æ³•ï¼Œ<code>asyncData</code>çš„è¿”å›ç»“æœï¼Œä¼šè¢«æŒ‚è½½åˆ°é¡µé¢çš„dataä¸Šé¢ï¼Œæ¸²æŸ“çš„æ—¶å€™ï¼Œå¯ä»¥æ‹¿åˆ°æ•°æ®ï¼Œ<code>server</code>ç«¯æ¸²æŸ“ä¸º<code>html</code></p><h4 id="4-å¼‚æ­¥æ•°æ®ï¼ˆfetchï¼‰"><a href="#4-å¼‚æ­¥æ•°æ®ï¼ˆfetchï¼‰" class="headerlink" title="4.å¼‚æ­¥æ•°æ®ï¼ˆfetchï¼‰"></a>4.å¼‚æ­¥æ•°æ®ï¼ˆfetchï¼‰</h4><p><em>fetch æ–¹æ³•ç”¨äºåœ¨æ¸²æŸ“é¡µé¢å‰å¡«å……åº”ç”¨çš„çŠ¶æ€æ ‘ï¼ˆstoreï¼‰æ•°æ®ï¼Œ ä¸ asyncData æ–¹æ³•ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯å®ƒä¸ä¼šè®¾ç½®ç»„ä»¶çš„æ•°æ®ã€‚</em></p><h4 id="5-vuex"><a href="#5-vuex" class="headerlink" title="5. vuex"></a>5. vuex</h4><p>æŒ‰ç…§ç¤ºä¾‹ç›´æ¥å£°æ˜å³å¯ï¼Œä¸éœ€è¦è¿›è¡Œå®ä¾‹åŒ–</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>  counter<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{</span>  increment <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>    state<span class="token punctuation">.</span>counter<span class="token operator">++</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">const</span> actions<span class="token operator">=</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// æœåŠ¡ç«¯æ‰§è¡Œ</span>  <span class="token keyword">async</span> <span class="token function">nuxtServerInit</span><span class="token punctuation">(</span><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> <span class="token punctuation">{</span>      data<span class="token punctuation">:</span> <span class="token punctuation">{</span> code<span class="token punctuation">,</span> data <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'https://loacalhost:3000'</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>code <span class="token operator">===</span> <span class="token string">'000'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'setConfig'</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span>Config<span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>å¦‚æœï¼Œæˆ‘æƒ³ï¼Œè®¾ç½®åˆå§‹åŒ–æ•°æ®ï¼Œç„¶åå†æ‰§è¡Œé¡µé¢çš„<code>asyncData</code>æ–¹æ³•ï¼Œç›´æ¥ä½¿ç”¨æ˜¯ä¸è¡Œçš„ã€‚éœ€è¦åœ¨çŠ¶æ€æ ‘ä¸­æŒ‡å®š <code>nuxtServerInit</code>æ–¹æ³•ã€‚</p><p>é¡µé¢é¦–å…ˆæ‰§è¡Œ<code>nuxtServerInit</code>æ–¹æ³•ï¼Œç»“æŸåè§¦å‘<code>asyncData</code>æˆ–è€…é¡µé¢<code>fetch</code>æ–¹æ³•</p><p><img src="/images/render.jpg"></p><h4 id="6-æ’ä»¶æœºåˆ¶"><a href="#6-æ’ä»¶æœºåˆ¶" class="headerlink" title="6.æ’ä»¶æœºåˆ¶"></a>6.æ’ä»¶æœºåˆ¶</h4><p>ä¸€èˆ¬çš„vueé¡¹ç›®æˆ‘ä»¬éƒ½æ˜¯åœ¨<code>main.js</code>ä¸­å¼•å…¥æ’ä»¶ä½¿ç”¨ã€‚</p><p>åœ¨<code>next</code>é¡¹ç›®ä¸­ï¼Œéœ€è¦åœ¨<code>plugins</code>æ–‡ä»¶å¤¹ä¸‹å£°æ˜ï¼Œå¹¶åœ¨<code>nuxt.config.js</code>ä¸­é…ç½®æ’ä»¶</p><h4 id="7-æ³¨æ„ç¬¬ä¸‰æ–¹åŒ…çš„å¼•å…¥æ–¹å¼"><a href="#7-æ³¨æ„ç¬¬ä¸‰æ–¹åŒ…çš„å¼•å…¥æ–¹å¼" class="headerlink" title="7.æ³¨æ„ç¬¬ä¸‰æ–¹åŒ…çš„å¼•å…¥æ–¹å¼"></a>7.æ³¨æ„ç¬¬ä¸‰æ–¹åŒ…çš„å¼•å…¥æ–¹å¼</h4><p>æœåŠ¡ç«¯æ˜¯æ²¡æœ‰<code>windowã€document</code>çš„ï¼Œå¦‚æœç¬¬ä¸‰æ–¹åŒ…å«æœ‰è¿™äº›ï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥é”™ï¼Œéœ€è¦æŒ‡å®šè¿™äº›åŒ…ä¸ºæµè§ˆå™¨æ¸²æŸ“ç±»å‹ã€‚</p><pre><code>let toolif (process.client) {  tool = require(&#39;name&#39;)}</code></pre><p>é€šè¿‡<code>commonjs</code>çš„æ–¹å¼å¼•å…¥ï¼Œä¸èƒ½é€šè¿‡es6çš„æ–¹å¼å¼•å…¥ã€‚</p><h3 id="åŒæ„é¡¹ç›®"><a href="#åŒæ„é¡¹ç›®" class="headerlink" title="åŒæ„é¡¹ç›®"></a>åŒæ„é¡¹ç›®</h3><p>å‘¨æœ«æŠŠå…¬å¸çš„ä¸€ä¸ªh5é¡¹ç›®è¿›è¡Œäº†åŒæ„ã€‚ä¹‹å‰æ˜¯ 6s å‡ºç•Œé¢ï¼Œç„¶åæ˜¯ajaxè¯·æ±‚ï¼Œåˆ°å¯ç”¨å·®ä¸å¤šè¦7~8sã€‚åŒæ„ä¹‹åï¼Œåˆå§‹è¯·æ±‚å…¨éƒ¨æ”¾åˆ°æœåŠ¡ç«¯è¿›è¡Œï¼Œ1så‡ºç•Œé¢ï¼Œ2s domæ¸²æŸ“ç»“æŸï¼Œé¡µé¢å¯ç”¨ã€‚å¯ä»¥è¯´ï¼Œæå‡è¿˜æ˜¯éå¸¸å¤§çš„ã€‚</p><h3 id="å¤§å‰ç«¯"><a href="#å¤§å‰ç«¯" class="headerlink" title="å¤§å‰ç«¯"></a>å¤§å‰ç«¯</h3><p>ä½¿ç”¨äº†nuxtä¹‹åï¼Œå‰ç«¯çœŸçš„ä¸åªæ˜¯å‰ç«¯äº†ï¼Œå®Œå…¨å¯ä»¥ç«™åœ¨æ›´é«˜çš„è§’åº¦å»çœ‹å¾…é—®é¢˜ï¼Œèƒ½åšåˆ°äº‹æƒ…ä¹Ÿæ›´å¤šäº†ã€‚apiç¼“å­˜ï¼Œç»„ä»¶ç¼“å­˜ï¼Œé¡µé¢ç¼“å­˜ï¼Œå³ä½¿å·²ç»æ¯”è¾ƒæ»¡æ„äº†ï¼Œä¾ç„¶æœ‰å¾ˆå¤šå¯ä»¥ä¼˜åŒ–çš„ç‚¹ã€‚</p><h4 id="more"><a href="#more" class="headerlink" title="more"></a>more</h4><p>node ä½œä¸ºä¸­é—´å±‚ï¼Œå¯ä»¥åšå¾ˆå¤šäº‹æƒ…ï¼Œå¤§å¤§æ‹“å±•äº†å‰ç«¯çš„èŒä¸šå¯èƒ½æ€§ã€‚åªè¦ä½ æ„¿æ„ï¼Œå¯åšçš„åˆå²‚æ­¢æ˜¯ä¸€ä¸ªä¸­é—´å±‚ï¼Œå¯ä»¥æŠŠåç«¯çš„äº‹æƒ…ä¹Ÿå®Œå…¨åšå®Œã€‚</p><p>æ—¥å¿—ï¼Œç›‘æ§ï¼Œå®‰å…¨ï¼Œæ¶‰åŠåˆ°çš„ä¸œè¥¿ä¼šè¶Šæ¥è¶Šå¤šã€‚</p><p>åŒæ„ï¼Œå¯¹ä½“éªŒæ— ç–‘æ˜¯æœ‰å·¨å¤§å¸®åŠ©çš„ï¼Œä½†æ˜¯å¤šå‡ºæ¥çš„è¿™ä¹ˆå¤šè¿ç»´æˆæœ¬ï¼Œä¹Ÿæ˜¯é¡¹ç›®éœ€è¦è€ƒè™‘çš„ã€‚</p><p>å‘¨æœ«çš„<code>nuxt</code>ä½“éªŒå°±åˆ°æ­¤å‘~</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nuxt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nest åˆä½“éªŒ</title>
      <link href="/2020/02/23/back-endback-end-nest-chu-ti-yan/"/>
      <url>/2020/02/23/back-endback-end-nest-chu-ti-yan/</url>
      
        <content type="html"><![CDATA[<p>å‡æœŸä¸­ï¼Œå­¦ä¹ äº†<code>nest</code>è¿™ä¸ªnodeåç«¯æ¡†æ¶ã€‚æ„Ÿè§‰æ•´ä½“æ¯”è¾ƒç®€çº¦ï¼Œå­¦ä¹ ç›¸å¯¹æ¥è¯´ï¼Œæ¯”è¾ƒå®¹æ˜“ã€‚æœ¬ç¯‡ï¼Œå†™ä¸€ä¸‹è‡ªå·±å¯¹è¿™ä¸ªæ¡†æ¶çš„ç†è§£ã€‚</p><h3 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h3><ol><li>ç±»angularçš„ä»£ç ç»„ç»‡å½¢å¼:<code>importsã€moduleã€service</code></li><li>åŸºäº<code>typescript</code>ï¼Œé¢å‘æœªæ¥ï¼Œç‰¹åˆ«æ˜¯åŸºäºè£…é¥°å™¨çš„æ¨¡å¼ï¼Œä»£ç å˜å¾—éå¸¸ç®€æ´</li><li>åº•å±‚åŸºäº<code>express</code>,æ”¯æŒæ›´æ¢ä¸º<code>fastify</code>å¹³å°ï¼Œåæ‹¥ä¸°å¯Œçš„<code>express</code>ä¸­é—´ä»¶</li><li>æ‹’ç»åˆ€è€•ç«ç§ï¼Œä¸€ç›´æ²¡æœ‰å¤ªæ·±å…¥çš„å­¦ä¹ <code>koa</code>çš„ä¸€ä¸ªé‡è¦åŸå› ã€‚koaæ¡†æ¶å¤ªç®€å•ï¼ŒåŸºæœ¬ä»€ä¹ˆéƒ½åšä¸äº†ï¼Œéƒ½éœ€è¦å¼•å…¥ä¸­é—´ä»¶ï¼Œå°è£…ä»£ç ã€‚<code>nest</code>å¯¹å¸¸ç”¨æ“ä½œï¼Œåšäº†ä¸°å¯Œçš„å°è£…ï¼Œç®€å•æ˜“ä¸Šæ‰‹ã€‚</li><li><code>node</code> ä¸­çš„<code>spring</code>ï¼Œ<code>typescript</code>+<code>ioc</code>,å€¼å¾—å­¦ä¹ ~</li></ol><h3 id="å…¥é—¨å®‰è£…"><a href="#å…¥é—¨å®‰è£…" class="headerlink" title="å…¥é—¨å®‰è£…"></a>å…¥é—¨å®‰è£…</h3><ol><li><code>npm i -g @nestjs/cli</code></li><li><code>nest new project-name</code></li></ol><h3 id="æ–‡æ¡£ç†è§£"><a href="#æ–‡æ¡£ç†è§£" class="headerlink" title="æ–‡æ¡£ç†è§£"></a>æ–‡æ¡£ç†è§£</h3><p><a href="https://docs.nestjs.cn/6/firststeps" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a> å†™çš„è¿˜ä¸é”™ï¼Œçœ‹ä¸€éï¼ŒåŸºæœ¬ä¹Ÿèƒ½ç†è§£ã€‚ä¸å‡†å¤‡é‡å¤å®˜æ–¹æ–‡æ¡£ï¼Œé’ˆå¯¹æ–‡æ¡£çš„å„ä¸ªæ¨¡å—å†™ä¸€ç‚¹è‡ªå·±çš„ç†è§£ã€‚</p><h4 id="æ§åˆ¶å™¨ï¼ˆcontrollerï¼‰"><a href="#æ§åˆ¶å™¨ï¼ˆcontrollerï¼‰" class="headerlink" title="æ§åˆ¶å™¨ï¼ˆcontrollerï¼‰"></a>æ§åˆ¶å™¨ï¼ˆcontrollerï¼‰</h4><p>å¯ä»¥çœ‹æˆæ˜¯è·¯ç”±æ§åˆ¶å™¨ï¼Œè´Ÿè´£ä¼ å…¥çš„è¯·æ±‚å’Œå®¢æˆ·ç«¯çš„è¿”å›å“åº”ã€‚</p><p>å¦‚æœè¿”å›å¯¹è±¡æˆ–è€…æ•°ç»„æ ¼å¼ï¼Œä¼šè¢«è‡ªåŠ¨åŒ…è£…æˆ<code>JSON</code>æ ¼å¼ã€‚</p><h4 id="æä¾›è€…ï¼ˆProvidersï¼‰"><a href="#æä¾›è€…ï¼ˆProvidersï¼‰" class="headerlink" title="æä¾›è€…ï¼ˆProvidersï¼‰"></a>æä¾›è€…ï¼ˆProvidersï¼‰</h4><p>Provideråªæ˜¯ä¸€ä¸ªç”¨ <code>@Injectable()</code> è£…é¥°å™¨æ³¨é‡Šçš„ç±»ã€‚é€šè¿‡Controller çš„ <code>constructor</code>æ³¨å…¥ï¼Œå¹¶å®ä¾‹åŒ–ã€‚ä¸éœ€è¦æ‰‹åŠ¨å®ä¾‹åŒ–ï¼Œä¹Ÿå°±æ˜¯javaä¸­å¸¸è¯´çš„ä¾èµ–æ³¨å…¥ã€‚</p><p>ä¸€èˆ¬ç”¨æ¥å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œæ•°æ®åº“äº¤äº’ã€‚</p><h4 id="ä¸­é—´ä»¶"><a href="#ä¸­é—´ä»¶" class="headerlink" title="ä¸­é—´ä»¶"></a>ä¸­é—´ä»¶</h4><p>ä¸­é—´ä»¶æ˜¯åœ¨è·¯ç”±å¤„ç†ç¨‹åº <strong>ä¹‹å‰</strong> è°ƒç”¨çš„å‡½æ•°ã€‚æœ¬è´¨ä¸Šï¼Œå°±æ˜¯è·¯ç”±ä¹‹å‰çš„å‡½æ•°è°ƒç”¨ã€‚</p><h4 id="ç®¡é“"><a href="#ç®¡é“" class="headerlink" title="ç®¡é“"></a>ç®¡é“</h4><ul><li><strong>è½¬æ¢</strong>ï¼šç®¡é“å°†è¾“å…¥æ•°æ®è½¬æ¢ä¸ºæ‰€éœ€çš„æ•°æ®è¾“å‡º</li><li><strong>éªŒè¯</strong>ï¼šå¯¹è¾“å…¥æ•°æ®è¿›è¡ŒéªŒè¯ï¼Œå¦‚æœéªŒè¯æˆåŠŸç»§ç»­ä¼ é€’; éªŒè¯å¤±è´¥åˆ™æŠ›å‡ºå¼‚å¸¸;</li></ul><p>æ„Ÿè§‰<code>ValidationPipe</code> ç”¨çš„ä¼šå¤šä¸€ç‚¹ï¼Œæ—¢å¯ä»¥ç”¨æ¥åšéªŒè¯ï¼Œä¹Ÿå¯ä»¥åšè½¬æ¢ã€‚</p><h4 id="å®ˆå«"><a href="#å®ˆå«" class="headerlink" title="å®ˆå«"></a>å®ˆå«</h4><p>å®ˆå«æ˜¯ä¸€ä¸ªä½¿ç”¨ <code>@Injectable()</code> è£…é¥°å™¨çš„ç±»ã€‚ å®ˆå«åº”è¯¥å®ç° <code>CanActivate</code> æ¥å£ã€‚</p><p>ä¸€èˆ¬ç”¨æ¥åšé‰´æƒï¼Œé€šè¿‡å®ˆå«å‡½æ•°ï¼Œè¿”å›<code>True</code>æˆ–è€…<code>False</code>,å®ç°é‰´æƒã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p><code>nest</code>ç°åœ¨æ¯å‘¨20kçš„ä¸‹è½½é‡ï¼Œæ˜¯koaçš„ä¸€åŠï¼Œä½†æ˜¯ä»–æ˜¯ä¸€ä¸ªé¢å‘æœªæ¥çš„æ¡†æ¶ã€‚åŸºäºtypescriptå’Œç±»springçš„æ¶æ„ï¼Œå€¼å¾—æˆ‘æŠ•å…¥æ—¶é—´å»å­¦ä¹ ç¢ç£¨ã€‚</p><p>å­¦ä¹ <code>nest</code>è¿˜æœ‰ä¸€ä¸ªåŸå› ,å‡æœŸå°è¯•çœ‹äº†<code>java</code>çš„<code>spring boot</code>,æ¦‚å¿µå®åœ¨æ˜¯å¤ªç¹æ‚äº†=-=ï¼Œå¥´å®¶å®åœ¨æ˜¯ä¸ä¼šå•Š~</p><p>å¥½å•¦ï¼Œä»Šå¹´çš„ä¸ªäººé¡¹ç›®åå°å°±æš‚å®šä¸º<code>nest</code>å‘~</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nest </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯æ€ä¹ˆæ ·å¤„ç†emojiè¡¨æƒ…</title>
      <link href="/2020/01/18/front-end/qian-duan-zen-me-yang-chu-li-emoji-biao-qing/"/>
      <url>/2020/01/18/front-end/qian-duan-zen-me-yang-chu-li-emoji-biao-qing/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¸€ä¸ª bug çš„å¿ƒè·¯å†ç¨‹â€¦</p><p>ğŸ˜€ï¼šæ–°é¡¹ç›®è€¶ âœŒ</p><p>ğŸ¤”ï¼šæ€ä¹ˆåšæ˜¯æœ€ä½³å®è·µå‘¢</p><p>ğŸ˜ï¼šç»ˆäºå¥½äº†</p><p>ğŸ˜ï¼šæµ‹è¯•é€šè¿‡ï¼Œé¡ºåˆ©ä¸Šçº¿</p><p>ğŸ˜±ğŸ¥µğŸ˜¡ï¼šä»€ä¹ˆï¼Œçº¿ä¸Š bugï¼</p></blockquote><p>ä¸€èˆ¬è€Œè¨€ï¼Œä¸æ¨èå‰ç«¯å¤„ç† emojiï¼Œæœ€å¥½çš„æ–¹å¼è¿˜æ˜¯æŠŠæ•°æ®åº“ä¿®æ”¹æˆ <code>utf8mb4</code>æ ¼å¼ï¼Œä½†æ˜¯ï¼Œå¦‚æœæ•°æ®åº“ä¸åœ¨ä½ è¿™é‡Œå‘¢ï¼Ÿå¦‚æœæ˜¯ä¸€ä¸ªå»¶ç»­æ€§é¡¹ç›®å‘¢â€¦é‚£å‰ç«¯å¯èƒ½æ²¡åŠæ³•,å°±è¦è‡ªå·±å»å¤„ç† emoji äº†ã€‚</p><h3 id="emoji-æ˜¯ä»€ä¹ˆ"><a href="#emoji-æ˜¯ä»€ä¹ˆ" class="headerlink" title="emoji æ˜¯ä»€ä¹ˆ"></a>emoji æ˜¯ä»€ä¹ˆ</h3><p>emoji æ˜¯å­—ç¬¦ï¼Œä¸æ˜¯å›¾ç‰‡ã€‚emoji ä½¿ç”¨ Unicode ç¼–ç æ–¹å¼ï¼Œå¯ä»¥æ–¹ä¾¿çš„è½¬æ¢æˆå…¶ä»–æ ¼å¼ã€‚</p><p><a href="https://zh.wikipedia.org/wiki/%E7%B9%AA%E6%96%87%E5%AD%97" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘å…³äº emoji çš„ä»‹ç»</a></p><p><a href="https://charbase.com/1f602-unicode-face-with-tears-of-joy" target="_blank" rel="noopener">charbase.com</a> ï¼Œç½‘ç«™æä¾›äº†ï¼Œå„ç§æ ¼å¼ emoji ç¼–ç çš„æŸ¥çœ‹æ–¹å¼ï¼š</p><p><img src="/images/image-20200118191909665.png" alt="ç¬‘å“­"></p><p>ä¸Šå›¾å¯ä»¥æ–¹ä¾¿çš„æŸ¥çœ‹ç¬‘å“­çš„ Unicode ç¼–ç ï¼šU+1F602ï¼ŒJavascript Escapeï¼šâ€\ud83d\ude02â€ç­‰ã€‚</p><h3 id="å¸¸è§-emoji-å¤„ç†æ–¹å¼"><a href="#å¸¸è§-emoji-å¤„ç†æ–¹å¼" class="headerlink" title="å¸¸è§ emoji å¤„ç†æ–¹å¼"></a>å¸¸è§ emoji å¤„ç†æ–¹å¼</h3><ol><li>åå°æ›´æ”¹æ•°æ®åº“æ ¼å¼ä¸º<code>utf8mb4</code>æ ¼å¼</li><li>ä½¿ç”¨æ–‡å­—æ›¿æ¢ï¼Œæ¯”å¦‚å¾®ä¿¡ï¼ŒQQ ç­‰æ˜¯ä½¿ç”¨<code>[ç¬‘å“­]</code>æ ¼å¼è¡¨ç¤º ğŸ˜‚ï¼Œ</li><li>æ–‡å­—æ›¿æ¢ï¼Œä½†æ˜¯ä¸ä½¿ç”¨ç³»ç»Ÿçš„ emojiï¼Œè€Œæ˜¯æ ¹æ®æ–‡å­—æ˜¾ç¤ºå›¾ç‰‡ï¼Œå®ç°å¤šç«¯æ˜¾ç¤ºç»Ÿä¸€</li><li>ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„ emoji è¡¨æƒ…</li></ol><h3 id="emoji-å¸¸ç”¨è½¬æ¢å‡½æ•°"><a href="#emoji-å¸¸ç”¨è½¬æ¢å‡½æ•°" class="headerlink" title="emoji å¸¸ç”¨è½¬æ¢å‡½æ•°"></a>emoji å¸¸ç”¨è½¬æ¢å‡½æ•°</h3><p>è½¬æ¢å‡½æ•°ï¼Œæ¶‰åŠåˆ° unicode çš„ç¼–ç ç®—æ³•ï¼Œå±äºä¸“æœ‰é¢†åŸŸçŸ¥è¯†ï¼Œæ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦çš„æ—¶å€™å¤åˆ¶å°±è¡Œäº†â€¦ä¸å¿…æ·±ç©¶ã€‚</p><p>æ–¹æ³•ä¸€ï¼šè½¬æˆUnicode</p><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// https://github.com/channg/umoji/blob/master/src/emojiToUnicode.js</span><span class="token comment" spellcheck="true">// è½¬æ¢ä¸ºjsç¼–ç æ–¹å¼  ğŸ˜€=>"\ud83d\ude00"</span><span class="token keyword">function</span> <span class="token function">emojiToUnicode</span><span class="token punctuation">(</span>emoji<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> backStr <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>emoji <span class="token operator">&amp;&amp;</span> emoji<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> char <span class="token keyword">of</span> emoji<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">const</span> index <span class="token operator">=</span> char<span class="token punctuation">.</span><span class="token function">codePointAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">></span> <span class="token number">65535</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">const</span> h <span class="token operator">=</span>          <span class="token string">"\\u"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>index <span class="token operator">-</span> <span class="token number">0x10000</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">0x400</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">0xd800</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token string">"\\u"</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>index <span class="token operator">-</span> <span class="token number">0x10000</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">0x400</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">0xdc00</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        backStr <span class="token operator">=</span> backStr <span class="token operator">+</span> h <span class="token operator">+</span> c<span class="token punctuation">;</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        backStr <span class="token operator">=</span> backStr <span class="token operator">+</span> char<span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>backStr<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> backStr<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>æ–¹æ³•äºŒï¼šè½¬æˆHTMLå®ä½“ç¼–ç </p><p><strong>ä¸æ¨èï¼ï¼ï¼</strong></p><p>å¦‚æœæ˜¾ç¤ºHTMLç¼–ç ï¼Œé‚£ä¹ˆåœ¨<code>vue</code>æ¡†æ¶ä¸­å¿…é¡»ä½¿ç”¨<code>v-html</code>,è¿™æ˜¯éå¸¸å±é™©çš„ï¼Œå¾ˆå®¹æ˜“å¯¼è‡´<code>xss</code>æ”»å‡»ï¼</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// https://jordonwang.github.io/2018/06/06/emoji-string/</span><span class="token comment" spellcheck="true">// è½¬æ¢ä¸ºHTMLå®ä½“å­—ç¬¦</span><span class="token keyword">function</span> <span class="token function">emojiToHTMLEscape</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">var</span> patt <span class="token operator">=</span> <span class="token regex">/[\ud800-\udbff][\udc00-\udfff]/g</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// æ£€æµ‹utf16å­—ç¬¦æ­£åˆ™</span>  str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>patt<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>char<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">var</span> H<span class="token punctuation">,</span> L<span class="token punctuation">,</span> code<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>char<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      H <span class="token operator">=</span> char<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å–å‡ºé«˜ä½</span>      L <span class="token operator">=</span> char<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å–å‡ºä½ä½</span>      code <span class="token operator">=</span> <span class="token punctuation">(</span>H <span class="token operator">-</span> <span class="token number">0xd800</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0x400</span> <span class="token operator">+</span> <span class="token number">0x10000</span> <span class="token operator">+</span> L <span class="token operator">-</span> <span class="token number">0xdc00</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// è½¬æ¢ç®—æ³•</span>      <span class="token keyword">return</span> <span class="token string">"&amp;#"</span> <span class="token operator">+</span> code <span class="token operator">+</span> <span class="token string">";"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> char<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> str<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>å¦‚æœæƒ³æ·±å…¥ç ”ç©¶ï¼Œå¯ä»¥å‚è€ƒï¼š</p><p><a href="https://blog.csdn.net/binjly/article/details/47321043" target="_blank" rel="noopener">ç§»åŠ¨å‰ç«¯æ‰‹æœºè¾“å…¥æ³•è‡ªå¸¦ emoji è¡¨æƒ…å­—ç¬¦å¤„ç†</a></p><p><a href="http://www.ruanyifeng.com/blog/2014/12/unicode.html" target="_blank" rel="noopener">Unicode ä¸ JavaScript è¯¦è§£</a></p><h3 id="bug-åœºæ™¯åŠè§£å†³åŠæ³•"><a href="#bug-åœºæ™¯åŠè§£å†³åŠæ³•" class="headerlink" title="bug åœºæ™¯åŠè§£å†³åŠæ³•"></a>bug åœºæ™¯åŠè§£å†³åŠæ³•</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// æ•°æ®æ¥è‡ªæœåŠ¡ç«¯,æˆ‘ä¼ é€’æ—¶å€™åšJSONç¼–ç ï¼Œ\è¢«è½¬ä¹‰ä¸º\\</span><span class="token keyword">let</span> serverValue <span class="token operator">=</span> <span class="token string">"\\ud83d\\ude00\\ud83d\\ude00"</span><span class="token punctuation">;</span><span class="token keyword">let</span> value <span class="token operator">=</span> JSON<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>serverValue<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span></code></pre><p>çœ‹èµ·æ¥æ˜¯ä¸€åˆ‡æ­£å¸¸ï¼Œæ²¡æœ‰é—®é¢˜ã€‚æˆ‘ä¼ é€’ç»™åç«¯çš„æ•°æ®ï¼Œåš<code>JSON.Stringfy(value)</code>ç¼–ç ï¼Œæ‹¿åˆ°æ—¶å€™ï¼Œå†å¯¹å­—ç¬¦ä¸²åš <code>JSON.parse(value)</code>è§£ç ã€‚</p><p>ä½†æ˜¯ï¼Œçº¿ä¸ŠæŠ¥é”™ã€‚ä»”ç»†ç ”ç©¶å‘ç°ï¼Œæœ‰äº›æ•°æ®ï¼Œå¹¶ä¸æ˜¯æˆ‘ä¼ é€’ç»™åç«¯çš„ï¼Œè€Œè¿™äº›æ•°æ®é‡Œé¢å«æœ‰ JSON çš„éæ³•å­—ç¬¦ï¼Œå¯¼è‡´ JSON æŠ¥é”™ã€‚</p><p>è§£å†³æ–¹å¼ä¹Ÿç®€å•ï¼š</p><ol><li>ä¸ä½¿ç”¨ JSON.parse è§£ç ï¼Œç›´æ¥æ›¿æ¢\\ä¸º\,å°±å¯ä»¥ç›´æ¥æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š</li><li>å¦‚æœä½¿ç”¨ JSON.parse è§£ç ï¼ŒåŠ ä¸ª try catch</li></ol><p>ä¼¼ä¹é—®é¢˜è§£å†³äº†ï¼Œä½†æ˜¯JSä¼¼ä¹å¹¶ä¸èƒ½å¾ˆå¥½çš„å¤„ç†\\ä¸º\ï¼Œ<a href="https://stackoverflow.com/questions/33685680/emoji-surrogate-string-with-javascript-how-to-parse" target="_blank" rel="noopener">stackoverflow</a>è¿™ä¸ªæ–¹æ³•æ­£åˆ™æ–¹æ³•å¯ä»¥ï¼š</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">parseUnicode</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token regex">/\\u([\d\w]{4})/gi</span><span class="token punctuation">;</span>    str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>match<span class="token punctuation">,</span> grp<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>grp<span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> str<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>åœ¨çº¿æµ‹è¯•ï¼š</p><iframe scrolling="no" width="100%" height="500" src="https://jsfiddle.net/wukong/6e1fjz4w/23/embedded/js,html,result/dark" frameborder="0" loading="lazy" allowfullscreen></iframe><h3 id="JSON-å¯¹å­—ç¬¦ä¸²çš„å¤„ç†"><a href="#JSON-å¯¹å­—ç¬¦ä¸²çš„å¤„ç†" class="headerlink" title="JSON å¯¹å­—ç¬¦ä¸²çš„å¤„ç†"></a>JSON å¯¹å­—ç¬¦ä¸²çš„å¤„ç†</h3><p>å‰ç«¯ä½¿ç”¨ jsonï¼ŒåŸºæœ¬éƒ½æ˜¯å¯¹ object è¿›è¡Œç¼–ç ï¼Œè§£ç ï¼Œå¾ˆå°‘å¯¹å­—ç¬¦ä¸²è¿›è¡Œç¼–ç è§£ç ã€‚å¦‚æœ JSON.parse()é‡åˆ°â€™&#39;ï¼Œå¾€å¾€ä¼šæŠ¥é”™ï¼ŒåŸºæœ¬ä¸Šéƒ½éœ€è¦è½¬ä¹‰ä¸ºâ€˜â€™\\â€˜</p><p>è‡ªå·±å¯¹<code>JSON</code>è§„èŒƒå¹¶ä¸ç†Ÿæ‚‰ï¼Œå…³äº<code>JSON</code>ä»¥åå•ç‹¬å†å†™ä¸€ç¯‡ã€‚</p><p><img src="/images/image-20200118203439540.png" alt="JSON è½¬ä¹‰æµ‹è¯•"></p><img src="/images/json.png" alt="è½¨é“å›¾" style="zoom: 33%;" /><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>é—®é¢˜æœ€ç»ˆå®šä½åœ¨ JSON çš„è½¬ä¹‰ä¸Šé¢ï¼Œè™½ç„¶å¤©å¤©åœ¨ç”¨ JSONï¼Œä½†æ˜¯å¹¶ä¸ç†è§£ï¼ŒæŸ¥äº†å¾ˆå¤šèµ„æ–™ï¼Œè¿˜æ˜¯ä¸€æ˜ŸåŠè§£ï¼Œè¿™ç¯‡åšå®¢æ˜¯å¾ˆéš¾å†™å¥½äº†â€¦</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JSON </tag>
            
            <tag> emoji </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»Axiosæºç å­¦ä¹ Promiseçš„å¦™ç”¨</title>
      <link href="/2020/01/05/front-end/cong-axios-yuan-ma-xue-xi-promise-de-miao-yong/"/>
      <url>/2020/01/05/front-end/cong-axios-yuan-ma-xue-xi-promise-de-miao-yong/</url>
      
        <content type="html"><![CDATA[<p>æƒ­æ„§ï¼Œè™½ç„¶ä¸€ç›´åœ¨ä½¿ç”¨<code>Promise/async/await</code>ï¼Œä½†æ˜¯è‡ªå·±å…¶å®å¯¹<code>Promise</code>å¹¶ä¸æ˜¯ç‰¹åˆ«ç†è§£ï¼Œå¯¼è‡´è¿™æ¬¡é‡åˆ°é—®é¢˜æ—¶å€™ï¼Œä¸€ç›´ä¸æ˜¯ç‰¹åˆ«æ˜ç™½ã€‚</p><hr><h2 id="éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚åˆ†æ" class="headerlink" title="éœ€æ±‚åˆ†æ"></a>éœ€æ±‚åˆ†æ</h2><blockquote><p>éœ€æ±‚ï¼šå‰ç«¯å®šæ—¶åˆ·æ–° token æ¥å£</p></blockquote><p>åˆ†æï¼šçœ‹èµ·æ¥ä¸å¤æ‚ï¼Œä½†æ˜¯å¦‚æœè€ƒè™‘åˆ° token æœ‰æ—¶é—´é™åˆ¶ï¼Œè¶…æ—¶ä¸å¯ç”¨ï¼ŒåŒæ—¶å‘èµ·å¤šä¸ªè¯·æ±‚ï¼Œæ€ä¹ˆæ ·åœ¨æ›´æ–° token çš„æ—¶å€™ï¼Œå»¶è¿Ÿå…¶ä»–è¯·æ±‚çš„å‘é€ï¼Œè¿™å°±æœ‰ç‚¹å¤æ‚äº†ã€‚</p><p>æ¥å£æˆ‘æ˜¯ç”¨ axios å»è¯·æ±‚ï¼Œè¿™éƒ¨åˆ†åŠŸèƒ½åº”è¯¥éƒ½ä¼šåœ¨æ‹¦æˆªå…¶ä¸­å®ç°ã€‚æˆ‘é‡åˆ°çš„éš¾ç‚¹ï¼Œä¹Ÿå°±æ˜¯å¦‚ä½• hold ä½è¯·æ±‚ï¼Œç­‰å¾… token åˆ·æ–°ï¼Œé‡Šæ”¾è¯·æ±‚ã€‚</p><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">"axios"</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä»localStorageä¸­è·å–tokenï¼Œtokenå­˜çš„æ˜¯objectä¿¡æ¯ï¼Œæœ‰tokenExpireTimeå’Œtokenä¸¤ä¸ªå­—æ®µ</span><span class="token keyword">function</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> tokenObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    tokenObj <span class="token operator">=</span> storage<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    tokenObj <span class="token operator">=</span> tokenObj <span class="token operator">?</span> JSON<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>tokenObj<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"get token from localStorage error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> tokenObj<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">refreshToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// instanceæ˜¯å½“å‰request.jsä¸­å·²åˆ›å»ºçš„axioså®ä¾‹</span>  <span class="token keyword">return</span> instance<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/refreshtoken"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=</span><span class="token operator">></span> res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// ç»™å®ä¾‹æ·»åŠ ä¸€ä¸ªsetTokenæ–¹æ³•ï¼Œç”¨äºç™»å½•åæ–¹ä¾¿å°†æœ€æ–°tokenåŠ¨æ€æ·»åŠ åˆ°headerï¼ŒåŒæ—¶å°†tokenä¿å­˜åœ¨localStorageä¸­</span>instance<span class="token punctuation">.</span>setToken <span class="token operator">=</span> obj <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  instance<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">"X-Token"</span><span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">.</span>token<span class="token punctuation">;</span>  window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">,</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// æ³¨æ„è¿™é‡Œéœ€è¦å˜æˆå­—ç¬¦ä¸²åæ‰èƒ½æ”¾åˆ°localStorageä¸­</span><span class="token punctuation">}</span><span class="token punctuation">;</span>instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>  config <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> tokenObj <span class="token operator">=</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// æ·»åŠ è¯·æ±‚å¤´</span>    config<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">"X-Token"</span><span class="token punctuation">]</span> <span class="token operator">=</span> tokenObj<span class="token punctuation">.</span>token<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// ç™»å½•æ¥å£å’Œåˆ·æ–°tokenæ¥å£ç»•è¿‡</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>      config<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"/rereshToken"</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">||</span>      config<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span>    <span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> config<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>tokenObj<span class="token punctuation">.</span>token <span class="token operator">&amp;&amp;</span> tokenObj<span class="token punctuation">.</span>tokenExpireTime<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">const</span> now <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>now <span class="token operator">>=</span> tokenObj<span class="token punctuation">.</span>tokenExpireTime<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// ç«‹å³åˆ·æ–°token</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isRefreshing<span class="token punctuation">)</span> <span class="token punctuation">{</span>          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"åˆ·æ–°token ing"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          isRefreshing <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>          <span class="token function">refreshToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>              <span class="token keyword">const</span> <span class="token punctuation">{</span> token<span class="token punctuation">,</span> tokenExprieIn <span class="token punctuation">}</span> <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>              <span class="token keyword">const</span> tokenExpireTime <span class="token operator">=</span> now <span class="token operator">+</span> tokenExprieIn <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>              instance<span class="token punctuation">.</span><span class="token function">setToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span> token<span class="token punctuation">,</span> tokenExpireTime <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              isRefreshing <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>              <span class="token keyword">return</span> token<span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>token <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"åˆ·æ–°tokenæˆåŠŸï¼Œæ‰§è¡Œé˜Ÿåˆ—"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              requests<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>cb <span class="token operator">=</span><span class="token operator">></span> <span class="token function">cb</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment" spellcheck="true">// æ‰§è¡Œå®Œæˆåï¼Œæ¸…ç©ºé˜Ÿåˆ—</span>              requests <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>res <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>              console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"refresh token error: "</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">const</span> retryOriginalRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>resolve <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>          requests<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>token <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// å› ä¸ºconfigä¸­çš„tokenæ˜¯æ—§çš„ï¼Œæ‰€ä»¥åˆ·æ–°tokenåè¦å°†æ–°tokenä¼ è¿›æ¥</span>            config<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">"X-Token"</span><span class="token punctuation">]</span> <span class="token operator">=</span> token<span class="token punctuation">;</span>            <span class="token function">resolve</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> retryOriginalRequest<span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> config<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  error <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// Do something with request error</span>    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è¯·æ±‚è¿”å›åæ‹¦æˆª</span>instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>  response <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> <span class="token punctuation">{</span> code <span class="token punctuation">}</span> <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>code <span class="token operator">===</span> <span class="token number">1234</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">// tokenè¿‡æœŸäº†ï¼Œç›´æ¥è·³è½¬åˆ°ç™»å½•é¡µ</span>      window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">"/"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> response<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  error <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"catch"</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> instance<span class="token punctuation">;</span></code></pre><p>æ ¸å¿ƒä»£ç ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// 1. ä¿å­˜ pendding çŠ¶æ€çš„ Promise åˆ°æ•°ç»„ requests é‡Œé¢</span><span class="token keyword">const</span> retryOriginalRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>resolve <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  requests<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>token <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    config<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">"X-Token"</span><span class="token punctuation">]</span> <span class="token operator">=</span> token<span class="token punctuation">;</span>    <span class="token function">resolve</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 2. æ‰§è¡Œ pendding çš„promise ï¼ŒçŠ¶æ€è½¬ä¸º resolve</span>requests<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>cb <span class="token operator">=</span><span class="token operator">></span> <span class="token function">cb</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://juejin.im/post/5dcac7686fb9a04a9e37b595" target="_blank" rel="noopener">axios å¦‚ä½•åˆ©ç”¨ promise æ— ç—›åˆ·æ–° tokenï¼ˆäºŒï¼‰</a></p><p>æˆ‘åœ¨å¦‚ä½•ä¿å­˜<code>Promise</code>,åç»­å¦‚ä½•é‡Šæ”¾<code>Promise</code> è¿™é‡Œå¡ä½äº†ï¼Œä»–çš„å®ç°æ¯”è¾ƒå·§å¦™ã€‚</p><ol><li>ä¿å­˜è¯·æ±‚çš„ config çš„ Promise åˆ°æ•°ç»„ä¸­</li><li>åœ¨åˆ·æ–° token ä¹‹åï¼Œå†æ‰§è¡Œä¿®æ”¹ Promise çŠ¶æ€</li></ol><p>ç„¶é¹…ï¼Œä½ ä»¥ä¸ºæˆ‘æ‡‚äº†â€¦å…¶å®æˆ‘è¿˜æ˜¯æ‡µé€¼çš„â€¦</p><p><img src="/images/1-1578487578225.png" alt="å¥´å®¶ä¸ä¼šå•Š"></p><h2 id="å¦‚ä½•ç†è§£-Promise"><a href="#å¦‚ä½•ç†è§£-Promise" class="headerlink" title="å¦‚ä½•ç†è§£ Promise"></a>å¦‚ä½•ç†è§£ Promise</h2><blockquote><pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> retryOriginalRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>resolve <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  requests<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>token <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å› ä¸ºconfigä¸­çš„tokenæ˜¯æ—§çš„ï¼Œæ‰€ä»¥åˆ·æ–°tokenåè¦å°†æ–°tokenä¼ è¿›æ¥</span>    config<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">"X-Token"</span><span class="token punctuation">]</span> <span class="token operator">=</span> token<span class="token punctuation">;</span>    <span class="token function">resolve</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> retryOriginalRequest<span class="token punctuation">;</span></code></pre><p>è¿™é‡Œè¿”å›çš„æ˜¯ promiseï¼Ÿï¼Ÿï¼Ÿ</p><p>ä¸€èˆ¬æˆ‘ä»¬ä¸æ˜¯è¿”å›çš„ config å—ï¼Ÿè¿”å› Promise ä½œç”šï¼Ÿï¼Ÿï¼Ÿ</p></blockquote><p>åœ¨å­¦ä¹ <code>axios</code>æºç çš„è¿‡ç¨‹ä¸­ï¼Œæ‰¾åˆ°äº†ç­”æ¡ˆã€‚</p><pre class=" language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">InterceptorManager</span><span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">private</span> interceptors<span class="token punctuation">:</span> Array<span class="token operator">&lt;</span>Interceptor<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">></span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>interceptors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token punctuation">}</span><span class="token comment" spellcheck="true">// ä½¿ç”¨æ‹¦æˆªå™¨</span>  <span class="token function">use</span><span class="token punctuation">(</span>resolved<span class="token punctuation">:</span> ResolvedFn<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">,</span> rejected<span class="token operator">?</span><span class="token punctuation">:</span> RejectedFn<span class="token punctuation">)</span><span class="token punctuation">:</span> number <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      resolved<span class="token punctuation">,</span>      rejected    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span>  <span class="token punctuation">}</span>  <span class="token function">forEach</span><span class="token punctuation">(</span>fn<span class="token punctuation">:</span> <span class="token punctuation">(</span>interceptor<span class="token punctuation">:</span> Interceptor<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>interceptor <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>interceptor <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">fn</span><span class="token punctuation">(</span>interceptor<span class="token punctuation">)</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token function">eject</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> number<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>interceptors<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>interceptors<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>æ‰§è¡Œæµç¨‹ï¼š</p><pre class=" language-js"><code class="language-js"> <span class="token comment" spellcheck="true">//  é“¾å¼è°ƒç”¨</span>    <span class="token keyword">const</span> chain<span class="token punctuation">:</span> PromiseChain<span class="token operator">&lt;</span>any<span class="token operator">></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>      <span class="token punctuation">{</span>        resolved<span class="token punctuation">:</span> dispatchRequest<span class="token punctuation">,</span>        rejected<span class="token punctuation">:</span> undefined      <span class="token punctuation">}</span>    <span class="token punctuation">]</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>interceptor <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">//  åæ·»åŠ å…ˆæ‰§è¡Œ</span>      chain<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>interceptor<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>interceptor <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">//  å…ˆæ·»åŠ å…ˆæ‰§è¡Œ</span>      chain<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>interceptor<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">let</span> promise <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>chain<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">const</span> <span class="token punctuation">{</span> resolved<span class="token punctuation">,</span> rejected <span class="token punctuation">}</span> <span class="token operator">=</span> chain<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">!</span>      promise <span class="token operator">=</span> promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolved<span class="token punctuation">,</span> rejected<span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> promise</code></pre><p>åŸºæœ¬æµç¨‹ï¼š</p><ol><li>ä½¿ç”¨ use æ–¹æ³•ï¼Œä½¿ç”¨æ‹¦æˆªå™¨ï¼Œæ‹¦æˆªå™¨è¢« push åˆ°<code>interceptors</code>ä¸­è¿›è¡Œç®¡ç†</li><li>åˆå¹¶åŸºæœ¬é…ç½®ä¹‹åï¼Œè®¾ç½®è°ƒç”¨é“¾<code>chain</code>,è¯·æ±‚æ‹¦æˆªå™¨ï¼Œä»åå¾€å‰<code>unishift</code>åˆ° chain ä¸­ï¼Œå“åº”æ‹¦æˆªå™¨è¢«<code>push</code>åˆ°<code>chain</code>ä¸­ï¼Œä¸­é—´åˆ™æ˜¯ï¼Œè°ƒç”¨æ‰§è¡Œæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯<code>dispatchRequest</code></li><li>è¿™æ ·å°±ä¿è¯äº†è°ƒç”¨é¡ºåºï¼Œè¯·æ±‚æ‹¦æˆªå™¨ -&gt;æ‰§è¡Œè°ƒç”¨æ–¹æ³• -&gt;å“åº”æ‹¦æˆªå™¨</li><li>æ•°æ®çš„æµè½¬ï¼Œå…¨éƒ¨æ˜¯é€šè¿‡<code>promise</code>ä¼ é€’ï¼Œè¿™é‡Œ<code>while</code>æ–¹æ³•ï¼Œè¿˜æ˜¯é€’å½’</li></ol><h2 id="ç†è§£-axios-ä¸­çš„-Promise"><a href="#ç†è§£-axios-ä¸­çš„-Promise" class="headerlink" title="ç†è§£ axios ä¸­çš„ Promise"></a>ç†è§£ axios ä¸­çš„ Promise</h2><p>å†å›å¤´çœ‹å®˜æ–¹çš„ç¤ºä¾‹ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// Add a request interceptor</span>axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>  <span class="token keyword">function</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// Do something before request is sent</span>    <span class="token keyword">return</span> config<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// Do something with request error</span>    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>error æ—¶å€™ï¼Œè¿”å› rejectï¼Œæ­£å¸¸æ—¶å€™ï¼Œåªè¿”å›äº† configã€‚åœ¨ä¸‹ä¸€æ­¥çš„æ‰§è¡Œä¸­ï¼Œå®é™…å˜æˆäº†</p><pre class=" language-js"><code class="language-js">promise <span class="token operator">=</span> promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token function">resolve</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">,</span> rejected<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>é€šè¿‡ä¸€ä¸ªé—®é¢˜å»é˜…è¯»æºç ï¼Œå†å»ç†è§£åŸºç¡€çŸ¥è¯†ã€‚æœ‰çš„çŸ¥è¯†ç‚¹æ˜¯çŸ¥é“äº†ï¼Œæœ‰çš„æ˜¯ä¼šç”¨äº†ï¼Œç„¶è€Œï¼Œå¹¶æ²¡æœ‰çœŸæ­£çš„ç†è§£ï¼Œæƒ³ä¸¾ä¸€åä¸‰ï¼Œéš¾å‘ ğŸ˜­</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> promise </tag>
            
            <tag> axios </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¼–ç ç‚¹æ»´:ç¬¬ä¸€æœŸ</title>
      <link href="/2019/12/08/anything/bian-ma-dian-di-di-yi-qi/"/>
      <url>/2019/12/08/anything/bian-ma-dian-di-di-yi-qi/</url>
      
        <content type="html"><![CDATA[<p>æœ¬å‘¨é‡åˆ°å‡ ä¸ªæœ‰æ„æ€çš„é—®é¢˜ã€‚ä¸‹é¢ä¸€ä¸€è®°å½•ã€‚</p><ol><li><p>ï¼ˆcssï¼‰ä½¿ç”¨flexå¸ƒå±€ï¼Œå¦‚ä½•ä¿è¯ä¸Šä¸‹è¡Œä¹‹é—´é—´è·ï¼Œå¹¶ä¸”æœ€åä¸€è¡Œå’Œå®¹å™¨ç©ºé—´ä¸º0</p><p>å…ƒç´ ä¹‹é—´ä½¿ç”¨margin-bottomä¿æŒè·ç¦»ï¼Œæœ€åä¸€è¡Œå…ƒç´ çš„è·ç¦»ï¼Œä½¿ç”¨å¤–å±‚çš„è´ŸmarginæŠµæ¶ˆ</p><iframe scrolling="no" width="100%" height="300" src="https://jsfiddle.net/pL28utya/embedded/html,css,result/dark" frameborder="0" loading="lazy" allowfullscreen></iframe></li></ol><ol start="2"><li><p>ï¼ˆreactï¼‰å¦‚ä½•ç†è§£ç»„ä»¶é‡Œé¢çš„æ™®é€šå‡½æ•°å’Œç®­å¤´å‡½æ•°</p><p>å‚è€ƒï¼š<a href="https://www.zhihu.com/question/59025982" target="_blank" rel="noopener">https://www.zhihu.com/question/59025982</a></p><p>ç®€å•æ¥è¯´ï¼š</p><p>æ™®é€šå‡½æ•° <code>Foo.prototype.a = function(){}</code></p><p>ç®­å¤´å‡½æ•°</p><pre class=" language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span> a<span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>æ™®é€šå‡½æ•°æŒ‚è½½åœ¨åŸå‹ä¸Šé¢ï¼Œç®­å¤´å‡½æ•°æŒ‚è½½åœ¨å¯¹è±¡ä¸Šé¢ã€‚ä½¿ç”¨ç®­å¤´å‡½æ•°ç»‘å®šä¸éœ€è¦ä½¿ç”¨<code>bind</code>ï¼Œæ¯”è¾ƒæ–¹ä¾¿ã€‚</p></li><li><p>react native <code>keybordWillShow</code> å®‰å“æ˜¯ç›‘å¬ä¸åˆ°çš„ï¼Œ<code>statusbar</code>ä¸­<code>barStyle</code>åœ¨å®‰å“ä¸Šé¢ä¹Ÿå¯ä»¥ç”¨ï¼Œéœ€è¦å®‰å“6.0+</p></li><li><p>react-navigation </p><p>é¡µé¢é”€æ¯ï¼š</p><p>a-&gt;b ï¼šä¸ä¼šæ‰§è¡Œé¡µé¢é”€æ¯äº‹ä»¶</p><p>bè¿”å›aï¼šæ‰§è¡Œbé¡µé¢é”€æ¯äº‹ä»¶</p></li><li><p>å‰ç«¯å¤„ç†emojiè¡¨æƒ… ğŸ˜€</p><p>æ­£å¸¸åº”è¯¥æ•°æ®åº“ä¿å­˜emojiè¡¨æƒ…ï¼Œæ•°æ®åº“ä½¿ç”¨<code>utf8mp4</code>ï¼Œæœ€å®Œç¾çš„è§£å†³æ–¹æ¡ˆã€‚</p><p>ä½†æ˜¯æœ‰æ—¶å€™ï¼Œæ•°æ®åº“æ˜¯ä»¥å‰çš„ï¼Œä¸å¯èƒ½å˜æ›´ï¼Œè¿™æ—¶å€™å‰ç«¯å¯ä»¥æŠŠemojiè½¬æˆutf-16ï¼Œç„¶åä¼ ç»™åç«¯ã€‚å¯ä»¥ç›´æ¥ä½¿ç”¨<a href="https://github.com/channg/umoji" target="_blank" rel="noopener">umoji</a>çš„<code>emojiToUnicode</code>æ–¹æ³•ã€‚</p></li></ol><p>   éªŒè¯utf-16æ˜¯å¦æ­£ç¡®ï¼š<a href="https://www.browserling.com/tools/utf16-decode" target="_blank" rel="noopener">https://www.browserling.com/tools/utf16-decode</a></p><p>   å‰ç«¯å¦‚ä½•è§£æè¿™ä¸ªutf-16 å‘¢ï¼Ÿ<a href="https://www.jianshu.com/p/432425a02b59" target="_blank" rel="noopener">https://www.jianshu.com/p/432425a02b59</a></p><p>   ç¼–ç è§£ç å‡½æ•°ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// ç¼–ç </span><span class="token keyword">function</span> <span class="token function">utf16toEntities</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token punctuation">{</span>         <span class="token keyword">var</span> patt<span class="token operator">=</span><span class="token regex">/[\ud800-\udbff][\udc00-\udfff]/g</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// æ£€æµ‹utf16å­—ç¬¦æ­£åˆ™ </span>        str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>patt<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>char<span class="token punctuation">)</span><span class="token punctuation">{</span>                 <span class="token keyword">var</span> H<span class="token punctuation">,</span> L<span class="token punctuation">,</span> code<span class="token punctuation">;</span>                 <span class="token keyword">if</span> <span class="token punctuation">(</span>char<span class="token punctuation">.</span>length<span class="token operator">===</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                     H <span class="token operator">=</span> char<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å–å‡ºé«˜ä½ </span>                    L <span class="token operator">=</span> char<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å–å‡ºä½ä½ </span>                    code <span class="token operator">=</span> <span class="token punctuation">(</span>H <span class="token operator">-</span> <span class="token number">0xD800</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0x400</span> <span class="token operator">+</span> <span class="token number">0x10000</span> <span class="token operator">+</span> L <span class="token operator">-</span> <span class="token number">0xDC00</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// è½¬æ¢ç®—æ³• </span>                    <span class="token keyword">return</span> <span class="token string">"&amp;#"</span> <span class="token operator">+</span> code <span class="token operator">+</span> <span class="token string">";"</span><span class="token punctuation">;</span>                 <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                  <span class="token keyword">return</span> char<span class="token punctuation">;</span>                 <span class="token punctuation">}</span>          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token keyword">return</span> str<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token comment" spellcheck="true">// è§£ç </span><span class="token keyword">function</span> <span class="token function">uncodeUtf16</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/\&amp;#.*?;/g</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> result <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>char<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">var</span> H<span class="token punctuation">,</span>L<span class="token punctuation">,</span>code<span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>char<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">9</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>                code <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>char<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/[0-9]+/g</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                H <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>code<span class="token number">-0x10000</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">0x400</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">0xD800</span><span class="token punctuation">;</span>                L <span class="token operator">=</span> <span class="token punctuation">(</span>code <span class="token operator">-</span> <span class="token number">0x10000</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">0x400</span> <span class="token operator">+</span> <span class="token number">0xDC00</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token function">unescape</span><span class="token punctuation">(</span><span class="token string">"%u"</span><span class="token operator">+</span>H<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"%u"</span><span class="token operator">+</span>L<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                <span class="token keyword">return</span> char<span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><p>   ä½†æ˜¯ä½†æ˜¯ï¼Œæˆ‘è§£æçš„æ—¶å€™ç›´æ¥<code>JSON.parse(emoji)</code>ä¹Ÿæ˜¯å¯ä»¥çš„â€¦.è¯•äº†ååƒ»çš„å­—ç¬¦ä¹Ÿå¯ä»¥ï¼Œæƒ³ææ˜ç™½ä¸ºä»€ä¹ˆï¼Œæ²¡æœ‰æ‰¾åˆ°æ–‡ç« =-=ï¼Œä¸çŸ¥é“æ˜¯åŸ‹äº†ç‚¸å¼¹ï¼Œè¿˜æ˜¯ç‹—å±è¿/(ã„’oã„’)/~~</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç ç‚¹æ»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react </tag>
            
            <tag> å‘¨è®° </tag>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React Native æ²‰æµ¸å¼çŠ¶æ€æ å’Œå¯¼èˆªæ </title>
      <link href="/2019/11/24/front-end/reactnative-ding-bu-tu-pian-she-zhi/"/>
      <url>/2019/11/24/front-end/reactnative-ding-bu-tu-pian-she-zhi/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘å¼€å§‹æ¥è§¦ React Native çš„å¼€å‘å·¥ä½œï¼Œå¯¹åŸç”Ÿå¼€å‘åŸºæœ¬ä¸äº†è§£ï¼Œé‡Œé¢å¾ˆå¤šå¤§å¤§å°å°çš„å‘ã€‚è¿™æ¬¡å¼€å‘å†…å®¹ä¸æ˜¯å¾ˆå¤æ‚ï¼Œæ•°æ®äº¤äº’ä¸æ˜¯éå¸¸å¤šï¼Œä¸»è¦æ˜¯é¡µé¢çš„å¸ƒå±€ã€‚</p><h2 id="å¦‚ä½•å®ç°ä¸€ä¸ªé¡¶éƒ¨éšè—çŠ¶æ€æ å¹¶æ˜¾ç¤ºå¯¼èˆªæ çš„é¡µé¢ï¼Ÿ"><a href="#å¦‚ä½•å®ç°ä¸€ä¸ªé¡¶éƒ¨éšè—çŠ¶æ€æ å¹¶æ˜¾ç¤ºå¯¼èˆªæ çš„é¡µé¢ï¼Ÿ" class="headerlink" title="å¦‚ä½•å®ç°ä¸€ä¸ªé¡¶éƒ¨éšè—çŠ¶æ€æ å¹¶æ˜¾ç¤ºå¯¼èˆªæ çš„é¡µé¢ï¼Ÿ"></a>å¦‚ä½•å®ç°ä¸€ä¸ªé¡¶éƒ¨éšè—çŠ¶æ€æ å¹¶æ˜¾ç¤ºå¯¼èˆªæ çš„é¡µé¢ï¼Ÿ</h2><p><img src="/images/image-20191124220426772.png" alt="äº§å“å›¾ç‰‡"></p><h2 id="å®ç°æ–¹å¼"><a href="#å®ç°æ–¹å¼" class="headerlink" title="å®ç°æ–¹å¼"></a>å®ç°æ–¹å¼</h2><ol><li><p>ä½¿ç”¨<code>Image</code>å®ç°å›¾ç‰‡çš„æ˜¾ç¤ºï¼Œè¿™é‡Œçš„å›¾ç‰‡æœ€å¥½ä½¿ç”¨<code>ImageBackground</code>ç»„ä»¶ï¼ŒåŒºåˆ«æ˜¯<code>ImageBackground</code>å¯ä»¥åµŒå¥—å…¶ä»–ç»„ä»¶</p></li><li><p>å¯¼èˆªæ ï¼Œæˆ‘ä¸€å¼€å§‹æ˜¯ä½¿ç”¨ç»å¯¹å®šä½çš„æ–¹å¼è¿›è¡Œæ¨¡æ‹Ÿçš„ï¼Œä½†æ˜¯è¶Šæƒ³è¶Šä¸å¯¹ï¼Œå®ç°è‚¯å®šæ˜¯æœ‰é—®é¢˜çš„ï¼Œæœç„¶åœ¨<code>navigationOptions</code>ä¸­æ‰¾åˆ°äº†<code>headerTransparent</code>å±æ€§ï¼Œä½¿ç”¨å®ƒï¼Œå¯¼èˆªæ å°±å¯ä»¥å®ç°é€æ˜æ˜¾ç¤ºã€‚</p></li><li><p>çŠ¶æ€æ é€æ˜æ˜¾ç¤ºï¼š</p><pre class=" language-javascript"><code class="language-javascript">StatusBar<span class="token punctuation">.</span><span class="token function">setBackgroundColor</span><span class="token punctuation">(</span><span class="token string">"transparent"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>StatusBar<span class="token punctuation">.</span><span class="token function">setTranslucent</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li></ol><h2 id="å¯ç”¨å‚è€ƒç¤ºä¾‹"><a href="#å¯ç”¨å‚è€ƒç¤ºä¾‹" class="headerlink" title="å¯ç”¨å‚è€ƒç¤ºä¾‹"></a>å¯ç”¨å‚è€ƒç¤ºä¾‹</h2><p><a href="https://github.com/Yaob1990/ReactNativePlayGround/blob/master/src/pages/Bar.js" target="_blank" rel="noopener">æ²‰æµ¸å¼çŠ¶æ€æ </a></p><h3 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h3><ol><li><a href="https://www.jianshu.com/p/8075ccc84d07" target="_blank" rel="noopener">React Native ä¸­çš„çŠ¶æ€æ </a></li><li><a href="http://www.jeepxie.net/article/558579.html" target="_blank" rel="noopener">react native æ²‰æµ¸å¼(é€æ˜)çŠ¶æ€æ ä¸æ ‡é¢˜å¯¼èˆªæ </a></li></ol>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ··åˆå¼€å‘ </tag>
            
            <tag> React Native </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>weexå…¼å®¹æœ¬åœ°å›¾ç‰‡</title>
      <link href="/2019/07/05/front-end/weex-jian-rong-ben-di-tu-pian/"/>
      <url>/2019/07/05/front-end/weex-jian-rong-ben-di-tu-pian/</url>
      
        <content type="html"><![CDATA[<p>åš weex å¼€å‘æ—¶å€™ï¼Œä¸èƒ½ä½¿ç”¨æœ¬åœ°å›¾ç‰‡ï¼Œæ¯”è¾ƒéš¾å—ï¼Œå¿…é¡»ä½¿ç”¨ç½‘ç»œå›¾ç‰‡ã€‚<br>é‚£ä¹ˆèƒ½ä¸èƒ½æœ¬åœ°å¼€å‘çš„å›¾ç‰‡è‡ªåŠ¨è½¬æˆç½‘ç»œå›¾ç‰‡ï¼Ÿ</p><h3 id="å…¼å®¹æœ¬åœ°å›¾ç‰‡å®ç°"><a href="#å…¼å®¹æœ¬åœ°å›¾ç‰‡å®ç°" class="headerlink" title="å…¼å®¹æœ¬åœ°å›¾ç‰‡å®ç°"></a>å…¼å®¹æœ¬åœ°å›¾ç‰‡å®ç°</h3><p>æœ¬åœ°å›¾ç‰‡éƒ½å­˜æ”¾åœ¨/src/image æ–‡ä»¶å¤¹ï¼Œé€šè¿‡ tool.getImage(â€œlogo.pngâ€) è®¿é—®å›¾ç‰‡ã€‚åœ¨è¿è¡Œå’Œéƒ¨ç½²æ—¶å€™ï¼Œå›¾ç‰‡åœ°å€è½¬æˆç½‘ç»œåœ°å€ã€‚<br>é€‚åˆ webï¼Œä¸é€‚åˆ app åœºæ™¯ã€‚</p><h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><p><a href="https://github.com/aocoding/weex-local-image" target="_blank" rel="noopener">weex-local-image</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> weex </tag>
            
            <tag> æ··åˆå¼€å‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vagrant å­¦ä¹ è®°å½•</title>
      <link href="/2019/01/06/tool/vagrant-xue-xi-ji-lu/"/>
      <url>/2019/01/06/tool/vagrant-xue-xi-ji-lu/</url>
      
        <content type="html"><![CDATA[<p>Vagrant æ˜¯virtualBoxçš„å‘½ä»¤è¡Œç®¡ç†å·¥å…·ã€‚<br>ä»¥å‰åœ¨macå¹³å°æˆ‘ä¼šç”¨mamp pro ä½œä¸ºphpçš„å¼€å‘ç¯å¢ƒï¼Œä½†æ˜¯éæ­£ç‰ˆæ¯•ç«Ÿä¸å¤ªå¥½ï¼Œè€Œä¸”å¼€å‘ç¯å¢ƒä¸è´´è¿‘å®é™…çº¿ä¸Šï¼ŒæŠ˜è…¾äº†ä¸€ä¸‹ï¼Œä½¿ç”¨ vagrant æˆåŠŸä»£æ›¿mamp proã€‚</p><h3 id="1-å®‰è£…vagrant"><a href="#1-å®‰è£…vagrant" class="headerlink" title="1. å®‰è£…vagrant"></a>1. å®‰è£…vagrant</h3><pre><code>`brew cask install virtualbox` å®‰è£… virtualbox`brew cask install vagrant` å®‰è£… vagrant</code></pre><h3 id="2-ä½¿ç”¨é•œåƒåˆå§‹åŒ–è™šæ‹Ÿæœº"><a href="#2-ä½¿ç”¨é•œåƒåˆå§‹åŒ–è™šæ‹Ÿæœº" class="headerlink" title="2. ä½¿ç”¨é•œåƒåˆå§‹åŒ–è™šæ‹Ÿæœº"></a>2. ä½¿ç”¨é•œåƒåˆå§‹åŒ–è™šæ‹Ÿæœº</h3><pre><code>ä¸‹è½½åœ°å€æ‰¾ä¸ªç™¾åº¦ç›˜å§ï¼Œå®˜æ–¹çš„æˆ‘å®åœ¨æ˜¯æ²¡æœ‰æ‹–åŠ¨ã€‚ã€‚ã€‚ä¸€ç‚¹éƒ½æ²¡åŠ¨ã€‚ã€‚ã€‚`vagrant init precise64` å…¶ä¸­ `precise64` è¡¨ç¤ºä½ çš„é•œåƒæ–‡ä»¶</code></pre><h3 id="3-å¸¸ç”¨è®¾ç½®"><a href="#3-å¸¸ç”¨è®¾ç½®" class="headerlink" title="3. å¸¸ç”¨è®¾ç½®"></a>3. å¸¸ç”¨è®¾ç½®</h3><pre><code>vagrant up  å¯åŠ¨è™šæ‹Ÿæœºvagrant ssh sshè¿›å…¥è™šæ‹Ÿæœº</code></pre><p>é…ç½®æ–‡ä»¶ï¼š<br>éœ€è¦è®¾ç½®çš„åœ°æ–¹å…¶å®å¾ˆå°‘ï¼Œä¹Ÿå°±æ˜¯ç½‘ç»œç«¯å£è½¬å‘å’Œæœ¬åœ°å…¶ä»–æœºå™¨è®¿é—®çš„å…¬å…±ip<br><code>config.vm.synced_folder</code>è¡¨ç¤ºæœ¬åœ°å’Œè™šæ‹ŸæœºåŒæ­¥çš„æ–‡ä»¶å¤¹ã€‚</p><pre><code>  config.vm.network &quot;forwarded_port&quot;, guest: 80, host: 80  config.vm.network &quot;forwarded_port&quot;, guest: 8888, host: 8888  config.vm.network &quot;forwarded_port&quot;, guest: 888, host: 888  config.vm.network &quot;public_network&quot;, ip: &quot;192.168.1.120&quot;  config.vm.synced_folder &quot;../data&quot;, &quot;/vagrant_data&quot;</code></pre><p>åœ¨å¼€å‘ä¸­ï¼Œå‘ç°phpä¸èƒ½è‡ªåŠ¨ç”Ÿæˆtplæ¨¡æ¿æ–‡ä»¶ï¼Œéœ€è¦è®¾ç½®åŒæ­¥æ–‡ä»¶å¤¹çš„æƒé™</p><pre><code>config.vm.synced_folder      &quot;your_folder&quot;(å¿…é¡»)   //ç‰©ç†æœºç›®å½•ï¼Œå¯ä»¥æ˜¯ç»å¯¹åœ°å€æˆ–ç›¸å¯¹åœ°å€ï¼Œç›¸å¯¹åœ°å€æ˜¯æŒ‡ç›¸å¯¹ä¸vagranté…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•  ,&quot;vm_folder(å¿…é¡»)&quot;    // æŒ‚è½½åˆ°è™šæ‹Ÿæœºä¸Šçš„ç›®å½•åœ°å€  ,create(boolean)--å¯é€‰     //é»˜è®¤ä¸ºfalseï¼Œè‹¥é…ç½®ä¸ºtrueï¼ŒæŒ‚è½½åˆ°è™šæ‹Ÿæœºä¸Šçš„ç›®å½•è‹¥ä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»º  ,disabled(boolean):--å¯é€‰   //é»˜è®¤ä¸ºfalseï¼Œè‹¥ä¸ºtrue,åˆ™ç¦ç”¨è¯¥é¡¹æŒ‚è½½  ,owner(string):&#39;www&#39;--å¯é€‰   //è™šæ‹Ÿæœºç³»ç»Ÿä¸‹æ–‡ä»¶æ‰€æœ‰è€…(ç¡®ä¿ç³»ç»Ÿä¸‹æœ‰è¯¥ç”¨æˆ·ï¼Œå¦åˆ™ä¼šæŠ¥é”™)ï¼Œé»˜è®¤ä¸ºvagrant  ,group(string):&#39;www&#39;--å¯é€‰   //è™šæ‹Ÿæœºç³»ç»Ÿä¸‹æ–‡ä»¶æ‰€æœ‰ç»„( (ç¡®ä¿ç³»ç»Ÿä¸‹æœ‰è¯¥ç”¨æˆ·ç»„ï¼Œå¦åˆ™ä¼šæŠ¥é”™)ï¼Œé»˜è®¤ä¸ºvagrant  ,mount_options(array):[&quot;dmode=775&quot;,&quot;fmode=664&quot;]--å¯é€‰  dmodeé…ç½®ç›®å½•æƒé™ï¼Œfmodeé…ç½®æ–‡ä»¶æƒé™  //é»˜è®¤æƒé™777  ,type(string):--å¯é€‰     //æŒ‡å®šæ–‡ä»¶å…±äº«æ–¹å¼ï¼Œä¾‹å¦‚ï¼š&#39;nfs&#39;ï¼Œvagranté»˜è®¤æ ¹æ®ç³»ç»Ÿç¯å¢ƒé€‰æ‹©æœ€ä½³çš„æ–‡ä»¶å…±äº«æ–¹å¼</code></pre><p>æˆ‘çš„é…ç½®ï¼š<br><code>config.vm.synced_folder &quot;../data&quot;, &quot;/vagrant_data&quot;,create: true, owner:&quot;www&quot;, group: &quot;www&quot;</code></p><h3 id="4-å®‰è£…å®å¡”é¢æ¿"><a href="#4-å®‰è£…å®å¡”é¢æ¿" class="headerlink" title="4. å®‰è£…å®å¡”é¢æ¿"></a>4. å®‰è£…å®å¡”é¢æ¿</h3><p>å¯¹æˆ‘æˆ‘ç­‰å¼±é¸¡é¸¡ï¼Œå®å¡”é¢æ¿è¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚ç›´æ¥å®‰è£…å®˜æ–¹è¯´æ˜å®‰è£…å³å¯ã€‚æ³¨æ„ï¼Œæœ€åå®‰è£…æˆåŠŸçš„ipæ˜¯å¤–ç½‘çš„ipï¼Œæˆ‘ä»¬éœ€è¦æœ¬åœ°åœ°å€å»è®¿é—®ã€‚</p><h3 id="5-é…ç½®ç½‘ç«™"><a href="#5-é…ç½®ç½‘ç«™" class="headerlink" title="5. é…ç½®ç½‘ç«™"></a>5. é…ç½®ç½‘ç«™</h3><p>å®å¡”å·²ç»å¯ä»¥é…ç½®ç½‘ç«™äº†ã€‚ä½†æ˜¯è®¾ç½®äº†ä¹‹åï¼Œå¹¶ä¸èƒ½è®¿é—®ã€‚<br>éœ€è¦å»hosts é‡Œé¢é…ç½®ä¸‹ç½‘ç»œåœ°å€ï¼Œæ¨èä½¿ç”¨<a href="https://oldj.github.io/SwitchHosts/" target="_blank" rel="noopener">SwitchHosts</a>å»ç®¡ç†hostsã€‚<br>egï¼š</p><pre><code># SwitchHosts!# vagrant127.0.0.1 www.test.com127.0.0.1 www.btadmin.com</code></pre><p>è¿™æ—¶å€™å°±å¯ä»¥ç”¨<code>www.test.com</code>è®¿é—®æµ‹è¯•ç½‘ç«™ï¼Œç”¨<code>www.btadmin.com</code>è®¿é—®å®å¡”ç®¡ç†é¡µé¢ï¼ˆéœ€è¦åœ¨å®å¡”ä¸­é…ç½®ï¼‰ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vagrant </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2018/09/12/hello-world/"/>
      <url>/2018/09/12/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class=" language-bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class=" language-bash"><code class="language-bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class=" language-bash"><code class="language-bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class=" language-bash"><code class="language-bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
